<html><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="Cache-Control" content="no-transform" /><meta http-equiv="Cache-Control" content="no-siteapp" /><title>keepalivedå®ç°æœåŠ¡é«˜å¯ç”¨ | æƒ¨ç»¿å°‘å¹´</title><meta name="description" content="ã€€ã€€Keepalivedè½¯ä»¶èµ·åˆæ˜¯ä¸“ä¸ºLVSè´Ÿè½½å‡è¡¡è½¯ä»¶è®¾è®¡çš„ï¼Œç”¨æ¥ç®¡ç†å¹¶ç›‘æ§LVSé›†ç¾¤ç³»ç»Ÿä¸­å„ä¸ªæœåŠ¡èŠ‚ç‚¹çš„çŠ¶æ€ï¼Œåæ¥åˆåŠ å…¥äº†å¯ä»¥å®ç°é«˜å¯ç”¨çš„VRRPåŠŸèƒ½ã€‚å› æ­¤ï¼ŒKeepalivedé™¤äº†èƒ½å¤Ÿç®¡ç†LVSè½¯ä»¶å¤–ï¼Œè¿˜å¯ä»¥ä½œä¸ºå…¶ä»–æœåŠ¡ï¼ˆä¾‹å¦‚ï¼šNginxã€Haproxyã€MySQLç­‰ï¼‰çš„é«˜å¯ç”¨è§£å†³æ–¹æ¡ˆè½¯ä»¶ã€‚" /><meta name="keywords" content="" /><link rel="shortcut icon" href="Frog-2.png" tppabs="http://clsn.io/wp-content/uploads/2018/09/Frog-2.png"><link rel="apple-touch-icon" sizes="114x114" href="Frog-2.png" tppabs="http://clsn.io/wp-content/uploads/2018/09/Frog-2.png" /><link rel="profile" href="11" tppabs="http://gmpg.org/xfn/11"><link rel="pingback" href="xmlrpc.php" tppabs="http://clsn.io/xmlrpc.php"><!--[if lt IE 9]><script src="/wp-content/themes/clsn-003/js/html5.js"></script><script src="/wp-content/themes/clsn-003/js/css3-mediaqueries.js"></script><![endif]--><link rel='stylesheet' id='begin-style-css' href="style.css-ver=5.2" tppabs="http://clsn.io/wp-content/themes/clsn-003/style.css?ver=5.2" type='text/css' media='all' /><link rel='stylesheet' id='fonts-css' href="fonts.css-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/css/fonts/fonts.css?ver=2017.07.26" type='text/css' media='all' /><link rel='stylesheet' id='highlight-css' href="highlight.css-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/css/highlight.css?ver=2017.07.26" type='text/css' media='all' /><script type='text/javascript' src="jquery.min.js-ver=1.10.1" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/jquery.min.js?ver=1.10.1"></script><link rel="canonical" href="lx427.html" tppabs="http://clsn.io/clsn/lx427.html" /><link rel="icon" href="Frog-2.png" tppabs="http://clsn.io/wp-content/uploads/2018/09/Frog-2.png" sizes="32x32" /><link rel="icon" href="Frog-2.png" tppabs="http://clsn.io/wp-content/uploads/2018/09/Frog-2.png" sizes="192x192" /><link rel="apple-touch-icon-precomposed" href="Frog-2.png" tppabs="http://clsn.io/wp-content/uploads/2018/09/Frog-2.png" /><meta name="msapplication-TileImage" content="/wp-content/uploads/2018/09/Frog-2.png" /></head><body class="post-template-default single single-post postid-427 single-format-standard"><div id="page" class="hfeed site"> <header id="masthead" class="site-header"> <div id="header-main" class="header-main"> <nav id="top-header"> <div class="top-nav"> <div class="menu-%e8%81%94%e7%b3%bb%e6%96%b9%e5%bc%8f-container"><ul id="menu-%e8%81%94%e7%b3%bb%e6%96%b9%e5%bc%8f" class="top-menu"><li id="menu-item-1268" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1268"><a href="index.htm" tppabs="http://clsn.io/">åšå®¢åœ°å€</a></li><li id="menu-item-1269" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1269"><a href="javascript:if(confirm('https://shang.qq.com/wpa/qunwpa?idkey=20c5455d6aaf8df9722be043588a9adda7cd9a18b6563744e4143d736559d946  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ´ËÒ»µØÖ·Ê¹ÓÃÉĞÎ´Ö§³ÖµÄĞ­Òé (ÀıÈç£¬gopher)¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='https://shang.qq.com/wpa/qunwpa?idkey=20c5455d6aaf8df9722be043588a9adda7cd9a18b6563744e4143d736559d946'" tppabs="https://shang.qq.com/wpa/qunwpa?idkey=20c5455d6aaf8df9722be043588a9adda7cd9a18b6563744e4143d736559d946">Linuxè€å¸æœº</a></li><li id="menu-item-1270" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1270"><a href="javascript:if(confirm('https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ´ËÒ»µØÖ·Ê¹ÓÃÉĞÎ´Ö§³ÖµÄĞ­Òé (ÀıÈç£¬gopher)¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&#038;email=clsn@nmtui.com'" tppabs="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&#038;email=clsn@nmtui.com">ç»™æˆ‘å‘é‚®ä»¶</a></li></ul></div> </div> </nav><!-- #top-header --> <div id="menu-box"> <div id="top-menu"> <span class="nav-search"></span> <div class="logo-site"> <p class="site-title"> <a href="index.htm" tppabs="http://clsn.io/"><img src="1-1.png" tppabs="http://clsn.io/wp-content/uploads/2018/09/1-1.png" title="æƒ¨ç»¿å°‘å¹´" alt="æƒ¨ç»¿å°‘å¹´" rel="home" /><span class="site-name">æƒ¨ç»¿å°‘å¹´</span></a> </p> </div><!-- .logo-site --> <div id="site-nav-wrap"> <div id="sidr-close"><a href="#sidr-close" class="toggle-sidr-close">Ã—</a></div> <div id="sidr-menu"><div class="toggle-sidr-menu">MENU</a></div></div> <nav id="site-nav" class="main-nav"> <a href="#sidr-main" id="navigation-toggle" class="bars"><i class="be be-menu"></i></a> <div class="menu-%e6%83%a8%e7%bb%bf%e5%b0%91%e5%b9%b4-container"><ul id="menu-%e6%83%a8%e7%bb%bf%e5%b0%91%e5%b9%b4" class="down-menu nav-menu"><li id="menu-item-1053" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-has-children menu-item-1053"><a href="javascript:if(confirm('http://clsn.io/clsn-ops/ops-linux/  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn-ops/ops-linux/'" tppabs="http://clsn.io/clsn-ops/ops-linux/">è¿ç»´åŸºæœ¬åŠŸ</a><ul class="sub-menu"> <li id="menu-item-1054" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1054"><a href="javascript:if(confirm('http://clsn.io/clsn-ops/ops-linux/dev-shell/  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn-ops/ops-linux/dev-shell/'" tppabs="http://clsn.io/clsn-ops/ops-linux/dev-shell/">Shellç¼–ç¨‹</a></li> <li id="menu-item-1055" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1055"><a href="index-3.htm" tppabs="http://clsn.io/clsn-ops/ops-linux/web-app/">Webåº”ç”¨</a></li> <li id="menu-item-1056" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1056"><a href="index-4.htm" tppabs="http://clsn.io/clsn-ops/ops-linux/monitor/">ç›‘æ§æœåŠ¡</a></li> <li id="menu-item-1057" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1057"><a href="index-5.htm" tppabs="http://clsn.io/clsn-ops/ops-linux/automation/">è‡ªåŠ¨åŒ–</a></li> <li id="menu-item-1058" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1058"><a href="index-6.htm" tppabs="http://clsn.io/clsn-ops/ops-linux/storage/">å­˜å‚¨</a></li> <li id="menu-item-1059" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1059"><a href="javascript:if(confirm('http://clsn.io/clsn-ops/ops-linux/acl/  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn-ops/ops-linux/acl/'" tppabs="http://clsn.io/clsn-ops/ops-linux/acl/">å®‰å…¨</a></li></ul></li><li id="menu-item-1044" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-1044"><a href="index-8.htm" tppabs="http://clsn.io/clsn-ops/cloud/">äº‘è®¡ç®—</a><ul class="sub-menu"> <li id="menu-item-1046" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1046"><a href="javascript:if(confirm('http://clsn.io/clsn-ops/cloud/virt/  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn-ops/cloud/virt/'" tppabs="http://clsn.io/clsn-ops/cloud/virt/">è™šæ‹ŸåŒ–</a></li> <li id="menu-item-1045" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1045"><a href="javascript:if(confirm('http://clsn.io/clsn-ops/cloud/openstack/  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn-ops/cloud/openstack/'" tppabs="http://clsn.io/clsn-ops/cloud/openstack/">OpenStack</a></li></ul></li><li id="menu-item-1048" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-1048"><a href="index-11.htm" tppabs="http://clsn.io/clsn-ops/databases/">æ•°æ®åº“</a><ul class="sub-menu"> <li id="menu-item-1049" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1049"><a href="javascript:if(confirm('http://clsn.io/clsn-ops/databases/mysql/  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn-ops/databases/mysql/'" tppabs="http://clsn.io/clsn-ops/databases/mysql/">MySQL</a></li> <li id="menu-item-1050" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1050"><a href="index-13.htm" tppabs="http://clsn.io/clsn-ops/databases/nosql/">NoSQL</a></li></ul></li><li id="menu-item-1052" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1052"><a href="index-14.htm" tppabs="http://clsn.io/clsn-ops/network/">ç½‘ç»œæŠ€æœ¯</a></li><li id="menu-item-1051" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1051"><a href="index-15.htm" tppabs="http://clsn.io/clsn-ops/play-linux/">ç©è½¬Linux</a></li><li id="menu-item-1047" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1047"><a href="index-16.htm" tppabs="http://clsn.io/clsn-ops/dev-ops/">æ•æ·å¼€å‘</a></li><li id="menu-item-1258" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1258"><a href="contribute-page.htm" tppabs="http://clsn.io/contribute-page">æŠ•ç¨¿</a></li></ul></div> </nav><!-- #site-nav --> </div><!-- #site-nav-wrap --> <div class="clear"></div> </div><!-- #top-menu --> </div><!-- #menu-box --> </div><!-- #menu-box --></header><!-- #masthead --><div id="search-main"> <div class="searchbar"> <form method="get" id="searchform" action="http://clsn.io/"> <span class="search-input"> <input type="text" value="" name="s" id="s" placeholder="è¾“å…¥æœç´¢å†…å®¹" required /> <button type="submit" id="searchsubmit"><i class="be be-search"></i></button> </span> </form></div> <div class="clear"></div></div> <nav class="breadcrumb"> <a class="crumbs" href="index.htm" tppabs="http://clsn.io/"><i class="be be-home"></i>é¦–é¡µ</a><i class="be be-arrowright"></i><a href="javascript:if(confirm('http://clsn.io/clsn-ops/linux%e8%bf%90%e7%bb%b4/  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn-ops/linux%e8%bf%90%e7%bb%b4/'" tppabs="http://clsn.io/clsn-ops/linux%e8%bf%90%e7%bb%b4/" rel="category tag">Linuxè¿ç»´</a><i class="be be-arrowright"></i><a href="javascript:if(confirm('http://clsn.io/clsn-ops/ops-linux/  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn-ops/ops-linux/'" tppabs="http://clsn.io/clsn-ops/ops-linux/">è¿ç»´åŸºæœ¬åŠŸ</a><i class="be be-arrowright"></i><a href="index-3.htm" tppabs="http://clsn.io/clsn-ops/ops-linux/web-app/" rel="category tag">Webåº”ç”¨</a><i class="be be-arrowright"></i><a href="javascript:if(confirm('http://clsn.io/clsn-ops/ops-linux/  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn-ops/ops-linux/'" tppabs="http://clsn.io/clsn-ops/ops-linux/">è¿ç»´åŸºæœ¬åŠŸ</a><i class="be be-arrowright"></i><a href="javascript:if(confirm('http://clsn.io/clsn-ops/ops-linux/acl/  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn-ops/ops-linux/acl/'" tppabs="http://clsn.io/clsn-ops/ops-linux/acl/" rel="category tag">å®‰å…¨</a><i class="be be-arrowright"></i><a href="javascript:if(confirm('http://clsn.io/clsn-ops/ops-linux/  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn-ops/ops-linux/'" tppabs="http://clsn.io/clsn-ops/ops-linux/">è¿ç»´åŸºæœ¬åŠŸ</a><i class="be be-arrowright"></i><a href="index-5.htm" tppabs="http://clsn.io/clsn-ops/ops-linux/automation/" rel="category tag">è‡ªåŠ¨åŒ–</a><i class="be be-arrowright"></i><a href="javascript:if(confirm('http://clsn.io/clsn-ops/ops-linux/  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn-ops/ops-linux/'" tppabs="http://clsn.io/clsn-ops/ops-linux/" rel="category tag">è¿ç»´åŸºæœ¬åŠŸ</a><i class="be be-arrowright"></i>keepalivedå®ç°æœåŠ¡é«˜å¯ç”¨ </nav> <div id="content" class="site-content"> <div id="primary" class="content-area"> <main id="main" class="site-main" role="main"> <article id="post-427" class="post-427 post type-post status-publish format-standard hentry category-linux category-web-app category-acl category-automation category-ops-linux ury"> <header class="entry-header"> <h1 class="entry-title">keepalivedå®ç°æœåŠ¡é«˜å¯ç”¨</h1> </header><!-- .entry-header --> <div class="entry-content"> <div class="begin-single-meta"><span class="my-date"><i class="be be-schedule"></i> 2017å¹´12æœˆ17æ—¥<i class="i-time">09:21:00</i></span><span class="comment"><a href="lx427.html#respond" tppabs="http://clsn.io/clsn/lx427.html#respond" rel="external nofollow"><i class="be be-speechbubble"></i> å‘è¡¨è¯„è®º</a></span><span class="print"><a href="javascript:printme()" target="_self" title="æ‰“å°"><i class="be be-print"></i></a></span><span class="s-hide"><a href="#"><span class="off-side"></span></a></span></div> <div class="single-content"> <div class='favorite-box'><span class='favorite-e'><a class='wpzm-link' href="javascript:if(confirm('http://clsn.io/clsn/lx427.html?wpzmaction=add&postid=427  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn/lx427.html?wpzmaction=add&postid=427'" tppabs="http://clsn.io/clsn/lx427.html?wpzmaction=add&postid=427" rel='nofollow'> æ”¶ <i class="be be-favorite"></i> è—</a></span></div> <h1>ç¬¬1ç«  keepalivedæœåŠ¡è¯´æ˜</h1>
<h2>1.1 keepalivedæ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>ã€€ã€€<span style="text-decoration: underline;">Keepalived</span><span style="text-decoration: underline;">è½¯ä»¶èµ·åˆæ˜¯ä¸“ä¸ºLVS</span><span style="text-decoration: underline;">è´Ÿè½½å‡è¡¡è½¯ä»¶è®¾è®¡çš„ï¼Œç”¨æ¥ç®¡ç†å¹¶ç›‘æ§LVS</span><span style="text-decoration: underline;">é›†ç¾¤ç³»ç»Ÿä¸­å„ä¸ªæœåŠ¡èŠ‚ç‚¹çš„çŠ¶æ€ï¼Œåæ¥åˆåŠ å…¥äº†å¯ä»¥å®ç°é«˜å¯ç”¨çš„VRRP</span><span style="text-decoration: underline;">åŠŸèƒ½ã€‚</span>å› æ­¤ï¼ŒKeepalivedé™¤äº†èƒ½å¤Ÿç®¡ç†LVSè½¯ä»¶å¤–ï¼Œè¿˜å¯ä»¥ä½œä¸ºå…¶ä»–æœåŠ¡ï¼ˆä¾‹å¦‚ï¼šNginxã€Haproxyã€MySQLç­‰ï¼‰çš„é«˜å¯ç”¨è§£å†³æ–¹æ¡ˆè½¯ä»¶ã€‚</p>
<p>ã€€ã€€Keepalivedè½¯ä»¶ä¸»è¦æ˜¯é€šè¿‡VRRPåè®®å®ç°é«˜å¯ç”¨åŠŸèƒ½çš„ã€‚VRRPæ˜¯Virtual Router RedundancyProtocol(è™šæ‹Ÿè·¯ç”±å™¨å†—ä½™åè®®ï¼‰çš„ç¼©å†™ï¼ŒVRRPå‡ºç°çš„ç›®çš„å°±æ˜¯ä¸ºäº†è§£å†³é™æ€è·¯ç”±å•ç‚¹æ•…éšœé—®é¢˜çš„ï¼Œå®ƒèƒ½å¤Ÿä¿è¯å½“ä¸ªåˆ«èŠ‚ç‚¹å®•æœºæ—¶ï¼Œæ•´ä¸ªç½‘ç»œå¯ä»¥ä¸é—´æ–­åœ°è¿è¡Œã€‚</p>
<p>ã€€ã€€<span style="background-color: #ffff00;">æ‰€ä»¥ï¼ŒKeepalived ä¸€æ–¹é¢å…·æœ‰é…ç½®ç®¡ç†LVSçš„åŠŸèƒ½ï¼ŒåŒæ—¶è¿˜å…·æœ‰å¯¹LVSä¸‹é¢èŠ‚ç‚¹è¿›è¡Œå¥åº·æ£€æŸ¥çš„åŠŸèƒ½ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå¯å®ç°ç³»ç»Ÿç½‘ç»œæœåŠ¡çš„é«˜å¯ç”¨åŠŸèƒ½ã€‚</span></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; keepalivedå®˜ç½‘<a href="javascript:if(confirm('http://clsn.io/wp-content/themes/clsn-003/inc/go.php?url=http://www.keepalived.org  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/wp-content/themes/clsn-003/inc/go.php?url=http://www.keepalived.org'" tppabs="http://clsn.io/wp-content/themes/clsn-003/inc/go.php?url=http://www.keepalived.org"  target="_blank">http://www.keepalived.org</a></p>
<h2>1.2 keepalivedæœåŠ¡çš„ä¸‰ä¸ªé‡è¦åŠŸèƒ½</h2>
<p>ã€€ã€€ç®¡ç†LVSè´Ÿè½½å‡è¡¡è½¯ä»¶</p>
<p>ã€€ã€€å®ç°LVSé›†ç¾¤èŠ‚ç‚¹çš„å¥åº·æ£€æŸ¥ä¸­</p>
<p>ã€€ã€€ä½œä¸ºç³»ç»Ÿç½‘ç»œæœåŠ¡çš„é«˜å¯ç”¨æ€§ï¼ˆfailoverï¼‰</p>
<h2>1.3 Keepalivedé«˜å¯ç”¨æ•…éšœåˆ‡æ¢è½¬ç§»åŸç†</h2>
<p>ã€€ã€€Keepalivedé«˜å¯ç”¨æœåŠ¡å¯¹ä¹‹é—´çš„æ•…éšœåˆ‡æ¢è½¬ç§»ï¼Œæ˜¯é€šè¿‡ VRRP (Virtual Router Redundancy Protocol ,è™šæ‹Ÿè·¯ç”±å™¨å†—ä½™åè®®ï¼‰æ¥å®ç°çš„ã€‚</p>
<p>ã€€ã€€åœ¨ KeepalivedæœåŠ¡æ­£å¸¸å·¥ä½œæ—¶ï¼Œä¸» MasterèŠ‚ç‚¹ä¼šä¸æ–­åœ°å‘å¤‡èŠ‚ç‚¹å‘é€ï¼ˆå¤šæ’­çš„æ–¹å¼ï¼‰å¿ƒè·³æ¶ˆæ¯ï¼Œç”¨ä»¥å‘Šè¯‰å¤‡BackupèŠ‚ç‚¹è‡ªå·±è¿˜æ´»çœ‹ï¼Œå½“ä¸» MasterèŠ‚ç‚¹å‘ç”Ÿæ•…éšœæ—¶ï¼Œå°±æ— æ³•å‘é€å¿ƒè·³æ¶ˆæ¯ï¼Œå¤‡èŠ‚ç‚¹ä¹Ÿå°±å› æ­¤æ— æ³•ç»§ç»­æ£€æµ‹åˆ°æ¥è‡ªä¸» MasterèŠ‚ç‚¹çš„å¿ƒè·³äº†ï¼Œäºæ˜¯è°ƒç”¨è‡ªèº«çš„æ¥ç®¡ç¨‹åºï¼Œæ¥ç®¡ä¸»MasterèŠ‚ç‚¹çš„ IPèµ„æºåŠæœåŠ¡ã€‚è€Œå½“ä¸» MasterèŠ‚ç‚¹æ¢å¤æ—¶ï¼Œå¤‡BackupèŠ‚ç‚¹åˆä¼šé‡Šæ”¾ä¸»èŠ‚ç‚¹æ•…éšœæ—¶è‡ªèº«æ¥ç®¡çš„IPèµ„æºåŠæœåŠ¡ï¼Œæ¢å¤åˆ°åŸæ¥çš„å¤‡ç”¨è§’è‰²ã€‚</p>
<p>ã€€ã€€é‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯VRRPå‘¢ï¼Ÿ</p>
<p>ã€€ã€€VRRP ,å…¨ ç§° Virtual Router Redundancy Protocol ,ä¸­æ–‡åä¸ºè™šæ‹Ÿè·¯ç”±å†—ä½™åè®® ï¼ŒVRRPçš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³é™æ€è¸£ç”¶çš„å•ç‚¹æ•…éšœé—®é¢˜ï¼ŒVRRPæ˜¯é€šè¿‡ä¸€ç§ç«é€‰æœºåˆ¶æ¥å°†è·¯ç”±çš„ä»»åŠ¡äº¤ç»™æŸå°VRRPè·¯ç”±å™¨çš„ã€‚</p>
<h2>1.4 keepalived åŸç†</h2>
<h3>1.4.1keepalivedé«˜å¯ç”¨æ¶æ„ç¤ºæ„å›¾</h3>
<p align="center"><img data-original="http://clsn.io/wp-content/uploads/2018/03/1190037-20171217170645561-1428317110.png" src="blank.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/blank.gif" alt="keepalivedå®ç°æœåŠ¡é«˜å¯ç”¨" alt="" /></p>

<h3>1.4.2 æ–‡å­—ï¼Œè¡¨è¿°</h3>
<p>Keepalivedçš„å·¥ä½œåŸç†ï¼š</p>
<p>ã€€ã€€Keepalivedé«˜å¯ç”¨å¯¹ä¹‹é—´æ˜¯é€šè¿‡VRRPé€šä¿¡çš„ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ä» VRRPå¼€å§‹äº†è§£èµ·ï¼š</p>
<p>ã€€ã€€ã€€ã€€1) VRRP,å…¨ç§° Virtual Router Redundancy Protocol,ä¸­æ–‡åä¸ºè™šæ‹Ÿè·¯ç”±å†—ä½™åè®®ï¼ŒVRRPçš„å‡ºç°æ˜¯ä¸ºäº†è§£å†³é™æ€è·¯ç”±çš„å•ç‚¹æ•…éšœã€‚</p>
<p>ã€€ã€€ã€€ã€€2) VRRPæ˜¯é€šè¿‡ä¸€ç§ç«Ÿé€‰åè®®æœºåˆ¶æ¥å°†è·¯ç”±ä»»åŠ¡äº¤ç»™æŸå° VRRPè·¯ç”±å™¨çš„ã€‚</p>
<p>ã€€ã€€ã€€ã€€3) VRRPç”¨ IPå¤šæ’­çš„æ–¹å¼ï¼ˆé»˜è®¤å¤šæ’­åœ°å€ï¼ˆ224.0_0.18))å®ç°é«˜å¯ç”¨å¯¹ä¹‹é—´é€šä¿¡ã€‚</p>
<p>ã€€ã€€ã€€ã€€4) å·¥ä½œæ—¶ä¸»èŠ‚ç‚¹å‘åŒ…ï¼Œå¤‡èŠ‚ç‚¹æ¥åŒ…ï¼Œå½“å¤‡èŠ‚ç‚¹æ¥æ”¶ä¸åˆ°ä¸»èŠ‚ç‚¹å‘çš„æ•°æ®åŒ…çš„æ—¶å€™ï¼Œå°±å¯åŠ¨æ¥ç®¡ç¨‹åºæ¥ç®¡ä¸»èŠ‚ç‚¹çš„å¼€æºã€‚å¤‡èŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªï¼Œé€šè¿‡ä¼˜å…ˆçº§ç«é€‰ï¼Œä½†ä¸€èˆ¬ Keepalivedç³»ç»Ÿè¿ç»´å·¥ä½œä¸­éƒ½æ˜¯ä¸€å¯¹ã€‚</p>
<p>ã€€ã€€ã€€ã€€5) VRRPä½¿ç”¨äº†åŠ å¯†åè®®åŠ å¯†æ•°æ®ï¼Œä½†Keepalivedå®˜æ–¹ç›®å‰è¿˜æ˜¯æ¨èç”¨æ˜æ–‡çš„æ–¹å¼é…ç½®è®¤è¯ç±»å‹å’Œå¯†ç ã€‚</p>
<p>ã€€ã€€ä»‹ç»å®Œ VRRP,æ¥ä¸‹æ¥æˆ‘å†ä»‹ç»ä¸€ä¸‹ KeepalivedæœåŠ¡çš„å·¥ä½œåŸç†ï¼š</p>
<p>ã€€ã€€Keepalivedé«˜å¯ç”¨å¯¹ä¹‹é—´æ˜¯é€šè¿‡ VRRPè¿›è¡Œé€šä¿¡çš„ï¼Œ VRRPæ˜¯é‘è¿‡ç«é€‰æœºåˆ¶æ¥ç¡®å®šä¸»å¤‡çš„ï¼Œä¸»çš„ä¼˜å…ˆçº§é«˜äºå¤‡ï¼Œå› æ­¤ï¼Œå·¥ä½œæ—¶ä¸»ä¼šä¼˜å…ˆè·å¾—æ‰€æœ‰çš„èµ„æºï¼Œå¤‡èŠ‚ç‚¹å¤„äºç­‰å¾…çŠ¶æ€ï¼Œå½“ä¸»æŒ‚äº†çš„æ—¶å€™ï¼Œå¤‡èŠ‚ç‚¹å°±ä¼šæ¥ç®¡ä¸»èŠ‚ç‚¹çš„èµ„æºï¼Œç„¶åé¡¶æ›¿ä¸»èŠ‚ç‚¹å¯¹å¤–æä¾›æœåŠ¡ã€‚</p>
<p>ã€€ã€€åœ¨ KeepalivedæœåŠ¡å¯¹ä¹‹é—´ï¼Œåªæœ‰ä½œä¸ºä¸»çš„æœåŠ¡å™¨ä¼šä¸€ç›´å‘é€ VRRPå¹¿æ’­åŒ…,å‘Šè¯‰å¤‡å®ƒè¿˜æ´»ç€ï¼Œæ­¤æ—¶å¤‡ä¸ä¼šæªå ä¸»ï¼Œå½“ä¸»ä¸å¯ç”¨æ—¶ï¼Œå³å¤‡ç›‘å¬ä¸åˆ°ä¸»å‘é€çš„å¹¿æ’­åŒ…æ—¶ï¼Œå°±ä¼šå¯åŠ¨ç›¸å…³æœåŠ¡æ¥ç®¡èµ„æºï¼Œä¿è¯ä¸šåŠ¡çš„è¿ç»­æ€§.æ¥ç®¡é€Ÿåº¦æœ€å¿«å¯ä»¥å°äº1ç§’ã€‚</p>
<h1>ç¬¬2ç«  keepalivedè½¯ä»¶ä½¿ç”¨</h1>
<h2>2.1 è½¯ä»¶çš„éƒ¨ç½²</h2>
<h3>2.1.1 ç¬¬ä¸€ä¸ªé‡Œç¨‹ç¢‘ keepalivedè½¯ä»¶å®‰è£…</h3>
<div>
<p class="a1">&nbsp;<span class="cnblogs_code"><span style="color: #0000ff;">yum</span> <span style="color: #0000ff;">install</span> keepalived -y</span>&nbsp;</p>
</div>
<div>
<div class="cnblogs_code">
<pre>/etc/<span style="color: #000000;">keepalived
</span>/etc/keepalived/<span style="color: #000000;">keepalived.conf     #keepalivedæœåŠ¡ä¸»é…ç½®æ–‡ä»¶
</span>/etc/rc.d/init.d/<span style="color: #000000;">keepalived         #æœåŠ¡å¯åŠ¨è„šæœ¬
</span>/etc/sysconfig/<span style="color: #000000;">keepalived
</span>/usr/bin/<span style="color: #000000;">genhash
</span>/usr/libexec/<span style="color: #000000;">keepalived
</span>/usr/sbin/keepalived</pre>
</div>
</div>
<p>ç¬¬äºŒä¸ªé‡Œç¨‹ç¢‘ï¼š è¿›è¡Œé»˜è®¤é…ç½®æµ‹è¯•</p>
<h3>2.1.2 é…ç½®æ–‡ä»¶è¯´æ˜</h3>
<p>1-13è¡Œè¡¨ç¤ºå…¨å±€é…ç½®</p>
<div>
<div class="cnblogs_code">
<pre> global_defs {    <span style="color: #008000;">#</span><span style="color: #008000;">å…¨å±€é…ç½®</span>
<span style="color: #000000;">    notification_email {   å®šä¹‰æŠ¥è­¦é‚®ä»¶åœ°å€
      <a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="a6c7c5c7d5d5c3c8e6c0cfd4c3d1c7caca88cac9c5">[email&#160;protected]</a>
      <a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="bddbdcd4d1d2cbd8cffddbd4cfd8cadcd1d193d1d2de">[email&#160;protected]</a>
      <a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="0a7973796b6e6763644a6c63786f7d6b666624666569">[email&#160;protected]</a>
    } 
    notification_email_from <a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="8fcee3eaf7eee1ebfdeaa1cceefcfceae1cfe9e6fdeaf8eee3e3a1e3e0ec">[email&#160;protected]</a>  </span><span style="color: #008000;">#</span><span style="color: #008000;">å®šä¹‰å‘é€é‚®ä»¶çš„åœ°å€</span>
    smtp_server 192.168.200.1   <span style="color: #008000;">#</span><span style="color: #008000;">é‚®ç®±æœåŠ¡å™¨ </span>
    smtp_connect_timeout 30      <span style="color: #008000;">#</span><span style="color: #008000;">å®šä¹‰è¶…æ—¶æ—¶é—´</span>
    router_id LVS_DEVEL        <span style="color: #008000;">#</span><span style="color: #008000;">å®šä¹‰è·¯ç”±æ ‡è¯†ä¿¡æ¯ï¼Œç›¸åŒå±€åŸŸç½‘å”¯ä¸€</span>
 }  </pre>
</div>
</div>
<p>15-30è¡Œ è™šæ‹Ÿipé…ç½® brrp</p>
<div>
<div class="cnblogs_code">
<pre>vrrp_instance VI_1 {   <span style="color: #008000;">#</span><span style="color: #008000;">å®šä¹‰å®ä¾‹</span>
    state MASTER         <span style="color: #008000;">#</span><span style="color: #008000;">çŠ¶æ€å‚æ•° master/backup åªæ˜¯è¯´æ˜</span>
    interface eth0       <span style="color: #008000;">#</span><span style="color: #008000;">è™šIPåœ°å€æ”¾ç½®çš„ç½‘å¡ä½ç½®</span>
    virtual_router_id 51 <span style="color: #008000;">#</span><span style="color: #008000;">åŒä¸€å®¶æ—è¦ä¸€ç›´ï¼ŒåŒä¸€ä¸ªé›†ç¾¤idä¸€è‡´</span>
    priority 100         <span style="color: #008000;">#</span><span style="color: #008000;"> ä¼˜å…ˆçº§å†³å®šæ˜¯ä¸»è¿˜æ˜¯å¤‡    è¶Šå¤§è¶Šä¼˜å…ˆ</span>
    advert_int 1        <span style="color: #008000;">#</span><span style="color: #008000;">ä¸»å¤‡é€šè®¯æ—¶é—´é—´éš”</span>
    authentication {     <span style="color: #008000;">#</span><span style="color: #008000;"> &darr;</span>
        auth_type PASS    <span style="color: #008000;">#</span><span style="color: #008000;">&darr;</span>
        auth_pass 1111    <span style="color: #008000;">#</span><span style="color: #008000;">è®¤è¯</span>
    }                        <span style="color: #008000;">#</span><span style="color: #008000;">&uarr; </span>
    virtual_ipaddress {  <span style="color: #008000;">#</span><span style="color: #008000;">&darr;</span>
        192.168.200.16<span style="color: #000000;">    è®¾å¤‡ä¹‹é—´ä½¿ç”¨çš„è™šæ‹Ÿipåœ°å€
        </span>192.168.200.17
        192.168.200.18<span style="color: #000000;">
    }
}</span></pre>
</div>
</div>
<p>é…ç½®ç®¡ç†LVS</p>
<div>
<p class="a1">ã€€ã€€å…³äº LVS è¯¦æƒ…å‚è€ƒ<a href="javascript:if(confirm('http://clsn.io/wp-content/themes/clsn-003/inc/go.php?url=%20http://www.cnblogs.com/clsn/p/7920637.html  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/wp-content/themes/clsn-003/inc/go.php?url=%20http://www.cnblogs.com/clsn/p/7920637.html#_label7'" tppabs="http://clsn.io/wp-content/themes/clsn-003/inc/go.php?url=%20http://www.cnblogs.com/clsn/p/7920637.html#_label7"  target="_blank"> http://www.cnblogs.com/clsn/p/7920637.html#_label7</a></p>
</div>
<h3>2.1.3 æœ€ç»ˆé…ç½®æ–‡ä»¶</h3>
<p><strong>ä¸»è´Ÿè½½å‡è¡¡æœåŠ¡å™¨é…ç½®</strong></p>
<div>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="1a6875756e5a76782a2b">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> cat  /etc/keepalived/keepalived.conf </span>
! Configuration File <span style="color: #0000ff;">for</span><span style="color: #000000;"> keepalived

global_defs {
   router_id lb01
}

vrrp_instance VI_1 {
    state MASTER
    interface eth0
    virtual_router_id </span>51<span style="color: #000000;">
    priority </span>150<span style="color: #000000;">
    advert_int </span>1<span style="color: #000000;">
    authentication {
        auth_type PASS
        auth_pass </span>1111<span style="color: #000000;">
    }
    virtual_ipaddress {
        </span>10.0.0.3<span style="color: #000000;">
    }
}</span></pre>
</div>
</div>
<p><strong>å¤‡è´Ÿè½½å‡è¡¡æœåŠ¡å™¨é…ç½®</strong></p>
<div>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="b2c0ddddc6f2ded08280">[email&#160;protected]</a> ~]<span style="color: #008000;">#</span><span style="color: #008000;"> cat /etc/keepalived/keepalived.conf </span>
! Configuration File <span style="color: #0000ff;">for</span><span style="color: #000000;"> keepalived

global_defs {
   router_id lb02
}

vrrp_instance VI_1 {
    state BACKUP
    interface eth0
    virtual_router_id </span>51<span style="color: #000000;">
    priority </span>100<span style="color: #000000;">
    advert_int </span>1<span style="color: #000000;">
    authentication {
        auth_type PASS
        auth_pass </span>1111<span style="color: #000000;">
    }
    virtual_ipaddress {
     </span>10.0.0.3<span style="color: #000000;">
    }
}</span></pre>
</div>
</div>
<h3>2.1.4 å¯åŠ¨keepalived</h3>
<div>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="11637e7e65517d732123">[email&#160;protected]</a> ~]<span style="color: #008000;">#</span><span style="color: #008000;"> /etc/init.d/keepalived start</span>
Starting keepalived:                                       [  OK  ]</pre>
</div>
</div>
<h3>2.1.5 ã€è¯´æ˜ã€‘åœ¨è¿›è¡Œè®¿é—®æµ‹è¯•ä¹‹å‰è¦ä¿è¯åç«¯çš„èŠ‚ç‚¹éƒ½èƒ½å¤Ÿå•ç‹¬çš„è®¿é—®ã€‚</h3>
<p>æµ‹è¯•è¿é€šæ€§.&nbsp; &nbsp;&nbsp;åç«¯èŠ‚ç‚¹</p>
<div>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="9ae8f5f5eedaf6f8aaab">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> curl -H host:www.etiantian.org  10.0.0.8</span>
<span style="color: #000000;">web01 www
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f2809d9d86b29e90c2c3">[email&#160;protected]</a> conf]</span><span style="color: #008000;">#</span><span style="color: #008000;"> curl -H host:www.etiantian.org  10.0.0.7</span>
<span style="color: #000000;">web02 www
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d0a2bfbfa490bcb2e0e1">[email&#160;protected]</a> conf]</span><span style="color: #008000;">#</span><span style="color: #008000;"> curl -H host:www.etiantian.org  10.0.0.9</span>
<span style="color: #000000;">web03 www
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d2a0bdbda692beb0e2e3">[email&#160;protected]</a> conf]</span><span style="color: #008000;">#</span><span style="color: #008000;"> curl -H host:bbs.etiantian.org  10.0.0.9</span>
<span style="color: #000000;">web03 bbs
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="14667b7b605478762425">[email&#160;protected]</a> conf]</span><span style="color: #008000;">#</span><span style="color: #008000;"> curl -H host:bbs.etiantian.org  10.0.0.8</span>
<span style="color: #000000;">web01 bbs
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c1b3aeaeb581ada3f1f0">[email&#160;protected]</a> conf]</span><span style="color: #008000;">#</span><span style="color: #008000;"> curl -H host:bbs.etiantian.org  10.0.0.7</span>
web02 bbs</pre>
</div>
</div>
<h3>2.1.6 æŸ¥çœ‹è™šæ‹ŸipçŠ¶æ€</h3>
<div>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="32405d5d46725e500203">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> ip a</span>
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536<span style="color: #000000;"> qdisc noqueue state UNKNOWN 
    link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<span style="color: #000000;">
    inet </span>127.0.0.1/8<span style="color: #000000;"> scope host lo
    inet6 ::</span>1/128<span style="color: #000000;"> scope host 
       valid_lft forever preferred_lft forever
</span>2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP qlen 1000<span style="color: #000000;">
    link</span>/ether 00:0c:29:90<span style="color: #000000;">:7f:0d brd ff:ff:ff:ff:ff:ff
    inet </span>10.0.0.5/24 brd 10.0.0.255 scope <span style="color: #0000ff;">global</span><span style="color: #000000;"> eth0
   <span style="background-color: #ffff00;"> inet </span></span><span style="background-color: #ffff00;">10.0.0.3/24 scope <span style="color: #0000ff;">global</span> secondary eth0:1</span><span style="color: #000000;">
    inet6 fe80::20c:29ff:fe90:7f0d</span>/64<span style="color: #000000;"> scope link 
       valid_lft forever preferred_lft forever
</span>3: eth1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP qlen 1000<span style="color: #000000;">
    link</span>/ether 00:0c:29:90:7f:17<span style="color: #000000;"> brd ff:ff:ff:ff:ff:ff
    inet </span>172.16.1.5/24 brd 172.16.1.255 scope <span style="color: #0000ff;">global</span><span style="color: #000000;"> eth1
    inet6 fe80::20c:29ff:fe90:7f17</span>/64<span style="color: #000000;"> scope link 
       valid_lft forever preferred_lft forever</span></pre>
</div>
</div>
<h3>2.1.7 ã€æ€»ç»“ã€‘é…ç½®æ–‡ä»¶ä¿®æ”¹</h3>
<p>ã€€ã€€Keepalivedä¸»å¤‡é…ç½®æ–‡ä»¶åŒºåˆ«ï¼š</p>
<p>ã€€ã€€ã€€ã€€01. router_id ä¿¡æ¯ä¸ä¸€è‡´</p>
<p>ã€€ã€€ã€€ã€€02. state çŠ¶æ€æè¿°ä¿¡æ¯ä¸ä¸€è‡´</p>
<p>ã€€ã€€ã€€ã€€03. priority ä¸»å¤‡ç«é€‰ä¼˜å…ˆçº§æ•°å€¼ä¸ä¸€è‡´</p>
<h2>2.2 è„‘è£‚</h2>
<p>&nbsp;&nbsp;&nbsp; ã€€ã€€åœ¨é«˜å¯ç”¨ï¼ˆHAï¼‰ç³»ç»Ÿä¸­ï¼Œå½“è”ç³»2ä¸ªèŠ‚ç‚¹çš„&ldquo;å¿ƒè·³çº¿&rdquo;æ–­å¼€æ—¶ï¼Œæœ¬æ¥ä¸ºä¸€æ•´ä½“ã€åŠ¨ä½œåè°ƒçš„HAç³»ç»Ÿï¼Œå°±åˆ†è£‚æˆä¸º2ä¸ªç‹¬ç«‹çš„ä¸ªä½“ã€‚ç”±äºç›¸äº’å¤±å»äº†è”ç³»ï¼Œéƒ½ä»¥ä¸ºæ˜¯å¯¹æ–¹å‡ºäº†æ•…éšœã€‚ä¸¤ä¸ªèŠ‚ç‚¹ä¸Šçš„HAè½¯ä»¶åƒ&ldquo;è£‚è„‘äºº&rdquo;ä¸€æ ·ï¼Œäº‰æŠ¢&ldquo;å…±äº«èµ„æº&rdquo;ã€äº‰èµ·&ldquo;åº”ç”¨æœåŠ¡&rdquo;ï¼Œå°±ä¼šå‘ç”Ÿä¸¥é‡åæœ&mdash;&mdash;æˆ–è€…å…±äº«èµ„æºè¢«ç“œåˆ†ã€2è¾¹&ldquo;æœåŠ¡&rdquo;éƒ½èµ·ä¸æ¥äº†ï¼›æˆ–è€…2è¾¹&ldquo;æœåŠ¡&rdquo;éƒ½èµ·æ¥äº†ï¼Œä½†åŒæ—¶è¯»å†™&ldquo;å…±äº«å­˜å‚¨&rdquo;ï¼Œå¯¼è‡´æ•°æ®æŸåï¼ˆå¸¸è§å¦‚æ•°æ®åº“è½®è¯¢ç€çš„è”æœºæ—¥å¿—å‡ºé”™ï¼‰ã€‚</p>
<p>&nbsp;ã€€ã€€å¯¹ä»˜HAç³»ç»Ÿ&ldquo;è£‚è„‘&rdquo;çš„å¯¹ç­–ï¼Œç›®å‰è¾¾æˆå…±è¯†çš„çš„å¤§æ¦‚æœ‰ä»¥ä¸‹å‡ æ¡ï¼š</p>
<p>ã€€ã€€ã€€ã€€1ï¼‰æ·»åŠ å†—ä½™çš„å¿ƒè·³çº¿ï¼Œä¾‹å¦‚ï¼šåŒçº¿æ¡çº¿ï¼ˆå¿ƒè·³çº¿ä¹ŸHAï¼‰ï¼Œå°½é‡å‡å°‘&ldquo;è£‚è„‘&rdquo;å‘ç”Ÿå‡ ç‡ï¼›</p>
<p>ã€€ã€€ã€€ã€€2ï¼‰å¯ç”¨ç£ç›˜é”ã€‚æ­£åœ¨æœåŠ¡ä¸€æ–¹é”ä½å…±äº«ç£ç›˜ï¼Œ&ldquo;è£‚è„‘&rdquo;å‘ç”Ÿæ—¶ï¼Œè®©å¯¹æ–¹å®Œå…¨&ldquo;æŠ¢ä¸èµ°&rdquo;å…±äº«ç£ç›˜èµ„æºã€‚ä½†ä½¿ç”¨é”ç£ç›˜ä¹Ÿä¼šæœ‰ä¸€ä¸ªä¸å°çš„é—®é¢˜ï¼Œå¦‚æœå ç”¨å…±äº«ç›˜çš„ä¸€æ–¹ä¸ä¸»åŠ¨&ldquo;è§£é”&rdquo;ï¼Œå¦ä¸€æ–¹å°±æ°¸è¿œå¾—ä¸åˆ°å…±äº«ç£ç›˜ã€‚ç°å®ä¸­å‡å¦‚æœåŠ¡èŠ‚ç‚¹çªç„¶æ­»æœºæˆ–å´©æºƒï¼Œå°±ä¸å¯èƒ½æ‰§è¡Œè§£é”å‘½ä»¤ã€‚åå¤‡èŠ‚ç‚¹ä¹Ÿå°±æ¥ç®¡ä¸äº†å…±äº«èµ„æºå’Œåº”ç”¨æœåŠ¡ã€‚äºæ˜¯æœ‰äººåœ¨HAä¸­è®¾è®¡äº†&ldquo;æ™ºèƒ½&rdquo;é”ã€‚å³ï¼šæ­£åœ¨æœåŠ¡çš„ä¸€æ–¹åªåœ¨å‘ç°å¿ƒè·³çº¿å…¨éƒ¨æ–­å¼€ï¼ˆå¯Ÿè§‰ä¸åˆ°å¯¹ç«¯ï¼‰æ—¶æ‰å¯ç”¨ç£ç›˜é”ã€‚å¹³æ—¶å°±ä¸ä¸Šé”äº†ã€‚</p>
<p>ã€€ã€€ã€€ã€€3ï¼‰è®¾ç½®ä»²è£æœºåˆ¶ã€‚ä¾‹å¦‚è®¾ç½®å‚è€ƒIPï¼ˆå¦‚ç½‘å…³IPï¼‰ï¼Œå½“å¿ƒè·³çº¿å®Œå…¨æ–­å¼€æ—¶ï¼Œ2ä¸ªèŠ‚ç‚¹éƒ½å„è‡ªpingä¸€ä¸‹å‚è€ƒIPï¼Œä¸é€šåˆ™è¡¨æ˜æ–­ç‚¹å°±å‡ºåœ¨æœ¬ç«¯ã€‚ä¸ä»…&ldquo;å¿ƒè·³&rdquo;ã€è¿˜å…¼å¯¹å¤–&ldquo;æœåŠ¡&rdquo;çš„æœ¬ç«¯ç½‘ç»œé“¾è·¯æ–­äº†ï¼Œå³ä½¿å¯åŠ¨ï¼ˆæˆ–ç»§ç»­ï¼‰åº”ç”¨æœåŠ¡ä¹Ÿæ²¡æœ‰ç”¨äº†ï¼Œé‚£å°±ä¸»åŠ¨æ”¾å¼ƒç«äº‰ï¼Œè®©èƒ½å¤Ÿpingé€šå‚è€ƒIPçš„ä¸€ç«¯å»èµ·æœåŠ¡ã€‚æ›´ä¿é™©ä¸€äº›ï¼Œpingä¸é€šå‚è€ƒIPçš„ä¸€æ–¹å¹²è„†å°±è‡ªæˆ‘é‡å¯ï¼Œä»¥å½»åº•é‡Šæ”¾æœ‰å¯èƒ½è¿˜å ç”¨ç€çš„é‚£äº›å…±äº«èµ„æºã€‚</p>
<h3>2.2.1 è„‘è£‚äº§ç”Ÿçš„åŸå› </h3>
<p>ã€€ã€€ä¸€èˆ¬æ¥è¯´ï¼Œè£‚è„‘çš„å‘ç”Ÿï¼Œæœ‰ä»¥ä¸‹å‡ ç§åŸå› ï¼š</p>
<p>ã€€ã€€ã€€ã€€? é«˜å¯ç”¨æœåŠ¡å™¨å¯¹ä¹‹é—´å¿ƒè·³çº¿é“¾è·¯å‘ç”Ÿæ•…éšœï¼Œå¯¼è‡´æ— æ³•æ­£å¸¸é€šä¿¡ã€‚</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€å› å¿ƒè·³çº¿åäº†ï¼ˆåŒ…æ‹¬æ–­äº†ï¼Œè€åŒ–ï¼‰ã€‚</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€å› ç½‘å¡åŠç›¸å…³é©±åŠ¨åäº†ï¼Œipé…ç½®åŠå†²çªé—®é¢˜ï¼ˆç½‘å¡ç›´è¿ï¼‰ã€‚</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€å› å¿ƒè·³çº¿é—´è¿æ¥çš„è®¾å¤‡æ•…éšœï¼ˆç½‘å¡åŠäº¤æ¢æœºï¼‰ã€‚</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€å› ä»²è£çš„æœºå™¨å‡ºé—®é¢˜ï¼ˆé‡‡ç”¨ä»²è£çš„æ–¹æ¡ˆï¼‰ã€‚</p>
<p>ã€€ã€€ã€€ã€€?&nbsp;&nbsp;é«˜å¯ç”¨æœåŠ¡å™¨ä¸Šå¼€å¯äº† iptablesé˜²ç«å¢™é˜»æŒ¡äº†å¿ƒè·³æ¶ˆæ¯ä¼ è¾“ã€‚</p>
<p>ã€€ã€€ã€€ã€€?&nbsp;é«˜å¯ç”¨æœåŠ¡å™¨ä¸Šå¿ƒè·³ç½‘å¡åœ°å€ç­‰ä¿¡æ¯é…ç½®ä¸æ­£ç¡®ï¼Œå¯¼è‡´å‘é€å¿ƒè·³å¤±è´¥ã€‚</p>
<p>ã€€ã€€ã€€ã€€?&nbsp;å…¶ä»–æœåŠ¡é…ç½®ä¸å½“ç­‰åŸå› ï¼Œå¦‚å¿ƒè·³æ–¹å¼ä¸åŒï¼Œå¿ƒè·³å¹¿æ’å†²çªã€è½¯ä»¶Bugç­‰ã€‚</p>
<div>
<p class="a">ã€€ã€€ã€€ã€€<span style="background-color: #ffff00;"><strong>æç¤ºï¼š</strong></span> Keepalivedé…ç½®é‡ŒåŒä¸€ VRRPå®ä¾‹å¦‚æœ virtual_router_idä¸¤ç«¯å‚æ•°é…ç½®ä¸ä¸€è‡´ä¹Ÿä¼šå¯¼è‡´è£‚è„‘é—®é¢˜å‘ç”Ÿã€‚</p>
</div>
<p>&nbsp;</p>
<h3>2.2.2 å¸¸è§çš„è§£å†³æ–¹æ¡ˆ</h3>
<p>ã€€ã€€åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ¥é˜²æ­¢è£‚è„‘é—®é¢˜çš„å‘ç”Ÿï¼š</p>
<p>ã€€ã€€? åŒæ—¶ä½¿ç”¨ä¸²è¡Œç”µç¼†å’Œä»¥å¤ªç½‘ç”µç¼†è¿æ¥ï¼ŒåŒæ—¶ç”¨ä¸¤æ¡å¿ƒè·³çº¿è·¯ï¼Œè¿™æ ·ä¸€æ¡çº¿è·¯åäº†ï¼Œå¦ä¸€ä¸ªè¿˜æ˜¯å¥½çš„ï¼Œä¾ç„¶èƒ½ä¼ é€å¿ƒè·³æ¶ˆæ¯ã€‚</p>
<p>ã€€ã€€?&nbsp;å½“æ£€æµ‹åˆ°è£‚è„‘æ—¶å¼ºè¡Œå…³é—­ä¸€ä¸ªå¿ƒè·³èŠ‚ç‚¹ï¼ˆè¿™ä¸ªåŠŸèƒ½éœ€ç‰¹æ®Šè®¾å¤‡æ”¯æŒï¼Œå¦‚Stonithã€feyceï¼‰ã€‚ç›¸å½“äºå¤‡èŠ‚ç‚¹æ¥æ”¶ä¸åˆ°å¿ƒè·³æ¶ˆæ‚£ï¼Œé€šè¿‡å•ç‹¬çš„çº¿è·¯å‘é€å…³æœºå‘½ä»¤å…³é—­ä¸»èŠ‚ç‚¹çš„ç”µæºã€‚</p>
<p>ã€€ã€€?&nbsp; åšå¥½å¯¹è£‚è„‘çš„ç›‘æ§æŠ¥è­¦ï¼ˆå¦‚é‚®ä»¶åŠæ‰‹æœºçŸ­ä¿¡ç­‰æˆ–å€¼ç­ï¼‰.åœ¨é—®é¢˜å‘ç”Ÿæ—¶äººä¸ºç¬¬ä¸€æ—¶é—´ä»‹å…¥ä»²è£ï¼Œé™ä½æŸå¤±ã€‚ä¾‹å¦‚ï¼Œç™¾åº¦çš„ç›‘æ§æŠ¥è­¦çŸ­å€å°±æœ‰ä¸Šè¡Œå’Œä¸‹è¡Œçš„åŒºåˆ«ã€‚æŠ¥è­¦æ¶ˆæ¯å‘é€åˆ°ç®¡ç†å‘˜æ‰‹æœºä¸Šï¼Œç®¡ç†å‘˜å¯ä»¥é€šè¿‡æ‰‹æœºå›å¤å¯¹åº”æ•°å­—æˆ–ç®€å•çš„å­—ç¬¦ä¸²æ“ä½œè¿”å›ç»™æœåŠ¡å™¨.è®©æœåŠ¡å™¨æ ¹æ®æŒ‡ä»¤è‡ªåŠ¨å¤„ç†ç›¸åº”æ•…éšœï¼Œè¿™æ ·è§£å†³æ•…éšœçš„æ—¶é—´æ›´çŸ­.</p>
<p>ã€€ã€€å½“ç„¶ï¼Œåœ¨å®æ–½é«˜å¯ç”¨æ–¹æ¡ˆæ—¶ï¼Œè¦æ ¹æ®ä¸šåŠ¡å®é™…éœ€æ±‚ç¡®å®šæ˜¯å¦èƒ½å®¹å¿è¿™æ ·çš„æŸå¤±ã€‚å¯¹äºä¸€èˆ¬çš„ç½‘ç«™å¸¸è§„ä¸šåŠ¡.è¿™ä¸ªæŸå¤±æ˜¯å¯å®¹å¿çš„ã€‚</p>
<h2>2.3 å¦‚ä½•è¿›è¡Œè„‘è£‚æƒ…å†µç›‘æ§</h2>
<h3>2.3.1 åœ¨ä»€ä¹ˆæœåŠ¡å™¨ä¸Šè¿›è¡Œç›‘æ§ï¼Ÿ</h3>
<p>ã€€ã€€åœ¨å¤‡æœåŠ¡å™¨ä¸Šè¿›è¡Œç›‘æ§ï¼Œå¯ä»¥ä½¿ç”¨zabbixç›‘æ§ï¼Œå‚è€ƒ<a href="javascript:if(confirm('http://clsn.io/wp-content/themes/clsn-003/inc/go.php?url=http://www.cnblogs.com/clsn/p/7885990.html  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/wp-content/themes/clsn-003/inc/go.php?url=http://www.cnblogs.com/clsn/p/7885990.html'" tppabs="http://clsn.io/wp-content/themes/clsn-003/inc/go.php?url=http://www.cnblogs.com/clsn/p/7885990.html"  target="_blank">http://www.cnblogs.com/clsn/p/7885990.html</a></p>
<h3>2.3.2 ç›‘æ§ä»€ä¹ˆä¿¡æ¯ï¼Ÿ</h3>
<p><em>ã€€ã€€å¤‡ä¸Šé¢å‡ºç°vip</em><em>æƒ…å†µï¼š</em></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ã€€ã€€1ï¼‰è„‘è£‚æƒ…å†µå‡ºç°</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ã€€ã€€2ï¼‰æ­£å¸¸ä¸»å¤‡åˆ‡æ¢ä¹Ÿä¼šå‡ºç°</p>
<h3>2.3.3 ç¼–å†™ç›‘æ§è„‘è£‚è„šæœ¬</h3>
<div>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f785989883b79b95c7c5">[email&#160;protected]</a> scripts]<span style="color: #008000;">#</span><span style="color: #008000;"> vim check_keepalived.sh</span><span style="color: #008000;">
#</span><span style="color: #008000;">!/bin/bash</span>

<span style="color: #0000ff;">while</span><span style="color: #000000;"> true
do
</span><span style="color: #0000ff;">if</span> [ `ip a show eth0 |grep 10.0.0.3|wc -l` -<span style="color: #000000;">ne 0 ]
then
    echo </span><span style="color: #800000;">"</span><span style="color: #800000;">keepalived is error!</span><span style="color: #800000;">"</span>
<span style="color: #0000ff;">else</span><span style="color: #000000;">
    echo </span><span style="color: #800000;">"</span><span style="color: #800000;">keepalived is OK !</span><span style="color: #800000;">"</span><span style="color: #000000;">
fi
done</span></pre>
</div>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="background-color: #ffff00;">ç¼–å†™å®Œè„šæœ¬åè¦ç»™è„šæœ¬èµ‹äºˆæ‰§è¡Œæƒé™</span></p>
<h3>2.3.4 æµ‹è¯• ç¡®ä¿ä¸¤å°è´Ÿè½½å‡è¡¡èƒ½å¤Ÿæ­£å¸¸è´Ÿè½½</h3>
<div>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c8baa7a7bc88a4aaf8f9">[email&#160;protected]</a> ~]<span style="color: #008000;">#</span><span style="color: #008000;"> curl -H Host:www.etiantian.org 10.0.0.5</span>
<span style="color: #000000;">web01 www
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f3819c9c87b39f91c3c2">[email&#160;protected]</a> </span>~]<span style="color: #008000;">#</span><span style="color: #008000;"> curl -H Host:www.etiantian.org 10.0.0.6</span>
<span style="color: #000000;">web01 www
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="3745585843775b550706">[email&#160;protected]</a> </span>~]<span style="color: #008000;">#</span><span style="color: #008000;"> curl -H Host:bbs.etiantian.org 10.0.0.6</span>
<span style="color: #000000;">web02 bbs
 [<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="7a0815150e3a16184a4b">[email&#160;protected]</a> </span>~]<span style="color: #008000;">#</span><span style="color: #008000;"> curl -H Host:www.etiantian.org 10.0.0.5</span>
web03 www&nbsp;</pre>
</div>
</div>
<h2>2.4 æ’é”™è¿‡ç¨‹</h2>
<p>ã€€ã€€1ï¼‰åˆ©ç”¨è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼Œåœ¨æœåŠ¡å™¨ä¸Šcurlæ‰€æœ‰çš„èŠ‚ç‚¹ä¿¡æ¯ï¼ˆwebæœåŠ¡å™¨é…ç½®æœ‰é—®é¢˜ï¼‰</p>
<p>ã€€ã€€2ï¼‰curl è´Ÿè½½å‡è¡¡æœåŠ¡å™¨åœ°å€ï¼Œå¯ä»¥å®ç°è´Ÿè½½å‡è¡¡</p>
<p>ã€€ã€€3ï¼‰windowsä¸Šç»‘å®šè™šæ‹ŸIPï¼Œæµè§ˆå™¨ä¸Šè¿›è¡Œæµ‹è¯•</p>
<p><strong>ã€€ã€€ã€€ã€€<span style="background-color: #ffff00;">keepalived</span></strong><span style="background-color: #ffff00;"><strong>æ—¥å¿—æ–‡ä»¶ä½ç½® /var/log/messages</strong></span></p>
<h2>2.5 æ›´æ”¹nginxåå‘ä»£ç†é…ç½® åªç›‘å¬vipåœ°å€</h2>
<p>ä¿®æ”¹nginxç›‘å¬å‚æ•°&nbsp;&nbsp;<span class="cnblogs_code">listen 10.0.0.3:80;</span>&nbsp;</p>
<p>ä¿®æ”¹å†…æ ¸å‚æ•°ï¼Œå®ç°ç›‘å¬æœ¬åœ°ä¸å­˜åœ¨çš„ip</p>
<div>
<div class="cnblogs_code">
<pre>echo <span style="color: #800000;">'</span><span style="color: #800000;">net.ipv4.ip_nonlocal_bind = 1</span><span style="color: #800000;">'</span> >>/etc/<span style="color: #000000;">sysctl.conf
sysctl </span>-<span style="color: #000000;">p

[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f98b96968db9959bc9cb">[email&#160;protected]</a> conf]</span><span style="color: #008000;">#</span><span style="color: #008000;"> cat /proc/sys/net/ipv4/ip_nonlocal_bind</span>
&nbsp;</pre>
</div>
</div>
<h2>2.6 è®©keepalivedç›‘æ§nginx</h2>
<div>
<div class="cnblogs_code">
<pre>ps -ef |grep nginx |grep -v grep |wc -l</pre>
</div>
</div>
<p>ã€€ã€€ç¼–å†™æ‰§è¡Œè„šæœ¬</p>
<div>
<div class="cnblogs_code">
<pre><span style="color: #008000;">#</span><span style="color: #008000;">!/bin/bash</span>

<span style="color: #0000ff;">while</span><span style="color: #000000;"> true
do
</span><span style="color: #0000ff;">if</span> [ `ps -ef |grep nginx |grep -v grep |wc -l` -lt 2<span style="color: #000000;"> ]
then
   </span>/etc/init.d/<span style="color: #000000;">keepalived stop
   exit
fi
done</span></pre>
</div>
</div>
<div>
<p class="a"><strong>æ³¨æ„è„šæœ¬çš„æˆæƒ</strong></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="691b06061d29050b5958">[email&#160;protected]</a> scripts]<span style="color: #008000;">#</span><span style="color: #008000;"> chmod +x check_www.sh</span></pre>
</div>
</div>
<h3>2.6.1 ä½¿ç”¨keepalivedçš„ç›‘æ§è„šæœ¬</h3>
<p>ã€€ã€€<span style="background-color: #00ff00;">è¯´æ˜ æ‰§è¡Œçš„è„šæœ¬åç§°å°½é‡ä¸è¦å’ŒæœåŠ¡åç§°ç›¸åŒæˆ–ç›¸ä¼¼</span></p>
<div>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="82f0ededf6c2eee0b2b3">[email&#160;protected]</a> scripts]<span style="color: #008000;">#</span><span style="color: #008000;"> cat /etc/keepalived/keepalived.conf</span>
! Configuration File <span style="color: #0000ff;">for</span><span style="color: #000000;"> keepalived

global_defs {
   router_id lb01
}

vrrp_script check {     </span><span style="color: #008000;">#</span><span style="color: #008000;">å®šä¹‰è„šæœ¬</span>
   script <span style="color: #800000;">"</span><span style="color: #800000;">&ldquo;/server/scripts/check_web.sh</span><span style="color: #800000;">"</span>  ---<span style="color: #000000;"> è¡¨ç¤ºå°†ä¸€ä¸ªè„šæœ¬ä¿¡æ¯èµ‹å€¼ç»™å˜é‡check_web
   interval </span>2    ---<span style="color: #000000;"> æ‰§è¡Œç›‘æ§è„šæœ¬çš„é—´éš”æ—¶é—´
   weight </span>2  ---<span style="color: #000000;">åˆ©ç”¨æƒé‡å€¼å’Œä¼˜å…ˆçº§è¿›è¡Œè¿ç®—ï¼Œä»è€Œé™ä½ä¸»æœåŠ¡ä¼˜å…ˆçº§ä½¿ä¹‹å˜ä¸ºå¤‡æœåŠ¡å™¨ï¼ˆå»ºè®®å…ˆå¿½ç•¥ï¼‰
}

vrrp_instance VI_1 {
    state MASTER
    interface eth0
    virtual_router_id </span>51<span style="color: #000000;">
    priority </span>150<span style="color: #000000;">
    advert_int </span>1<span style="color: #000000;">
    authentication {
        auth_type PASS
        auth_pass </span>1111<span style="color: #000000;">
    }
    virtual_ipaddress {
        </span>10.0.0.3/24 dev eth0 label eth0:1<span style="color: #000000;">
    }
    track_script {     </span><span style="color: #008000;">#</span><span style="color: #008000;">è°ƒç”¨è„šæœ¬</span>
<span style="color: #000000;">       check
    }
}</span></pre>
</div>
</div>
<h2>2.7 å¤šå®ä¾‹çš„é…ç½®</h2>
<h3>2.7.1 lb01çš„keepalivedé…ç½®æ–‡ä»¶</h3>
<div>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="22504d4d56624e401213">[email&#160;protected]</a> scripts]<span style="color: #008000;">#</span><span style="color: #008000;"> cat  /etc/keepalived/keepalived.conf </span>
! Configuration File <span style="color: #0000ff;">for</span><span style="color: #000000;"> keepalived

global_defs {
   router_id lb01
}

vrrp_script check {
   script </span><span style="color: #800000;">"</span><span style="color: #800000;">/server/scripts/check_www.sh</span><span style="color: #800000;">"</span><span style="color: #000000;">
   interval </span>2<span style="color: #000000;"> 
   weight </span>2<span style="color: #000000;">
}

vrrp_instance VI_1 {
    state MASTER
    interface eth0
    virtual_router_id </span>51<span style="color: #000000;">
    priority </span>150<span style="color: #000000;">
    advert_int </span>1<span style="color: #000000;">
    authentication {
        auth_type PASS
        auth_pass </span>1111<span style="color: #000000;">
    }
    virtual_ipaddress {
        </span>10.0.0.3/24 dev eth0 label eth0:1<span style="color: #000000;">
    }
    track_script {
       check
    }
}
vrrp_instance VI_2 {
    state BACKUP
    interface eth0
    virtual_router_id </span>52<span style="color: #000000;">
    priority </span>100<span style="color: #000000;">
    advert_int </span>1<span style="color: #000000;">
    authentication {
        auth_type PASS
        auth_pass </span>1111<span style="color: #000000;">
    }
    virtual_ipaddress {
        </span>10.0.0.4/24 dev eth0 label eth0:2<span style="color: #000000;">
    }
}</span></pre>
</div>
</div>
<h3>2.7.2 ä¿®æ”¹lb02çš„keepalivedé…ç½®æ–‡ä»¶</h3>
<div>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="32405d5d46725e500200">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> cat /etc/keepalived/keepalived.conf </span>
! Configuration File <span style="color: #0000ff;">for</span><span style="color: #000000;"> keepalived

global_defs {
   router_id lb02
}

vrrp_instance VI_1 {
    state BACKUP
    interface eth0
    virtual_router_id </span>51<span style="color: #000000;">
    priority </span>100<span style="color: #000000;">
    advert_int </span>1<span style="color: #000000;">
    authentication {
        auth_type PASS
        auth_pass </span>1111<span style="color: #000000;">
    }
    virtual_ipaddress {
     </span>10.0.0.3 dev eth0 label eth0:1<span style="color: #000000;">
    }
}
vrrp_instance VI_2 {
    state MASTER
    interface eth0
    virtual_router_id </span>52<span style="color: #000000;">
    priority </span>150<span style="color: #000000;">
    advert_int </span>1<span style="color: #000000;">
    authentication {
        auth_type PASS
        auth_pass </span>1111<span style="color: #000000;">
    }
    virtual_ipaddress {
     </span>10.0.0.4 dev eth0 label eth0:2<span style="color: #000000;">
    }
}</span></pre>
</div>
</div>
<p>ä¿®æ”¹nginxé…ç½®æ–‡ä»¶ï¼Œè®©bbs ä¸wwwåˆ†åˆ«ç›‘å¬ä¸åŒçš„ipåœ°å€</p>
<div>
<div class="cnblogs_code">
<pre>worker_processes  1<span style="color: #000000;">;
events {
    worker_connections  </span>1024<span style="color: #000000;">;
}
http {
    include       mime.types;
    default_type  application</span>/octet-<span style="color: #000000;">stream;
    sendfile        on;
    keepalive_timeout  </span>65<span style="color: #000000;">;                           
    upstream server_pools {
      server </span>10.0.0.7:80<span style="color: #000000;">;
      server </span>10.0.0.8:80<span style="color: #000000;">;
      server </span>10.0.0.9:80<span style="color: #000000;">;
    }
    server {
        listen </span>10.0.0.3:80<span style="color: #000000;">;
        server_name www.etiantian.org;
        location </span>/<span style="color: #000000;"> {
            proxy_pass http:</span>//<span style="color: #000000;">server_pools;
            proxy_set_header Host $host;
            proxy_set_header X</span>-Forwarded-<span style="color: #000000;">For $remote_addr;
        }
    } 
    server {
        listen </span>10.0.0.4:80<span style="color: #000000;">;
        server_name bbs.etiantian.org;
        location </span>/<span style="color: #000000;"> {
            proxy_pass http:</span>//<span style="color: #000000;">server_pools;
            proxy_set_header Host $host;
            proxy_set_header X</span>-Forwarded-<span style="color: #000000;">For $remote_addr;
        }
    } 
}</span></pre>
</div>
</div>
<p>lb01</p>
<div>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="20524f4f54604c421011">[email&#160;protected]</a> scripts]<span style="color: #008000;">#</span><span style="color: #008000;"> netstat -lntup |grep nginx</span>
tcp        0      0 10.0.0.3:80                 0.0.0.0:*                   LISTEN      84907/<span style="color: #000000;">nginx         
tcp        0      0 </span>10.0.0.4:80                 0.0.0.0:*                   LISTEN      84907/nginx         </pre>
</div>
</div>
<p>lb02</p>
<div>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="6614090912260a045654">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> netstat -lntup |grep nginx</span>
tcp        0      0 10.0.0.3:80                 0.0.0.0:*                   LISTEN      12258/<span style="color: #000000;">nginx         
tcp        0      0 </span>10.0.0.4:80                 0.0.0.0:*                   LISTEN      12258/nginx  </pre>
</div>
</div>
<h2 style="text-align: left;">&nbsp;2.8 keepalivedåŒä¸»æ¨¡å¼ç¤ºæ„å›¾&nbsp;</h2>
<p>&nbsp;</p>
<p style="text-align: right;">&nbsp;<strong>æœ¬æ–‡å‡ºè‡ª&ldquo;æƒ¨ç»¿å°‘å¹´&rdquo;ï¼Œæ¬¢è¿è½¬è½½ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼http://blog.nmtui.com</strong></p>
  </div> <div class="s-weixin-one"> <div class="weimg-one"> <img src="clsn_linux.bmp" tppabs="http://clsn.io/wp-content/uploads/2018/09/clsn_linux.bmp" alt="weinxin" /> <div class="weixin-h"><strong>æƒ¨ç»¿å°‘å¹´Linux</strong></div> <div class="weixin-h-w">è¿™æ˜¯æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·æ‰«ä¸€æ‰«</div> <div class="clear"></div> </div></div> <div class="clear"></div><div id="social"> <div class="social-main"> <span class="like"> <a href="javascript:;" data-action="ding" data-id="427" title="ç‚¹èµ" class="dingzan"><i class="be be-thumbs-up-o"></i>èµ <i class="count"> 0</i> </a> </span> <div class="shang-p"> <div class="shang-empty"><span></span></div> <span class="tipso_style" id="tip-p" data-tipso=' <span id="shang"> <span class="shang-main"> <h4><i class="be be-favorite" aria-hidden="true"></i> æ‚¨å¯ä»¥é€‰æ‹©ä¸€ç§æ–¹å¼èµåŠ©æœ¬ç«™</h4> <span class="clear"></span> </span> </span>'> <span class="shang-s"><a title="èµåŠ©æœ¬ç«™">èµ</a></span> </span> </div> <div class="share-sd"> <span class="share-s"><a href="javascript:void(0)" id="share-s" title="åˆ†äº«"><i class="be be-share"></i>åˆ†äº«</a></span> <div id="share"> <ul class="bdsharebuttonbox"> <li><a title="æ›´å¤š" class="bds_more be be-addbox" data-cmd="more" onclick="return false;" href="#"></a></li> <li><a title="åˆ†äº«åˆ°QQç©ºé—´" class="be be-qzone" data-cmd="qzone" onclick="return false;" href="#"></a></li> <li><a title="åˆ†äº«åˆ°æ–°æµªå¾®åš" class="be be-stsina" data-cmd="tsina" onclick="return false;" href="#"></a></li> <li><a title="åˆ†äº«åˆ°è…¾è®¯å¾®åš" class="be be-tqq" data-cmd="tqq" onclick="return false;" href="#"></a></li> <li><a title="åˆ†äº«åˆ°äººäººç½‘" class="be be-renren" data-cmd="renren" onclick="return false;" href="#"></a></li> <li><a title="åˆ†äº«åˆ°å¾®ä¿¡" class="be be-weixin" data-cmd="weixin" onclick="return false;" href="#"></a></li> </ul></div> </div> <div class="clear"></div> </div></div> <footer class="single-footer"> <ul id="fontsize"><li>A+</li></ul><div class="single-cat-tag"><div class="single-cat">æ‰€å±åˆ†ç±»ï¼š<a href="javascript:if(confirm('http://clsn.io/clsn-ops/linux%e8%bf%90%e7%bb%b4/  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn-ops/linux%e8%bf%90%e7%bb%b4/'" tppabs="http://clsn.io/clsn-ops/linux%e8%bf%90%e7%bb%b4/" rel="category tag">Linuxè¿ç»´</a> <a href="index-3.htm" tppabs="http://clsn.io/clsn-ops/ops-linux/web-app/" rel="category tag">Webåº”ç”¨</a> <a href="javascript:if(confirm('http://clsn.io/clsn-ops/ops-linux/acl/  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn-ops/ops-linux/acl/'" tppabs="http://clsn.io/clsn-ops/ops-linux/acl/" rel="category tag">å®‰å…¨</a> <a href="index-5.htm" tppabs="http://clsn.io/clsn-ops/ops-linux/automation/" rel="category tag">è‡ªåŠ¨åŒ–</a> <a href="javascript:if(confirm('http://clsn.io/clsn-ops/ops-linux/  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn-ops/ops-linux/'" tppabs="http://clsn.io/clsn-ops/ops-linux/" rel="category tag">è¿ç»´åŸºæœ¬åŠŸ</a></div></div> </footer><!-- .entry-footer --> <div class="clear"></div> </div><!-- .entry-content --> </article><!-- #post --><div class="single-tag"></div> <div class="authorbio wow fadeInUp" data-wow-delay="0.3s"> <img alt='' src="92aaa21455d7edf078accf7a7b75ee76-s=64&r=g&default=-wp-content-themes-clsn-003-img-avatar-96-latin_c.png" tppabs="https://cn.gravatar.com/avatar/92aaa21455d7edf078accf7a7b75ee76?s=64&r=g&default=%2Fwp-content%2Fthemes%2Fclsn-003%2Fimg%2Favatar%2F96%2Flatin_c.png" class='avatar avatar-64 photo wpfla ' width='64' height='64' /> <ul class="spostinfo"> <li> <li><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬ç«™åŸåˆ›æ–‡ç« ï¼Œäº2017å¹´12æœˆ17æ—¥<i class="i-time">09:21:00</i>ï¼Œç”± <b><a href="index-36.htm" tppabs="http://clsn.io/clsn/lxauthor/clsn/" title="ç”±æƒ¨ç»¿å°‘å¹´å‘å¸ƒ" rel="author">æƒ¨ç»¿å°‘å¹´</a></b> å‘è¡¨ï¼Œå…± 9490 å­—ã€‚</li> <li class="reprinted"><strong>è½¬è½½è¯·æ³¨æ˜ï¼š</strong><a href="lx427.html" tppabs="http://clsn.io/clsn/lx427.html" rel="bookmark" title="æœ¬æ–‡å›ºå®šé“¾æ¥ http://clsn.io/clsn/lx427.html">keepalivedå®ç°æœåŠ¡é«˜å¯ç”¨ | æƒ¨ç»¿å°‘å¹´</a></li> </ul> <div class="clear"></div></div> <div id="related-img" class="wow fadeInUp" data-wow-delay="0.3s"> <div class="r4"> <div class="related-site"> <figure class="related-site-img"> <span class="load"><a href="javascript:if(confirm('http://clsn.io/clsn/lx1086.html  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn/lx1086.html'" tppabs="http://clsn.io/clsn/lx1086.html"><img src="loading.png" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/loading.png" data-original="/wp-content/themes/clsn-003/timthumb.php?src=/wp-content/uploads/2018/09/1190037-20180205204316029-486521233.png&w=280&h=210&a=&zc=1" alt="AWKå¸¸ç”¨æŠ€å·§" /></a></span> </figure> <div class="related-title"><a href="javascript:if(confirm('http://clsn.io/clsn/lx1086.html  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn/lx1086.html'" tppabs="http://clsn.io/clsn/lx1086.html">AWKå¸¸ç”¨æŠ€å·§</a></div> </div> </div> <div class="r4"> <div class="related-site"> <figure class="related-site-img"> <span class="load"><a href="lx1088.html" tppabs="http://clsn.io/clsn/lx1088.html"><img src="loading.png" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/loading.png" data-original="/wp-content/themes/clsn-003/timthumb.php?src=/wp-content/uploads/2018/09/1190037-20180612203730808-1316825229.png&w=280&h=210&a=&zc=1" alt="Webç¼“å­˜çŸ¥è¯†ä½“ç³»" /></a></span> </figure> <div class="related-title"><a href="lx1088.html" tppabs="http://clsn.io/clsn/lx1088.html">Webç¼“å­˜çŸ¥è¯†ä½“ç³»</a></div> </div> </div> <div class="r4"> <div class="related-site"> <figure class="related-site-img"> <span class="load"><a href="lx1090.html" tppabs="http://clsn.io/clsn/lx1090.html"><img src="loading.png" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/loading.png" data-original="/wp-content/themes/clsn-003/timthumb.php?src=/wp-content/uploads/2018/09/1190037-20180604214121023-576776588.png&w=280&h=210&a=&zc=1" alt="ç›‘æ§å‘½ä»¤ä¹‹tsar" /></a></span> </figure> <div class="related-title"><a href="lx1090.html" tppabs="http://clsn.io/clsn/lx1090.html">ç›‘æ§å‘½ä»¤ä¹‹tsar</a></div> </div> </div> <div class="r4"> <div class="related-site"> <figure class="related-site-img"> <span class="load"><a href="javascript:if(confirm('http://clsn.io/clsn/lx1092.html  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn/lx1092.html'" tppabs="http://clsn.io/clsn/lx1092.html"><img src="loading.png" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/loading.png" data-original="/wp-content/themes/clsn-003/img/random/11.jpg" alt="æ—¥å¿—åˆ‡å‰²ä¹‹Logrotate" /></a></span> </figure> <div class="related-title"><a href="javascript:if(confirm('http://clsn.io/clsn/lx1092.html  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn/lx1092.html'" tppabs="http://clsn.io/clsn/lx1092.html">æ—¥å¿—åˆ‡å‰²ä¹‹Logrotate</a></div> </div> </div> <div class="clear"></div></div> <div id="single-widget"> <div class="wow fadeInUp" data-wow-delay="0.3s"> <aside id="feed-2" class="widget feed wow fadeInUp" data-wow-delay="0.3s"><h3 class="widget-title"><span class="s-icon"></span>å…³æ³¨æˆ‘ä»¬</h3><div id="feed_widget"> <div class="feed-rss"> <ul> <li class="weixin"> <span class="tipso_style" id="tip-w-j" data-tipso='<span class="weixin-qr"><img src="clsn_linux.bmp" tppabs="http://clsn.io/wp-content/uploads/2018/09/clsn_linux.bmp" alt="weixin"/></span>'><a title="å¾®ä¿¡"><i class="be be-weixin"></i></a></span> </li> <li class="feed"><a title="è®¢é˜…" href="index-23.htm" tppabs="http://clsn.io/feed/" target="_blank" rel="external nofollow"><i class="be be-rss"></i></a></li> <li class="tsina"><a title="" href="javascript:if(confirm('https://weibo.com/236567300  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ´ËÒ»µØÖ·Ê¹ÓÃÉĞÎ´Ö§³ÖµÄĞ­Òé (ÀıÈç£¬gopher)¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='https://weibo.com/236567300'" tppabs="https://weibo.com/236567300" target="_blank" rel="external nofollow"><i class="be be-stsina"></i></a></li> <li class="tqq"><a title="" href="javascript:if(confirm('https://weibo.com/236567300  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ´ËÒ»µØÖ·Ê¹ÓÃÉĞÎ´Ö§³ÖµÄĞ­Òé (ÀıÈç£¬gopher)¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='https://weibo.com/236567300'" tppabs="https://weibo.com/236567300" target="_blank" rel="external nofollow"><i class="be be-tqq"></i></a></li> </ul> </div></div><div class="clear"></div></aside><aside id="related_post-2" class="widget related_post wow fadeInUp" data-wow-delay="0.3s"><div id="related_post_widget"> <ul> <li><a href="javascript:if(confirm('http://clsn.io/clsn/lx1086.html  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn/lx1086.html'" tppabs="http://clsn.io/clsn/lx1086.html">AWKå¸¸ç”¨æŠ€å·§</a></li> <li><a href="lx1088.html" tppabs="http://clsn.io/clsn/lx1088.html">Webç¼“å­˜çŸ¥è¯†ä½“ç³»</a></li> <li><a href="lx1090.html" tppabs="http://clsn.io/clsn/lx1090.html">ç›‘æ§å‘½ä»¤ä¹‹tsar</a></li> </ul></div><div class="clear"></div></aside> </div> <div class="clear"></div></div> <nav class="nav-single wow fadeInUp" data-wow-delay="0.3s"> <a href="lx429.html" tppabs="http://clsn.io/clsn/lx429.html" rel="prev"><span class="meta-nav"><span class="post-nav"><i class="be be-arrowleft"></i> ä¸Šä¸€ç¯‡</span><br/>Nginxçš„åå‘ä»£ç†ä¸è´Ÿè½½å‡è¡¡</span></a><a href="javascript:if(confirm('http://clsn.io/clsn/lx403.html  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn/lx403.html'" tppabs="http://clsn.io/clsn/lx403.html" rel="next"><span class="meta-nav"><span class="post-nav">ä¸‹ä¸€ç¯‡ <i class="be be-arrowright"></i></span><br/>MySQL-Selectè¯­å¥é«˜çº§åº”ç”¨</span></a> <div class="clear"></div> </nav> <nav class="navigation post-navigation" role="navigation"> <h2 class="screen-reader-text">æ–‡ç« å¯¼èˆª</h2> <div class="nav-links"><div class="nav-previous"><a href="lx429.html" tppabs="http://clsn.io/clsn/lx429.html" rel="prev"><span class="meta-nav-r" aria-hidden="true"><i class="be be-arrowleft"></i></span></a></div><div class="nav-next"><a href="javascript:if(confirm('http://clsn.io/clsn/lx403.html  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn/lx403.html'" tppabs="http://clsn.io/clsn/lx403.html" rel="next"><span class="meta-nav-l" aria-hidden="true"><i class="be be-arrowright"></i></span></a></div></div> </nav> <!-- å¼•ç”¨ --><div class="scroll-comments"></div><div id="comments" class="comments-area"> <div id="respond" class="comment-respond wow fadeInUp" data-wow-delay="0.3s"> <h3 id="reply-title" class="comment-reply-title"><span>å‘è¡¨è¯„è®º</span><small><a rel="nofollow" id="cancel-comment-reply-link" href="lx427.html#respond" tppabs="http://clsn.io/clsn/lx427.html#respond" style="display:none;">å–æ¶ˆå›å¤</a></small></h3> <form action="http://clsn.io/wp-comments-post.php" method="post" id="commentform"> <p class="emoji-box"><script data-cfasync="false" src="email-decode.min.js" tppabs="http://clsn.io/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type="text/javascript">/* <![CDATA[ */ function grin(tag) { var myField; tag = ' ' + tag + ' '; if (document.getElementById('comment') && document.getElementById('comment').type == 'textarea') { myField = document.getElementById('comment'); } else { return false; } if (document.selection) { myField.focus(); sel = document.selection.createRange(); sel.text = tag; myField.focus(); } else if (myField.selectionStart || myField.selectionStart == '0') { var startPos = myField.selectionStart; var endPos = myField.selectionEnd; var cursorPos = endPos; myField.value = myField.value.substring(0, startPos) + tag + myField.value.substring(endPos, myField.value.length); cursorPos += tag.length; myField.focus(); myField.selectionStart = cursorPos; myField.selectionEnd = cursorPos; } else { myField.value += tag; myField.focus(); } }/* ]]> */</script><a href="javascript:grin(':?:')"><img src="icon_question.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_question.gif" alt=":?:" title="ç–‘é—®" /></a><a href="javascript:grin(':razz:')"><img src="icon_razz.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_razz.gif" alt=":razz:" title="è°ƒçš®" /></a><a href="javascript:grin(':sad:')"><img src="icon_sad.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_sad.gif" alt=":sad:" title="éš¾è¿‡" /></a><a href="javascript:grin(':evil:')"><img src="icon_evil.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_evil.gif" alt=":evil:" title="æŠ é¼»" /></a><a href="javascript:grin(':!:')"><img src="icon_exclaim.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_exclaim.gif" alt=":!:" title="å“" /></a><a href="javascript:grin(':smile:')"><img src="icon_smile.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_smile.gif" alt=":smile:" title="å¾®ç¬‘" /></a><a href="javascript:grin(':oops:')"><img src="icon_redface.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_redface.gif" alt=":oops:" title="æ†¨ç¬‘" /></a><a href="javascript:grin(':grin:')"><img src="icon_biggrin.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_biggrin.gif" alt=":grin:" title="åç¬‘" /></a><a href="javascript:grin(':eek:')"><img src="icon_surprised.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_surprised.gif" alt=":eek:" title="æƒŠè®¶" /></a><a href="javascript:grin(':shock:')"><img src="icon_eek.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_eek.gif" alt=":shock:" title="å‘å‘†" /></a><a href="javascript:grin(':???:')"><img src="icon_confused.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_confused.gif" alt=":???:" title="æ’‡å˜´" /></a><a href="javascript:grin(':cool:')"><img src="icon_cool.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_cool.gif" alt=":cool:" title="å¤§å…µ" /></a><a href="javascript:grin(':lol:')"><img src="icon_lol.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_lol.gif" alt=":lol:" title="å·ç¬‘" /></a><a href="javascript:grin(':mad:')"><img src="icon_mad.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_mad.gif" alt=":mad:" title="å’’éª‚" /></a><a href="javascript:grin(':twisted:')"><img src="icon_twisted.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_twisted.gif" alt=":twisted:" title="å‘æ€’" /></a><a href="javascript:grin(':roll:')"><img src="icon_rolleyes.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_rolleyes.gif" alt=":roll:" title="ç™½çœ¼" /></a><a href="javascript:grin(':wink:')"><img src="icon_wink.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_wink.gif" alt=":wink:" title="é¼“æŒ" /></a><a href="javascript:grin(':idea:')"><img src="icon_idea.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_idea.gif" alt=":idea:" title="é…·" /></a><a href="javascript:grin(':arrow:')"><img src="icon_arrow.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_arrow.gif" alt=":arrow:" title="æ“¦æ±—" /></a><a href="javascript:grin(':neutral:')"><img src="icon_neutral.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_neutral.gif" alt=":neutral:" title="äº²äº²" /></a><a href="javascript:grin(':cry:')"><img src="icon_cry.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_cry.gif" alt=":cry:" title="å¤§å“­" /></a><a href="javascript:grin(':mrgreen:')"><img src="icon_mrgreen.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="å‘²ç‰™" /></a><br /></p> <p class="comment-form-comment"><textarea id="comment" name="comment" rows="4" tabindex="1"></textarea></p> <p class="comment-tool"> <a class="tool-img" href='javascript:embedImage();' title="æ’å…¥å›¾ç‰‡"><i class="icon-img"></i><i class="be be-picture"></i></a> <a class="emoji" href="" title="æ’å…¥è¡¨æƒ…"><i class="be be-insertemoticon"></i></a> </p> <div id="comment-author-info"> <p class="comment-form-author"> <label for="author">æ˜µç§°<span class="required">*</span></label> <input type="text" name="author" id="author" class="commenttext" value="" tabindex="2" /> </p> <p class="comment-form-email"> <label for="email">é‚®ç®±<span class="required">*</span></label> <input type="text" name="email" id="email" class="commenttext" value="" tabindex="3" /> </p> <p class="comment-form-url"> <label for="url">ç½‘å€</label> <input type="text" name="url" id="url" class="commenttext" value="" tabindex="4" /> </p> </div> <div class="qaptcha"></div> <div class="clear"></div> <p class="form-submit"> <input id="submit" name="submit" type="submit" tabindex="5" value="æäº¤è¯„è®º"/> <input type='hidden' name='comment_post_ID' value='427' id='comment_post_ID' /><input type='hidden' name='comment_parent' id='comment_parent' value='0' /> </p> <span class="mail-notify"> <input type="checkbox" name="comment_mail_notify" id="comment_mail_notify" class="notify" value="comment_mail_notify" /> <label for="comment_mail_notify"><span>æœ‰å›å¤æ—¶é‚®ä»¶é€šçŸ¥æˆ‘</span></label> </span> </form> </div> </div><!-- #comments --> </main><!-- .site-main --> </div><!-- .content-area --><div id="sidebar" class="widget-area all-sidebar"> <aside id="search-3" class="widget widget_search wow fadeInUp" data-wow-delay="0.3s"><h3 class="widget-title"><span class="title-i"><span class="title-i-t"></span><span class="title-i-b"></span><span class="title-i-b"></span><span class="title-i-t"></span></span>å…¨ç«™æœç´¢</h3><div class="searchbar"> <form method="get" id="searchform" action="http://clsn.io/"> <span class="search-input"> <input type="text" value="" name="s" id="s" placeholder="è¾“å…¥æœç´¢å†…å®¹" required /> <button type="submit" id="searchsubmit"><i class="be be-search"></i></button> </span> </form></div><div class="clear"></div></aside><aside id="random_post-2" class="widget random_post wow fadeInUp" data-wow-delay="0.3s"><h3 class="widget-title"><span class="title-i"><span class="title-i-t"></span><span class="title-i-b"></span><span class="title-i-b"></span><span class="title-i-t"></span></span>çƒ­ç‚¹æ–‡ç« </h3><div id="random_post_widget"> <ul> <li><a href="lx287.html" tppabs="http://clsn.io/clsn/lx287.html" rel="bookmark">MySQL ä¼˜åŒ–å®æ–½æ–¹æ¡ˆ</a></li> <li><a href="lx957.html" tppabs="http://clsn.io/clsn/lx957.html" rel="bookmark">äº¤æ¢æœº è·¯ç”±å™¨ OSI7å±‚æ¨¡å‹</a></li> <li><a href="lx899.html" tppabs="http://clsn.io/clsn/lx899.html" rel="bookmark">NTPæ—¶é—´æœåŠ¡å™¨ æ­å»º</a></li> <li><a href="javascript:if(confirm('http://clsn.io/clsn/lx965.html  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn/lx965.html'" tppabs="http://clsn.io/clsn/lx965.html" rel="bookmark">å®šæ—¶ä»»åŠ¡çš„ä½¿ç”¨-crond</a></li> <li><a href="lx1105.html" tppabs="http://clsn.io/clsn/lx1105.html" rel="bookmark">OpenSUSE æœåŠ¡å™¨ç³»ç»Ÿéƒ¨ç½²</a></li> <li><a href="lx891.html" tppabs="http://clsn.io/clsn/lx891.html" rel="bookmark">FPMå®šåˆ¶RPMåŒ…å®è·µ</a></li> <li><a href="javascript:if(confirm('http://clsn.io/clsn/lx889.html  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn/lx889.html'" tppabs="http://clsn.io/clsn/lx889.html" rel="bookmark">å®šåˆ¶rpmåŒ…-Yumç¯å¢ƒæ­å»º</a></li> <li><a href="javascript:if(confirm('http://clsn.io/clsn/lx993.html  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn/lx993.html'" tppabs="http://clsn.io/clsn/lx993.html" rel="bookmark">Linuxç³»ç»Ÿä¼˜åŒ–</a></li> <li><a href="lx268.html" tppabs="http://clsn.io/clsn/lx268.html" rel="bookmark">MongoDB å…¥é—¨ç¯‡</a></li> <li><a href="javascript:if(confirm('http://clsn.io/clsn/lx996.html  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüÎŞ·¨È¡µÃ£¬»òÖøËüÈ¡»Øºó·ÅÆú£¬»òÊÇÏîÄ¿Í£Ö¹µÄÌ«¿ì¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://clsn.io/clsn/lx996.html'" tppabs="http://clsn.io/clsn/lx996.html" rel="bookmark">æ–‡ä»¶çš„ç®¡ç†</a></li> </ul></div><div class="clear"></div></aside> </div><div class="clear"></div> </div><!-- .site-content --> <div class="clear"></div> <footer id="colophon" class="site-footer" role="contentinfo"> <div class="site-info"> Copyright Â©Â 2018Â <a href="index.htm" tppabs="http://clsn.io/">æƒ¨ç»¿å°‘å¹´</a>Â Â ç‰ˆæƒæ‰€æœ‰ <span class="add-info"> </span> </div><!-- .site-info --> </footer><!-- .site-footer --><div id="login"> <div id="login-tab" class="login-tab-product"> <h2 class="login-tab-hd"> <span class="login-tab-hd-con"><a href="javascript:">ç™»å½•</a></span> <span class="login-tab-hd-con"><a href="javascript:">æ³¨å†Œ</a></span> <span class="login-tab-hd-con"><a href="javascript:">æ‰¾å›å¯†ç </a></span> </h2> <div class="login-tab-bd login-dom-display"> <div class="login-tab-bd-con login-current"> <div id="tab1_login" class="tab_content_login"> <form method="post" action="http://clsn.io/wp-login.php" class="wp-user-form"> <div class="username"> <label for="user_login">ç”¨æˆ·å</label> <input type="text" name="log" value="" size="20" id="user_login" tabindex="11" /> </div> <div class="password"> <label for="user_pass">å¯†ç </label> <input type="password" name="pwd" value="" size="20" id="user_pass" tabindex="12" /> </div> <div class="login-form"></div> <div class="login_fields"> <div class="rememberme"> <label for="rememberme"> <input type="checkbox" name="rememberme" value="forever" checked="checked" id="rememberme" tabindex="13" />è®°ä½æˆ‘çš„ç™»å½•ä¿¡æ¯ </label> </div> <input type="submit" name="user-submit" value="ç™»å½•" tabindex="14" class="user-submit" /> <input type="hidden" name="redirect_to" value="/clsn/lx427.html" /> <input type="hidden" name="user-cookie" value="1" /> </div> </form> </div> </div> <div class="login-tab-bd-con"> <div id="tab2_login" class="tab_content_login"> <form method="post" action="http://clsn.io/wp-login.php?action=register" class="wp-user-form"> <div class="username"> <label for="user_login">ç”¨æˆ·å</label> <input type="text" name="user_login" value="" size="20" id="user_login" tabindex="101" /> </div> <div class="password"> <label for="user_email">ç”µå­é‚®ä»¶åœ°å€</label> <input type="text" name="user_email" value="" size="25" id="user_email" tabindex="102" /> </div> <div class="login_fields"> <input type="submit" name="user-submit" value="æ³¨å†Œ" class="user-submit" tabindex="103" /> <input type="hidden" name="redirect_to" value="/clsn/lx427.html?register=true" /> <input type="hidden" name="user-cookie" value="1" /> </div> </form> </div> </div> <div class="login-tab-bd-con"> <div id="tab3_login" class="tab_content_login"> <p class="message">è¾“å…¥ç”¨æˆ·åæˆ–ç”µå­é‚®ç®±åœ°å€ï¼Œæ‚¨ä¼šæ”¶åˆ°ä¸€å°æ–°å¯†ç é“¾æ¥çš„ç”µå­é‚®ä»¶ã€‚</p> <form method="post" action="http://clsn.io/wp-login.php?action=lostpassword" class="wp-user-form"> <div class="username"> <label for="user_login" class="hide">ç”¨æˆ·åæˆ–ç”µå­é‚®ä»¶åœ°å€</label> <input type="text" name="user_login" value="" size="20" id="user_login" tabindex="1001" /> </div> <div class="login_fields"> <div class="login-form"></div> <input type="submit" name="user-submit" value="è·å–æ–°å¯†ç " class="user-submit" tabindex="1002" /> <input type="hidden" name="redirect_to" value="/clsn/lx427.html?reset=true" /> <input type="hidden" name="user-cookie" value="1" /> </div> </form> </div> </div> </div> </div> </div><ul id="scroll"> <li class="log log-no"><a class="log-button" title="æ–‡ç« ç›®å½•"><i class="be be-menu"></i></a><div class="log-prompt"><div class="log-arrow">æ–‡ç« ç›®å½•</div></div></li> <li><a class="scroll-home" href="index.htm" tppabs="http://clsn.io/" title="é¦–é¡µ" rel="home"><i class="be be-home"></i></a></li> <li><a class="scroll-h" title="è¿”å›é¡¶éƒ¨"><i class="be be-arrowup"></i></a></li> <li><a class="scroll-c" title="è¯„è®º"><i class="be be-speechbubble"></i></a></li> <li><a class="scroll-b" title="è½¬åˆ°åº•éƒ¨"><i class="be be-arrowdown"></i></a></li> <li class="qr-site"><a href="javascript:void(0)" class="qr" title="æœ¬é¡µäºŒç»´ç "><i class="be be-qr-code"></i><span class="qr-img"><span id="output"><img class="alignnone" src="Frog-2-1.png" tppabs="http://clsn.io/wp-content/uploads/2018/09/Frog-2-1.png" alt="icon"/></span><span class="arrow arrow-z"><i class="be be-playarrow"></i></span><span class="arrow arrow-y"><i class="be be-playarrow"></i></span></span></a></li> <script type="text/javascript">$(document).ready(function(){if(!+[1,]){present="table";} else {present="canvas";}$('#output').qrcode({render:present,text:window.location.href,width:"150",height:"150"});});</script> </ul> <script src="wb.js" tppabs="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script> <html xmlns:wb="http://open.weibo.com/wb"></div><!-- .site --><script type="text/javascript">/* é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆ */var a_idx = 0;jQuery(document).ready(function($) { $("body").click(function(e) {//var a = new Array("å¯Œå¼º", "æ°‘ä¸»", "æ–‡æ˜", "å’Œè°", "è‡ªç”±", "å¹³ç­‰", "å…¬æ­£" ,"æ³•æ²»", "çˆ±å›½", "æ•¬ä¸š", "è¯šä¿¡", "å‹å–„");var a = new Array("clsn", "æƒ¨ç»¿å°‘å¹´", "CLSN", "clsn.io", "linux", "", "å…¬æ­£");var $i = $("<span/>").text(a[a_idx]); a_idx = (a_idx + 1) % a.length;var x = e.pageX, y = e.pageY; $i.css({"z-index": 999999999999999999999999999999999999999999999999999999999999999999999,"top": y - 20,"left": x,"position": "absolute","font-weight": "bold","color": "#ff6651" }); $("body").append($i); $i.animate({"top": y - 180,"opacity": 0 }, 1500,function() { $i.remove(); }); });});</script><script type="text/javascript" src="jquery-ui.min.js" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/jquery-ui.min.js"></script><script type="text/javascript" src="qaptcha.jquery.js" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/qaptcha.jquery.js"></script><script type="text/javascript">var QaptchaJqueryPage="/wp-content/themes/clsn-003/inc/qaptcha.jquery.php"</script><script type="text/javascript">$(document).ready(function(){$('.qaptcha').QapTcha();});</script><script type='text/javascript'>/* <![CDATA[ */var imp_data = {"ajaxurl":"http:\/\/clsn.io\/wp-admin\/admin-ajax.php","_wpnonce":"848a4b7a78"};/* ]]> */</script><script type='text/javascript' src="import.js-ver=4.9.8" tppabs="http://clsn.io/wp-content/plugins/cnblogs2wp/js/import.js?ver=4.9.8"></script><script type='text/javascript' src="slides.js-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/slides.js?ver=2017.07.26"></script><script type='text/javascript' src="jquery.qrcode.min.js-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/jquery.qrcode.min.js?ver=2017.07.26"></script><script type='text/javascript' src="sticky.js-ver=1.6.0" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/sticky.js?ver=1.6.0"></script><script type='text/javascript' src="jquery-ias.js-ver=2.2.1" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/jquery-ias.js?ver=2.2.1"></script><script type='text/javascript' src="jquery.lazyload.js-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/jquery.lazyload.js?ver=2017.07.26"></script><script type='text/javascript' src="tipso.js-ver=1.0.1" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/tipso.js?ver=1.0.1"></script><script type='text/javascript'>/* <![CDATA[ */var wpl_ajax_url = "\/wp-content\/themes\/clsn-003\/inc\/admin-ajax.php";/* ]]> */</script><script type='text/javascript' src="script.js-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/script.js?ver=2017.07.26"></script><script type='text/javascript' src="flexisel.js-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/flexisel.js?ver=2017.07.26"></script><script type='text/javascript' src="fancybox.js-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/fancybox.js?ver=2017.07.26"></script><script type='text/javascript' src="comments-ajax-qt.js-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/comments-ajax-qt.js?ver=2017.07.26"></script><script type='text/javascript' src="superfish.js-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/superfish.js?ver=2017.07.26"></script><script type='text/javascript' src="bd-share.js-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/bd-share.js?ver=2017.07.26"></script><script type='text/javascript' src="wpzm.js-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/wpzm.js?ver=2017.07.26"></script><script type="text/javascript">var ias=$.ias({container:"#comments",item:".comment-list",pagination:".scroll-links",next:".scroll-links .nav-previous a",});ias.extension(new IASTriggerExtension({text:'<i class="be be-circledown"></i>æ›´å¤š',offset: 0,}));ias.extension(new IASSpinnerExtension());ias.extension(new IASNoneLeftExtension({text:'å·²æ˜¯æœ€å',}));ias.on('rendered',function(items){$("img").lazyload({effect: "fadeIn",failure_limit: 10});});</script></body></html>