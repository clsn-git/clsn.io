<html><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="Cache-Control" content="no-transform" /><meta http-equiv="Cache-Control" content="no-siteapp" /><title>nginx服务企业应用 | 惨绿少年</title><meta name="description" content="* PHP ( FastCGI ):大中小型网站都会使用，动态网页语言PHP程序的解析容器。它可配合Apache解析动态程序，不过，这里的PHP不是FastCGI守护进程横式，而是mod_php5.so ( module）也可配合Nginx解析动态程序，此时的PHP常用FastCGI守护进程模式提供服务。* Tomcat :中小企业动态Web服务主流，互联网Java容器主流（如jsp、do ）* Resin :大型动态Web服务主流" /><meta name="keywords" content="" /><link rel="shortcut icon" href="Frog-2.png" tppabs="http://clsn.io/wp-content/uploads/2018/09/Frog-2.png"><link rel="apple-touch-icon" sizes="114x114" href="Frog-2.png" tppabs="http://clsn.io/wp-content/uploads/2018/09/Frog-2.png" /><link rel="profile" href="11" tppabs="http://gmpg.org/xfn/11"><link rel="pingback" href="xmlrpc.php" tppabs="http://clsn.io/xmlrpc.php"><!--[if lt IE 9]><script src="/wp-content/themes/clsn-003/js/html5.js"></script><script src="/wp-content/themes/clsn-003/js/css3-mediaqueries.js"></script><![endif]--><link rel='stylesheet' id='begin-style-css' href="style.css-ver=5.2" tppabs="http://clsn.io/wp-content/themes/clsn-003/style.css?ver=5.2" type='text/css' media='all' /><link rel='stylesheet' id='fonts-css' href="fonts.css-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/css/fonts/fonts.css?ver=2017.07.26" type='text/css' media='all' /><link rel='stylesheet' id='highlight-css' href="highlight.css-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/css/highlight.css?ver=2017.07.26" type='text/css' media='all' /><script type='text/javascript' src="jquery.min.js-ver=1.10.1" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/jquery.min.js?ver=1.10.1"></script><link rel="canonical" href="lx892.html" tppabs="http://clsn.io/clsn/lx892.html" /><link rel="icon" href="Frog-2.png" tppabs="http://clsn.io/wp-content/uploads/2018/09/Frog-2.png" sizes="32x32" /><link rel="icon" href="Frog-2.png" tppabs="http://clsn.io/wp-content/uploads/2018/09/Frog-2.png" sizes="192x192" /><link rel="apple-touch-icon-precomposed" href="Frog-2.png" tppabs="http://clsn.io/wp-content/uploads/2018/09/Frog-2.png" /><meta name="msapplication-TileImage" content="/wp-content/uploads/2018/09/Frog-2.png" /></head><body class="post-template-default single single-post postid-892 single-format-standard"><div id="page" class="hfeed site"> <header id="masthead" class="site-header"> <div id="header-main" class="header-main"> <nav id="top-header"> <div class="top-nav"> <div class="menu-%e8%81%94%e7%b3%bb%e6%96%b9%e5%bc%8f-container"><ul id="menu-%e8%81%94%e7%b3%bb%e6%96%b9%e5%bc%8f" class="top-menu"><li id="menu-item-1268" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1268"><a href="index.htm" tppabs="http://clsn.io/">博客地址</a></li><li id="menu-item-1269" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1269"><a href="javascript:if(confirm('https://shang.qq.com/wpa/qunwpa?idkey=20c5455d6aaf8df9722be043588a9adda7cd9a18b6563744e4143d736559d946  \n\nļδ Teleport Pro ȡأΪ һַʹδֵ֧Э (磬gopher)  \n\nҪӷϴ'))window.location='https://shang.qq.com/wpa/qunwpa?idkey=20c5455d6aaf8df9722be043588a9adda7cd9a18b6563744e4143d736559d946'" tppabs="https://shang.qq.com/wpa/qunwpa?idkey=20c5455d6aaf8df9722be043588a9adda7cd9a18b6563744e4143d736559d946">Linux老司机</a></li><li id="menu-item-1270" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1270"><a href="javascript:if(confirm('https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&  \n\nļδ Teleport Pro ȡأΪ һַʹδֵ֧Э (磬gopher)  \n\nҪӷϴ'))window.location='https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&#038;email=clsn@nmtui.com'" tppabs="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&#038;email=clsn@nmtui.com">给我发邮件</a></li></ul></div> </div> </nav><!-- #top-header --> <div id="menu-box"> <div id="top-menu"> <span class="nav-search"></span> <div class="logo-site"> <p class="site-title"> <a href="index.htm" tppabs="http://clsn.io/"><img src="1-1.png" tppabs="http://clsn.io/wp-content/uploads/2018/09/1-1.png" title="惨绿少年" alt="惨绿少年" rel="home" /><span class="site-name">惨绿少年</span></a> </p> </div><!-- .logo-site --> <div id="site-nav-wrap"> <div id="sidr-close"><a href="#sidr-close" class="toggle-sidr-close">×</a></div> <div id="sidr-menu"><div class="toggle-sidr-menu">MENU</a></div></div> <nav id="site-nav" class="main-nav"> <a href="#sidr-main" id="navigation-toggle" class="bars"><i class="be be-menu"></i></a> <div class="menu-%e6%83%a8%e7%bb%bf%e5%b0%91%e5%b9%b4-container"><ul id="menu-%e6%83%a8%e7%bb%bf%e5%b0%91%e5%b9%b4" class="down-menu nav-menu"><li id="menu-item-1053" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-has-children menu-item-1053"><a href="javascript:if(confirm('http://clsn.io/clsn-ops/ops-linux/  \n\nļδ Teleport Pro ȡأΪ ޷ȡãȡغĿֹ̫ͣ졣  \n\nҪӷϴ'))window.location='http://clsn.io/clsn-ops/ops-linux/'" tppabs="http://clsn.io/clsn-ops/ops-linux/">运维基本功</a><ul class="sub-menu"> <li id="menu-item-1054" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1054"><a href="javascript:if(confirm('http://clsn.io/clsn-ops/ops-linux/dev-shell/  \n\nļδ Teleport Pro ȡأΪ ޷ȡãȡغĿֹ̫ͣ졣  \n\nҪӷϴ'))window.location='http://clsn.io/clsn-ops/ops-linux/dev-shell/'" tppabs="http://clsn.io/clsn-ops/ops-linux/dev-shell/">Shell编程</a></li> <li id="menu-item-1055" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1055"><a href="index-3.htm" tppabs="http://clsn.io/clsn-ops/ops-linux/web-app/">Web应用</a></li> <li id="menu-item-1056" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1056"><a href="index-4.htm" tppabs="http://clsn.io/clsn-ops/ops-linux/monitor/">监控服务</a></li> <li id="menu-item-1057" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1057"><a href="index-5.htm" tppabs="http://clsn.io/clsn-ops/ops-linux/automation/">自动化</a></li> <li id="menu-item-1058" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1058"><a href="index-6.htm" tppabs="http://clsn.io/clsn-ops/ops-linux/storage/">存储</a></li> <li id="menu-item-1059" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1059"><a href="javascript:if(confirm('http://clsn.io/clsn-ops/ops-linux/acl/  \n\nļδ Teleport Pro ȡأΪ ޷ȡãȡغĿֹ̫ͣ졣  \n\nҪӷϴ'))window.location='http://clsn.io/clsn-ops/ops-linux/acl/'" tppabs="http://clsn.io/clsn-ops/ops-linux/acl/">安全</a></li></ul></li><li id="menu-item-1044" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-1044"><a href="index-8.htm" tppabs="http://clsn.io/clsn-ops/cloud/">云计算</a><ul class="sub-menu"> <li id="menu-item-1046" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1046"><a href="javascript:if(confirm('http://clsn.io/clsn-ops/cloud/virt/  \n\nļδ Teleport Pro ȡأΪ ޷ȡãȡغĿֹ̫ͣ졣  \n\nҪӷϴ'))window.location='http://clsn.io/clsn-ops/cloud/virt/'" tppabs="http://clsn.io/clsn-ops/cloud/virt/">虚拟化</a></li> <li id="menu-item-1045" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1045"><a href="javascript:if(confirm('http://clsn.io/clsn-ops/cloud/openstack/  \n\nļδ Teleport Pro ȡأΪ ޷ȡãȡغĿֹ̫ͣ졣  \n\nҪӷϴ'))window.location='http://clsn.io/clsn-ops/cloud/openstack/'" tppabs="http://clsn.io/clsn-ops/cloud/openstack/">OpenStack</a></li></ul></li><li id="menu-item-1048" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-1048"><a href="index-11.htm" tppabs="http://clsn.io/clsn-ops/databases/">数据库</a><ul class="sub-menu"> <li id="menu-item-1049" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1049"><a href="javascript:if(confirm('http://clsn.io/clsn-ops/databases/mysql/  \n\nļδ Teleport Pro ȡأΪ ޷ȡãȡغĿֹ̫ͣ졣  \n\nҪӷϴ'))window.location='http://clsn.io/clsn-ops/databases/mysql/'" tppabs="http://clsn.io/clsn-ops/databases/mysql/">MySQL</a></li> <li id="menu-item-1050" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1050"><a href="index-13.htm" tppabs="http://clsn.io/clsn-ops/databases/nosql/">NoSQL</a></li></ul></li><li id="menu-item-1052" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1052"><a href="index-14.htm" tppabs="http://clsn.io/clsn-ops/network/">网络技术</a></li><li id="menu-item-1051" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1051"><a href="index-15.htm" tppabs="http://clsn.io/clsn-ops/play-linux/">玩转Linux</a></li><li id="menu-item-1047" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1047"><a href="index-16.htm" tppabs="http://clsn.io/clsn-ops/dev-ops/">敏捷开发</a></li><li id="menu-item-1258" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1258"><a href="contribute-page.htm" tppabs="http://clsn.io/contribute-page">投稿</a></li></ul></div> </nav><!-- #site-nav --> </div><!-- #site-nav-wrap --> <div class="clear"></div> </div><!-- #top-menu --> </div><!-- #menu-box --> </div><!-- #menu-box --></header><!-- #masthead --><div id="search-main"> <div class="searchbar"> <form method="get" id="searchform" action="http://clsn.io/"> <span class="search-input"> <input type="text" value="" name="s" id="s" placeholder="输入搜索内容" required /> <button type="submit" id="searchsubmit"><i class="be be-search"></i></button> </span> </form></div> <div class="clear"></div></div> <nav class="breadcrumb"> <a class="crumbs" href="index.htm" tppabs="http://clsn.io/"><i class="be be-home"></i>首页</a><i class="be be-arrowright"></i><a href="javascript:if(confirm('http://clsn.io/clsn-ops/linux%e8%bf%90%e7%bb%b4/  \n\nļδ Teleport Pro ȡأΪ ޷ȡãȡغĿֹ̫ͣ졣  \n\nҪӷϴ'))window.location='http://clsn.io/clsn-ops/linux%e8%bf%90%e7%bb%b4/'" tppabs="http://clsn.io/clsn-ops/linux%e8%bf%90%e7%bb%b4/" rel="category tag">Linux运维</a><i class="be be-arrowright"></i><a href="javascript:if(confirm('http://clsn.io/clsn-ops/ops-linux/  \n\nļδ Teleport Pro ȡأΪ ޷ȡãȡغĿֹ̫ͣ졣  \n\nҪӷϴ'))window.location='http://clsn.io/clsn-ops/ops-linux/'" tppabs="http://clsn.io/clsn-ops/ops-linux/">运维基本功</a><i class="be be-arrowright"></i><a href="index-3.htm" tppabs="http://clsn.io/clsn-ops/ops-linux/web-app/" rel="category tag">Web应用</a><i class="be be-arrowright"></i><a href="javascript:if(confirm('http://clsn.io/clsn-ops/ops-linux/  \n\nļδ Teleport Pro ȡأΪ ޷ȡãȡغĿֹ̫ͣ졣  \n\nҪӷϴ'))window.location='http://clsn.io/clsn-ops/ops-linux/'" tppabs="http://clsn.io/clsn-ops/ops-linux/" rel="category tag">运维基本功</a><i class="be be-arrowright"></i>nginx服务企业应用 </nav> <div id="content" class="site-content"> <div id="primary" class="content-area"> <main id="main" class="site-main" role="main"> <article id="post-892" class="post-892 post type-post status-publish format-standard hentry category-linux category-web-app category-ops-linux ury"> <header class="entry-header"> <h1 class="entry-title">nginx服务企业应用</h1> </header><!-- .entry-header --> <div class="entry-content"> <div class="begin-single-meta"><span class="my-date"><i class="be be-schedule"></i> 2017年10月29日<i class="i-time">09:55:00</i></span><span class="comment"><a href="lx892.html#respond" tppabs="http://clsn.io/clsn/lx892.html#respond" rel="external nofollow"><i class="be be-speechbubble"></i> 发表评论</a></span><span class="print"><a href="javascript:printme()" target="_self" title="打印"><i class="be be-print"></i></a></span><span class="s-hide"><a href="#"><span class="off-side"></span></a></span></div> <div class="single-content"> <div class='favorite-box'><span class='favorite-e'><a class='wpzm-link' href="javascript:if(confirm('http://clsn.io/clsn/lx892.html?wpzmaction=add&postid=892  \n\nļδ Teleport Pro ȡأΪ ޷ȡãȡغĿֹ̫ͣ졣  \n\nҪӷϴ'))window.location='http://clsn.io/clsn/lx892.html?wpzmaction=add&postid=892'" tppabs="http://clsn.io/clsn/lx892.html?wpzmaction=add&postid=892" rel='nofollow'> 收 <i class="be be-favorite"></i> 藏</a></span></div> <h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496797994"></a><a name="_Toc496384583"></a><!--[if !supportLists]--><span lang="EN-US">1.1 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">常用来提供<span style="text-decoration: underline;"><span style="background: yellow; mso-highlight: yellow;">静态服务</span></span>的软件</span></h2>
<p class="MsoListParagraph" style="margin-left: 28.1pt; text-indent: -21.0pt; mso-list: l7 level1 lfo10;"><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US"><span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp;&nbsp;</span></span><!--[endif]--><span lang="EN-US">Apache :</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">这是中小型</span><span lang="EN-US">Web</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务的主流，</span><span lang="EN-US">Web</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务器中的老大哥，</span></p>
<p class="MsoListParagraph" style="margin-left: 28.1pt; text-indent: -21.0pt; mso-list: l7 level1 lfo10;"><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US"><span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp;&nbsp;</span></span><!--[endif]--><span lang="EN-US">Nginx :</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">大型网站</span><span lang="EN-US">Web</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务的主流，曾经</span><span lang="EN-US">Web</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务器中的初生牛犊，现已长大。</span></p>
<p class="MsoListParagraph" style="margin-left: 28.1pt; text-indent: -21.0pt; mso-list: l7 level1 lfo10;"><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US"><span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp;&nbsp;</span></span><!--[endif]--><span lang="EN-US">Nginx </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的分支</span><span lang="EN-US"> Tengine ( http://tengine.taobao.org/)</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">目前也在飞速发展&bull;</span></p>
<p class="MsoListParagraph" style="margin-left: 28.1pt; text-indent: -21.0pt; mso-list: l7 level1 lfo10;"><span lang="EN-US">Lighttpd :</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">这是一个不溫不火的优秀</span><span lang="EN-US"> Web</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件，社区不活跃，静态解析效率很高</span><span lang="EN-US">.</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">在</span><span lang="EN-US"> Nginx </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">流行前，它是大并发静态业务的首选，国内百度贴吧、豆瓣等众多网站都有</span><span lang="EN-US">Lighttpd</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">奋斗的身彩</span><span lang="EN-US">"&nbsp;&nbsp; </span></p>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496797995"></a><a name="_Toc496384584"></a><!--[if !supportLists]--><span lang="EN-US">1.2 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">常用来提供<span style="background: yellow; mso-highlight: yellow;">动态服务</span>的软件</span></h2>
<blockquote>
<p>* PHP ( FastCGI ):大中小型网站都会使用，动态网页语言PHP程序的解析容器。它可配合Apache解析动态程序，不过，这里的PHP不是FastCGI守护进程横式，而是mod_php5.so ( module）也可配合Nginx解析动态程序，此时的PHP常用FastCGI守护进程模式提供服务。<br />*  Tomcat :中小企业动态Web服务主流，互联网Java容器主流（如jsp、do ）<br />*  Resin :大型动态Web服务主流，互联网Java容器主流（如jsp、do ）<br />*  IIS ( Internet information services ):微软 windows 下的 Web 服务软件（如 asp、aspx ）</p>
</blockquote>
<h1><a name="_Toc496797996"></a><!--[if !supportLists]--><span lang="EN-US">第2章 </span><!--[endif]--><span lang="EN-US">nginx </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件</span></h1>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496797997"></a><a name="_Toc496384586"></a><!--[if !supportLists]--><span lang="EN-US">2.1 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件介绍</span></h2>
<p class="MsoNormal" style="text-indent: 21.0pt;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">如果你听说或使用过</span><span lang="EN-US"> Apache</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件，那么很快就会熟悉</span><span lang="EN-US"> Nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件，与</span><span lang="EN-US"> Apache</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件类似，</span><span lang="EN-US"> Nginx ( </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">&ldquo;</span><span lang="EN-US">engme x")</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">是一个开源的，支持高性能、高并发的</span><span lang="EN-US"> WWW</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务器和代理服务软件。它是由俄罗斯人</span><span lang="EN-US"> Igor Sysoev</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">开发的，最初被应用在勘罗斯的大型网站</span><span lang="EN-US"> www.rambler.ru </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">上</span><span lang="EN-US">,</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">后来作者将源代码以类</span><span lang="EN-US">BSD</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">许可证的形式开源出来供全球使用。</span></p>
<p class="MsoNormal" style="text-indent: 21.0pt;"><span lang="EN-US">Nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">因具有高并发（特别是静态资源）占用系统资源少等特性，且功能丰富而逐渐流行起来。</span></p>
<p class="MsoNormal" style="text-indent: 21.0pt;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">在功能应用发面，</span><span lang="EN-US">Nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">不但是一个优秀的</span><span lang="EN-US">Web</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务软件，还具有反向代理负载均衡功能和缓存服务功能。在反向代理负载均衡功能方面，它类似于大名鼎鼎的</span><span lang="EN-US">LVS</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">负载均衡及</span><span lang="EN-US">Haproxy</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">等专业代理软件，但是</span><span lang="EN-US">Nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">部署起来更为简单、方便；在缓存服务功能方面，它又类似于</span><span lang="EN-US">Squid</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">等专业的缓存服务软件。</span></p>
<p class="MsoNormal" style="text-indent: 21.0pt;"><span lang="EN-US">Nginx </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">可以运行在</span><span lang="EN-US"> UNIX</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">、</span><span lang="EN-US">Linux</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">、</span><span lang="EN-US">BSD</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">、</span><span lang="EN-US">Mac 0S X</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">、</span><span lang="EN-US">Solaris,</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">以及</span><span lang="EN-US"> Microsoft Windows </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">等操作系统中。随着</span><span lang="EN-US">Nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">在国内很多大型网站中的稳定高效运行，近两年它也逐渐被越来越多的中小型网站所使用。当前流行的</span><span lang="EN-US">Nginx Web</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">组合被称为</span><span lang="EN-US">LNMP</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">或</span><span lang="EN-US">LEMP(</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">即</span><span lang="EN-US">Linux Nginx MySQL PHP),</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">其中</span><span lang="EN-US"> LNMP </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">里的</span><span lang="EN-US"> N </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">取自</span><span lang="EN-US">Nginx ( "engine x" ) </span></p>
<p class="MsoNormal" style="text-indent: 21.0pt;"><span lang="EN-US">Nginx </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的官方介绍见</span> <span class="ad"><span style="font-size: 10.5pt; mso-bidi-font-size: 11.0pt; mso-bidi-font-family: 'Times New Roman';" lang="EN-US">http://nginx.org/en</span></span></p>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496797998"></a><a name="_Toc496384587"></a><!--[if !supportLists]--><span lang="EN-US">2.2 </span><!--[endif]--><span lang="EN-US">NGINX </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件特性</span></h2>
<h3><a name="_Toc496797999"></a><!--[if !supportLists]--><span lang="EN-US">2.2.1 </span><!--[endif]--><span lang="EN-US">HTTP</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务器的特色及<span style="background: yellow; mso-highlight: yellow;">优点</span>：</span></h3>
<p class="MsoListParagraph" style="margin-left: 42.0pt; text-indent: -21.0pt; mso-list: l11 level1 lfo12;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">u<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">支持高并发：能支持几万并发连接（特别是静态小文件业务环境）</span></p>
<p class="MsoListParagraph" style="margin-left: 42.0pt; text-indent: -21.0pt; mso-list: l11 level1 lfo12;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">u<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">资源消耗少：在</span><span lang="EN-US">3</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">万并发连接下，开启</span><span lang="EN-US">10</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">个</span><span lang="EN-US">Nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">线程消耗的内存不到</span><span lang="EN-US">200MB</span></p>
<p class="MsoListParagraph" style="margin-left: 42.0pt; text-indent: -21.0pt; mso-list: l11 level1 lfo12;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">u<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">可以做</span><span lang="EN-US">HTTP</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">反向代理及加速<span style="background: yellow; mso-highlight: yellow;">缓存</span>、即<span style="background: yellow; mso-highlight: yellow;">负载均衡</span>功能，内置对</span><span lang="EN-US">RS</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">节点服务器健康检查功能，这相当于专业的</span><span lang="EN-US">Haproxy</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件或</span><span style="background: yellow; mso-highlight: yellow;" lang="EN-US">LV</span><span lang="EN-US">S</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的功能。</span></p>
<p class="MsoListParagraph" style="margin-left: 42.0pt; text-indent: -21.0pt; mso-list: l11 level1 lfo12;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">u<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">具备</span><span lang="EN-US">Squid</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">等专业缓存软件等的缓存功能。</span></p>
<p class="MsoListParagraph" style="margin-left: 42.0pt; text-indent: -21.0pt; mso-list: l11 level1 lfo12;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">u<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">支持异步网络</span><span lang="EN-US">I/O</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">事件横型</span><span lang="EN-US">epoll(Linux2.6+)</span></p>
<h3><a name="_Toc496798000"></a><!--[if !supportLists]--><span lang="EN-US">2.2.2 </span><!--[endif]--><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">功能特性</span></h3>
<p class="MsoListParagraph" style="margin-left: 45.0pt; text-indent: -21.0pt; mso-list: l4 level1 lfo13;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">&Oslash;<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span lang="EN-US">web</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">网站服务</span></p>
<p class="MsoListParagraph" style="margin-left: 45.0pt; text-indent: -21.0pt; mso-list: l4 level1 lfo13;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">&Oslash;<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">反向代理负载均衡</span><span lang="EN-US">(nginx /lvs /haproxy)</span></p>
<p class="MsoListParagraph" style="margin-left: 45.0pt; text-indent: -21.0pt; mso-list: l4 level1 lfo13;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">&Oslash;<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">缓存服务（</span><span lang="EN-US">memcache /redis /mongodb</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">）</span></p>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496798001"></a><!--[if !supportLists]--><span lang="EN-US">2.3 </span><!--[endif]--><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件的企业功能应用</span></h2>
<table class="MsoTable15Grid4Accent3" style="border-width: initial; border-style: none; border-color: initial;" border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td style="width: 84.8pt; border-top-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-top-color: #9bbb59; border-bottom-color: #9bbb59; border-left-color: #9bbb59; border-right: none; background: #9bbb59; padding: 0cm 5.4pt;" width="113">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; mso-yfti-cnfc: 5;"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; color: white; mso-themecolor: background1;">业务类型</span></strong></p>
</td>
<td style="width: 438pt; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-color: #9bbb59; border-right-color: #9bbb59; border-bottom-color: #9bbb59; border-left: none; background: #9bbb59; padding: 0cm 5.4pt;" width="584">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; mso-yfti-cnfc: 1;"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; color: white; mso-themecolor: background1;">应用方案</span></strong></p>
</td>
</tr>
<tr>
<td style="width: 84.8pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #c2d69b; border-bottom-color: #c2d69b; border-left-color: #c2d69b; border-top: none; background: #eaf1dd; padding: 0cm 5.4pt;" width="113">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; mso-yfti-cnfc: 68;"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">静态业务</span></strong></p>
</td>
<td style="width: 438pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #c2d69b; border-right-width: 1pt; border-right-color: #c2d69b; background: #eaf1dd; padding: 0cm 5.4pt;" width="584">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; mso-yfti-cnfc: 64;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">若是高并发场景，尽量采用</span><span lang="EN-US">Nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">或</span><span lang="EN-US">Lighttpd</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">，二者首选</span><span lang="EN-US">Nginx</span></p>
</td>
</tr>
<tr>
<td style="width: 84.8pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #c2d69b; border-bottom-color: #c2d69b; border-left-color: #c2d69b; border-top: none; padding: 0cm 5.4pt;" width="113">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; mso-yfti-cnfc: 4;"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">动态业务</span></strong></p>
</td>
<td style="width: 438pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #c2d69b; border-right-width: 1pt; border-right-color: #c2d69b; padding: 0cm 5.4pt;" width="584">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">理论上采用</span><span lang="EN-US">Nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">和</span><span lang="EN-US">Apache</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">均可，建议选择</span><span lang="EN-US">Nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">，为了避免相同业务的服务软件多样化，增加额外维护成本。动态业务可以由</span><span lang="EN-US">Nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">兼做前端代理，再根据页面元素的类型或目录，转发到后端相应的服务器处理进程。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="background: lime; mso-highlight: lime;" lang="EN-US">---</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; background: lime; mso-highlight: lime;">首选</span><span style="background: lime; mso-highlight: lime;" lang="EN-US">tomcat</span></p>
</td>
</tr>
<tr>
<td style="width: 84.8pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #c2d69b; border-bottom-color: #c2d69b; border-left-color: #c2d69b; border-top: none; background: #eaf1dd; padding: 0cm 5.4pt;" width="113">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; mso-yfti-cnfc: 68;"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">既有静态业务又有动态业务</span></strong></p>
</td>
<td style="width: 438pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #c2d69b; border-right-width: 1pt; border-right-color: #c2d69b; background: #eaf1dd; padding: 0cm 5.4pt;" width="584">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; mso-char-indent-count: 2.0; mso-yfti-cnfc: 64;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">采用</span><span lang="EN-US">Nginx</span></p>
<p class="MsoNormal" style="text-indent: 21.0pt; mso-yfti-cnfc: 64;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">利用</span><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件是无法处理动态业务请求，要让</span><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">结合</span><span lang="EN-US">php</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件处理动态业务请求，在加上</span><span lang="EN-US">mysql </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">即</span> <strong><span lang="EN-US">LNMP</span></strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">架构</span></p>
</td>
</tr>
</tbody>
</table>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496798002"></a><!--[if !supportLists]--><span lang="EN-US">2.4 </span><!--[endif]--><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件的动态访问瓶颈</span></h2>
<h3><a name="_Toc496798003"></a><a name="_Toc496384590"></a><!--[if !supportLists]--><span lang="EN-US">2.4.1 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">与其他软件的对比</span></h3>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">先来看看</span><strong><span style="background: lime; mso-highlight: lime;" lang="EN-US">Apache</span></strong><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; background: lime; mso-highlight: lime;">软件的特点</span></strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">，如下</span></p>
<p class="MsoListParagraph" style="margin-left: 63.0pt; text-indent: -21.0pt; mso-list: l13 level1 lfo14;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">&sup2;<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span lang="EN-US">Apache2.2</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">版本非常稳定强大，据官方说，</span><span lang="EN-US">Apache2.4</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">版本性能更强。</span></p>
<p class="MsoListParagraph" style="margin-left: 63.0pt; text-indent: -21.0pt; mso-list: l13 level1 lfo14;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">&sup2;<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span lang="EN-US">Prefork</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">模式取消了进程创建开销，性能很高。</span></p>
<p class="MsoListParagraph" style="margin-left: 63.0pt; text-indent: -21.0pt; mso-list: l13 level1 lfo14;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">&sup2;<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">处理动态业务数据时，因关联到后端的引擎和数据库，瓶颈不在</span><span lang="EN-US">Apache</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">上。</span></p>
<p class="MsoListParagraph" style="margin-left: 63.0pt; text-indent: -21.0pt; mso-list: l13 level1 lfo14;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">&sup2;<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">高并发时消耗系统资源相对多一些。</span></p>
<p class="MsoListParagraph" style="margin-left: 63.0pt; text-indent: -21.0pt; mso-list: l13 level1 lfo14;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">&sup2;<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">基于传统的</span><span lang="EN-US">select</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">模型，高并发能力有限。</span></p>
<p class="MsoListParagraph" style="margin-left: 63.0pt; text-indent: -21.0pt; mso-list: l13 level1 lfo14;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">&sup2;<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">支持扩展库，可通过</span><span lang="EN-US">DSO</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">、</span><span lang="EN-US">apxs</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">方法编译安装额外的插件功能，不需要重新编译</span><span lang="EN-US">Apache</span></p>
<p class="MsoListParagraph" style="margin-left: 63.0pt; text-indent: -21.0pt; mso-list: l13 level1 lfo14;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">&sup2;<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">功能多，更稳定，更安全，插件也多。</span></p>
<p class="MsoListParagraph" style="margin-left: 63.0pt; text-indent: -21.0pt; mso-list: l13 level1 lfo14;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">&sup2;<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">市场份额在逐年递减</span></p>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">再来看看</span><strong><span style="background: lime; mso-highlight: lime;" lang="EN-US">Nginx</span></strong><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; background: lime; mso-highlight: lime;">软件</span></strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的特点，如下：</span></p>
<p class="MsoListParagraph" style="margin-left: 63.0pt; text-indent: -21.0pt; mso-list: l0 level1 lfo15;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">n<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">基于异步网结</span><span lang="EN-US">I/O</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">模</span> <span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">型（</span><span lang="EN-US">epollk kqueue</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">）</span></p>
<p class="MsoListParagraph" style="margin-left: 63.0pt; text-indent: -21.0pt; mso-list: l0 level1 lfo15;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">n<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">具备支持高性能，高并发的特性，并发连接可达数万。</span></p>
<p class="MsoListParagraph" style="margin-left: 63.0pt; text-indent: -21.0pt; mso-list: l0 level1 lfo15;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">n<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">对小文件（小于</span><span lang="EN-US">1 MB</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的静态文件）高并发支持很好，性能很高</span></p>
<p class="MsoListParagraph" style="margin-left: 63.0pt; text-indent: -21.0pt; mso-list: l0 level1 lfo15;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">n<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">不支持类似</span><span lang="EN-US"> Apache</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的</span><span lang="EN-US">DSO</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">模式、扩展库必须编译进主程序（缺点）</span></p>
<p class="MsoListParagraph" style="margin-left: 63.0pt; text-indent: -21.0pt; mso-list: l0 level1 lfo15;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">n<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">进程占用系统资源比较低。</span></p>
<p class="MsoListParagraph" style="margin-left: 63.0pt; text-indent: -21.0pt; mso-list: l0 level1 lfo15;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">n<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">支持</span><span lang="EN-US">Web</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">、反向</span><span lang="EN-US">Proxy</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">、</span><span lang="EN-US">Cache</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">三大重点功能，幷且都很优秀。</span></p>
<p class="MsoListParagraph" style="margin-left: 63.0pt; text-indent: -21.0pt; mso-list: l0 level1 lfo15;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">n<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">市场份额在逐年快速增加。</span></p>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">最后是</span><strong><span style="background: lime; mso-highlight: lime;" lang="EN-US">Lighttpd</span></strong><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; background: lime; mso-highlight: lime;">的特点</span></strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">，如下：</span></p>
<p class="MsoListParagraph" style="margin-left: 63.0pt; text-indent: -21.0pt; mso-list: l1 level1 lfo16;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">&sup2;<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">基于异步网络</span><span lang="EN-US"> I/ O</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">模型，性能、并发都与</span><span lang="EN-US"> Nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">相近。</span></p>
<p class="MsoListParagraph" style="margin-left: 63.0pt; text-indent: -21.0pt; mso-list: l1 level1 lfo16;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">&sup2;<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">扩展库是</span><span lang="EN-US"> SO</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">模式，比</span><span lang="EN-US">Nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">灵活</span></p>
<p class="MsoListParagraph" style="margin-left: 63.0pt; text-indent: -21.0pt; mso-list: l1 level1 lfo16;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">&sup2;<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">目前国内的使用率比较低，安全性没有</span><span lang="EN-US"> Apache</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">和</span><span lang="EN-US">Nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">好。</span></p>
<p class="MsoListParagraph" style="margin-left: 63.0pt; text-indent: -21.0pt; mso-list: l1 level1 lfo16;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">&sup2;<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">通过插件</span><span lang="EN-US">(mod_secdownload)</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">可实现文件</span><span lang="EN-US"> URL</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">地址加密（优点）</span></p>
<p class="MsoListParagraph" style="margin-left: 63.0pt; text-indent: -21.0pt; mso-list: l1 level1 lfo16;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">&sup2;<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">社区不活跃，市场份额较低，</span></p>
<h3><a name="_Toc496798004"></a><a name="_Toc496384591"></a><!--[if !supportLists]--><span lang="EN-US">2.4.2 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">最主要的区别</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">（</span><span lang="EN-US">select & epoll</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">）</span></h3>
<p><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">NGINX&nbsp;使用的是epoll&nbsp;和Kqueue&nbsp;异步网络I/O模型，而apache使用的是传统的select模型</span></p>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">比喻：</span></strong></p>
<blockquote>
<p class="MsoNormal">&nbsp;第一个比喻：</p>
<p class="MsoNormal">&nbsp;假设你在大学读书，住的宿舍楼有很多房间，你的朋友要来找你。select版宿管大妈就会带着你的朋友到各房间挨个去找，直到找到你为止。而epoll版宿管大妈会先记下每位入住同学的房间号，你的朋友来找你时，只需告诉你的朋友你住在哪个房间即可，不用亲自带着你的朋友满宿舍楼找人了。如果同时来了100个人，都要找自己住这栋楼的同学，select版和epoll版宿管大妈,谁的效率更高，就很明显了。</p>
</blockquote>
<p class="MsoNormal" style="text-indent: 21.0pt;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">第二个比喻：</span></p>
<blockquote>
<p class="MsoNormal" style="text-indent: 21pt; margin-left: 30px;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">select的调用复杂度是线性的，即O(n)。举个例子，一个保姆照看照看一群孩子，如果把孩子是否需要尿尿比作网络I/O事件，select的作用就好比这个保姆挨个询问每个孩子"你要尿尿吗？&rdquo;如果孩子回答是，保姆则把孩子领出来放到另外一个地方。当所有孩子询问完之后，保姆领着这些要尿尿的孩子去上厕所（处理网络I/O事件).在epoll机制下，保姆不再需要挨个询问每个孩子是否需要尿尿。取而代之的是，如果孩子需要尿尿，他就自己主动站到事先约定好的地方，而保姆的职责就是查看事先约定好的地方是否有孩子。如果有小孩，则领着孩子去上厕所（网络事件处理)。因此，epoll的这种机制，能够高效地处理成千上万的并发连接，并且性能不会随着连接数増加而下降太多。</span></p>
</blockquote>
<h3><a name="_Toc496798005"></a><a name="_Toc496384592"></a><!--[if !supportLists]--><span lang="EN-US">2.4.3 </span><!--[endif]--><span lang="EN-US">apache select</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">和</span><span lang="EN-US">nginx epoll</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">技术对比图</span></h3>
<table class="MsoTable15Grid4Accent5" style="border-width: initial; border-style: none; border-color: initial;" border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td style="width: 99pt; border-top-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-top-color: #4bacc6; border-bottom-color: #4bacc6; border-left-color: #4bacc6; border-right: none; background: #4bacc6; padding: 0cm 5.4pt;" valign="top" width="132">
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; color: white; mso-themecolor: background1;">指标</span></strong></p>
</td>
<td style="width: 219.7pt; border-top-width: 1pt; border-top-color: #4bacc6; border-left: none; border-bottom-width: 1pt; border-bottom-color: #4bacc6; border-right: none; background: #4bacc6; padding: 0cm 5.4pt;" valign="top" width="293">
<p class="MsoNormal"><strong><span style="color: white; mso-themecolor: background1;" lang="EN-US">select</span></strong></p>
</td>
<td style="width: 204.1pt; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-color: #4bacc6; border-right-color: #4bacc6; border-bottom-color: #4bacc6; border-left: none; background: #4bacc6; padding: 0cm 5.4pt;" valign="top" width="272">
<p class="MsoNormal"><strong><span style="color: white; mso-themecolor: background1;" lang="EN-US">epoll</span></strong></p>
</td>
</tr>
<tr>
<td style="width: 99pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #92cddc; border-bottom-color: #92cddc; border-left-color: #92cddc; border-top: none; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="132">
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">性能</span></strong></p>
</td>
<td style="width: 219.7pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #92cddc; border-right-width: 1pt; border-right-color: #92cddc; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="293">
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">随着连接数的增加性能急剧下降。处理成千上万的并发连接数，性能很差</span></p>
</td>
<td style="width: 204.1pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #92cddc; border-right-width: 1pt; border-right-color: #92cddc; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="272">
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">随着连接数的增加，性能基本上没有下降。处理成千上万连接时性能很好</span></p>
</td>
</tr>
<tr>
<td style="width: 99pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #92cddc; border-bottom-color: #92cddc; border-left-color: #92cddc; border-top: none; padding: 0cm 5.4pt;" valign="top" width="132">
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">连接数</span></strong></p>
</td>
<td style="width: 219.7pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #92cddc; border-right-width: 1pt; border-right-color: #92cddc; padding: 0cm 5.4pt;" valign="top" width="293">
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">连接数有限制，处理的最大连接数不超过</span><span lang="EN-US">1024</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">，如果要处理的连接数超过</span><span lang="EN-US">1024</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">个，则需要修改</span><span lang="EN-US">FD_SETSIZE</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">宏，并重新编译</span></p>
</td>
<td style="width: 204.1pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #92cddc; border-right-width: 1pt; border-right-color: #92cddc; padding: 0cm 5.4pt;" valign="top" width="272">
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">连接数无限制</span></p>
</td>
</tr>
<tr>
<td style="width: 99pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #92cddc; border-bottom-color: #92cddc; border-left-color: #92cddc; border-top: none; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="132">
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">内在处理机制</span></strong></p>
</td>
<td style="width: 219.7pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #92cddc; border-right-width: 1pt; border-right-color: #92cddc; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="293">
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">线性轮询</span></p>
</td>
<td style="width: 204.1pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #92cddc; border-right-width: 1pt; border-right-color: #92cddc; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="272">
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">回调</span><span lang="EN-US">callback</span></p>
</td>
</tr>
<tr>
<td style="width: 99pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #92cddc; border-bottom-color: #92cddc; border-left-color: #92cddc; border-top: none; padding: 0cm 5.4pt;" valign="top" width="132">
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">开发复杂性</span></strong></p>
</td>
<td style="width: 219.7pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #92cddc; border-right-width: 1pt; border-right-color: #92cddc; padding: 0cm 5.4pt;" valign="top" width="293">
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">低</span></p>
</td>
<td style="width: 204.1pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #92cddc; border-right-width: 1pt; border-right-color: #92cddc; padding: 0cm 5.4pt;" valign="top" width="272">
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">中</span></p>
</td>
</tr>
</tbody>
</table>
<h1><a name="_Toc496798006"></a><a name="_Toc496384594"></a><!--[if !supportLists]--><span lang="EN-US">第3章 </span><!--[endif]--><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的安装</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">与使用</span></h1>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496798007"></a><a name="_Toc496384595"></a><!--[if !supportLists]--><span lang="EN-US">3.1 </span><!--[endif]--><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件的编译安装步骤</span></h2>
<h3><a name="_Toc496798008"></a><a name="_Toc496384596"></a><!--[if !supportLists]--><span lang="EN-US">3.1.1 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">检查软件安装的系统环境</span></h3>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="cab8a5a5be8abdafa8fafb">[email&#160;protected]</a> ~]<span style="color: #008000;">#</span><span style="color: #008000;"> cat /etc/redhat-release</span>
CentOS release 6.9<span style="color: #000000;"> (Final)
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d4a6bbbba094a3b1b6e4e5">[email&#160;protected]</a> </span>~]<span style="color: #008000;">#</span><span style="color: #008000;"> uname -r</span>
2.6.32-696.el6.x86_64</pre>
</div>
<h3><a name="_Toc496798009"></a><a name="_Toc496384597"></a><!--[if !supportLists]--><span lang="EN-US">3.1.2 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">安装</span><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的依赖包（</span><span lang="EN-US">pcre-devel openssl-devel</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">）</span></h3>
<div class="cnblogs_code">
<pre>yum install -y pcre-devel openssl-devel</pre>
</div>
<div style="mso-element: para-border-div; border: solid windowtext 2.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt; mso-border-shadow: yes; background: #F2F2F2; mso-shading: windowtext; mso-pattern: gray-5 auto; margin-left: 35.4pt; margin-right: 76.7pt;">
<p class="a3" style="margin: 1pt 0cm; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span lang="EN-US">pcre</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">：兼容</span><span lang="EN-US">perl</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">语言正则表达式，</span><span lang="EN-US">perl compatible regular expressions</span></p>
<p class="a3" style="margin: 1pt 0cm; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rewirte</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">模块</span> <span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">参数信息（</span><span lang="EN-US">perl</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">方式定义正则表达式）</span></p>
<p class="a3" style="margin: 1pt 0cm; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span lang="EN-US">openssl</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">：</span><span lang="EN-US">ssh---openssh/openssl---https</span></p>
<p class="a3" style="margin: 1pt 0cm; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体; color: #00b050;">总结：所有安装依赖软件，后面都要加上</span><span style="color: #00b050;" lang="EN-US">-devel</span></strong></p>
</div>
<h3><a name="_Toc496798010"></a><a name="_Toc496384598"></a><!--[if !supportLists]--><span lang="EN-US">3.1.3 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">下载</span><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件</span></h3>
<div class="cnblogs_code">
<pre>wget http://nginx.org/download/nginx-1.10.2.tar.gz</pre>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">说明：软件很小，用心查看一下</span></p>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">解压软件</span></p>
<div class="cnblogs_code">
<pre>tar xf nginx-1.10.2.tar.gz</pre>
</div>
<h3><a name="_Toc496798011"></a><a name="_Toc496384599"></a><!--[if !supportLists]--><span lang="EN-US">3.1.4 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">创建管理用户</span><span lang="EN-US"> www</span></h3>
<div class="cnblogs_code">
<pre>useradd -M -s /sbin/nologin www</pre>
</div>
<h3><!--[if !supportLists]--><span lang="EN-US">3.1.5 </span><!--[endif]--><span lang="EN-US">&nbsp;<a name="_Toc496798012"></a><a name="_Toc496384600"></a>nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件编译安装过程</span></h3>
<h4><!--[if !supportLists]--><strong><span style="mso-fareast-font-family: 'Courier New'; mso-bidi-font-family: 'Courier New'; color: red;" lang="EN-US">3.1.5.1<span style="font-variant-numeric: normal; font-weight: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span></strong><!--[endif]--><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; color: red;">注意</span></strong></h4>
<div style="mso-element: para-border-div; border: solid windowtext 2.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt; mso-border-shadow: yes; background: #F2F2F2; mso-shading: windowtext; mso-pattern: gray-5 auto; margin-left: 35.4pt; margin-right: 55.45pt;">
<p class="a3" style="margin: 1pt 0cm; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">软件编译安装步骤</span></p>
<p class="a3" style="margin: 1pt 0cm; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span lang="EN-US"> a></span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">软件解压配置（将软件程序安装到哪个目录中</span> <span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">开启</span><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">软件的哪些功能）</span></p>
<p class="a3" style="margin: 1pt 0cm; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span lang="EN-US"> b></span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">软件编译过程</span></p>
<p class="a3" style="margin: 1pt 0cm; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span lang="EN-US"> c></span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">软件编译安装过程</span></p>
</div>
<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp; </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; background: lime; mso-highlight: lime;">注意顺序，顺序不对软件安装会出错</span></p>
<h4><!--[if !supportLists]--><strong><span lang="EN-US">3.1.5.2<span style="font-variant-numeric: normal; font-weight: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span></strong><!--[endif]--><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">编译安装软件</span></strong></h4>
<p class="MsoNormal" style="margin-left: 21.0pt;"><span style="background: lime; mso-highlight: lime;" lang="EN-US">1</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; background: lime; mso-highlight: lime;">、配置软件，</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">在软件的解压目录中</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="681a07071c281f0d0a5859">[email&#160;protected]</a> nginx-1.10.2]<span style="color: #008000;">#</span><span style="color: #008000;"> ./configure --prefix=/application/nginx-1.10.2 --user=www --group=www --with-http_stub_status_module --with-http_ssl_module</span></pre>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">编译参数说明：</span></p>
<blockquote>
<p class="MsoNormal">&nbsp;--prefix&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;表示指定软件安装到哪个目录中，指定目录不存在会自动创建</p>
<p class="MsoNormal">&nbsp;--user/--group &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nginx工作进程由哪个用户运行管理</p>
<p class="MsoNormal">&nbsp;--with-http_stub_status_module&nbsp;&nbsp;&nbsp;启动nginx状态模块功能（用户访问nginx的网络信息）</p>
<p class="MsoNormal">&nbsp;--with-http_ssl_module &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;启动https功能模块</p>
</blockquote>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">通过软件编译过程中的返回值是否正确，确认配置是否正确</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="780a17170c380f1d1a4849">[email&#160;protected]</a> nginx-1.10.2]<span style="color: #008000;">#</span><span style="color: #008000;"> echo $?</span>
0</pre>
</div>
<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp; <span style="background: lime; mso-highlight: lime;">2</span></span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; background: lime; mso-highlight: lime;">、编译软件</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="ff8d90908bbf889a9dcfce">[email&#160;protected]</a> nginx-1.10.2]<span style="color: #008000;">#</span><span style="color: #008000;"> make</span></pre>
</div>
<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp; <span style="background: lime; mso-highlight: lime;">3</span></span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; background: lime; mso-highlight: lime;">、编译安装</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5a2835352e1a2d3f386a6b">[email&#160;protected]</a> nginx-1.10.2]<span style="color: #008000;">#</span><span style="color: #008000;"> make install</span></pre>
</div>
<h3><a name="_Toc496798013"></a><a name="_Toc496384601"></a><!--[if !supportLists]--><span lang="EN-US">3.1.6 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">创建软连接</span></h3>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="0f7d60607b4f786a6d3f3e">[email&#160;protected]</a> application]<span style="color: #008000;">#</span><span style="color: #008000;"> ln -s /application/nginx-1.10.2/ /application/nginx</span></pre>
</div>
<h3><a name="_Toc496798014"></a><a name="_Toc496384611"></a><!--[if !supportLists]--><span lang="EN-US">3.1.7 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">精简化</span><span lang="EN-US">nginx.conf </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">主配置文件内容</span></h3>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="e2908d8d96a2958780d2d3">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> egrep -v "#|^$" nginx.conf.default >nginx.conf</span></pre>
</div>
<h3><a name="_Toc496798015"></a><a name="_Toc496384602"></a><!--[if !supportLists]--><span lang="EN-US">3.1.8 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">启动程序</span></h3>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="e795888893a7908285d7d6">[email&#160;protected]</a> application]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx</span>
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="7d0f1212093d0a181f4d4c">[email&#160;protected]</a> application]<span style="color: #008000;">#</span></pre>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">检查是否启动</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="deacb1b1aa9ea9bbbceeef">[email&#160;protected]</a> application]<span style="color: #008000;">#</span><span style="color: #008000;"> ps -ef |grep nginx</span>
root      26548      1  0 20:13 ?        00:00:00 nginx: master process /application/nginx/sbin/<span style="color: #000000;">nginx
www       </span>26549  26548  0 20:13 ?        00:00:00<span style="color: #000000;"> nginx: worker process       
root      </span>26551  23431  3 20:13 pts/0    00:00:00 grep --color=auto nginx</pre>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">检查端口信息</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="61130e0e15211604035150">[email&#160;protected]</a> application]<span style="color: #008000;">#</span><span style="color: #008000;"> netstat -lntup |grep 80</span>
tcp        0      0 0.0.0.0:80                  0.0.0.0:*                   LISTEN      26548/nginx </pre>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务部署完成</span></p>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; background: yellow; mso-highlight: yellow;">至此软件安装完毕！</span></strong></p>
<p class="MsoNormal"><strong><span style="background: lime; mso-highlight: lime;" lang="EN-US">nginx</span></strong><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; background: lime; mso-highlight: lime;">命令简化方法</span></strong></p>
<div class="cnblogs_code">
<pre>echo <span style="color: #800000;">'</span><span style="color: #800000;">export PATH=/application/nginx/sbin:$PATH</span><span style="color: #800000;">'</span>>>/etc/<span style="color: #000000;">profile
source </span>/etc/<span style="color: #000000;">profile
which nginx</span></pre>
</div>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo19;"><a name="_Toc496384603"></a><a name="_Toc496798016"></a><a name="_Toc496384610"></a><!--[if !supportLists]--><span lang="EN-US">3.1 </span><!--[endif]--><span lang="EN-US">nginx </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">目录结构</span></h2>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="40322f2f34003725227071">[email&#160;protected]</a> nginx]<span style="color: #008000;">#</span><span style="color: #008000;"> ll</span>
total 36<span style="color: #000000;">
drwxr</span>-xr-x 2 root root 4096 Oct 21 19:34 conf    <span style="color: #008000;">#</span><span style="color: #008000;">配置文件保存目录</span>
drwxr-xr-x 2 root root 4096 Oct 21 19:34 html    <span style="color: #008000;">#</span><span style="color: #008000;">站点目录</span>
drwxr-xr-x 2 root root 4096 Oct 21 20:26 logs    <span style="color: #008000;">#</span><span style="color: #008000;">nginx 服务相关日志文件保存目录（错误日志访问日志）</span>
drwxr-xr-x 2 root root 4096 Oct 21 19:34 sbin    <span style="color: #008000;">#</span><span style="color: #008000;"> 服务命令目录（只有一个nginx文件）</span></pre>
</div>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496798017"></a><a name="_Toc496384612"></a><!--[if !supportLists]--><span lang="EN-US">3.2 </span><!--[endif]--><span lang="EN-US">nginx.conf </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">配置文件说明</span></h2>
<p class="MsoNormal" style="margin-left: 21.0pt;"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">这样的配置文件是通过精简化配置文件得到！</span></strong></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="96e4f9f9e2d6e1f3f4a6a7">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> cat nginx.conf</span>
worker_processes  1<span style="color: #000000;">;                        &larr; worker 进程数量
events {                                    &larr;事件区块
    worker_connections  </span>1024<span style="color: #000000;">;               &larr;每个worker进程可以处理的连接数
}                                            &larr;事件区块结束
http {                                      &larr; HTTP 区块
    include       mime.types;               &larr;支持的媒体文件
    default_type  application</span>/octet-<span style="color: #000000;">stream;&larr;默认的媒体类型
    sendfile        on;                     &larr;高效传输模式
    keepalive_timeout  </span>65<span style="color: #000000;">;                  &larr;超时时间
    server {                                 &larr; server 区块
        listen       </span>80<span style="color: #000000;">;                    &larr;端口
        server_name  localhost;             &larr;域名
        location </span>/<span style="color: #000000;"> {                        &larr;第一个location区块
            root   html;                     &larr;站点目录
            index  index.html index.htm;     &larr;首页文件
        }                                    &larr;第一个location区块结束
        error_page   </span>500 502 503 504  /<span style="color: #000000;">50x.html;  &larr; 错误信息配置
        location </span>= /<span style="color: #000000;">50x.html {                  文件位置
            root   html;                      在哪找：路径
        }                                     
    }                                         &larr; server 区块结束
}                                            &larr; HTTP 区块结束</span></pre>
</div>
<h3><a name="_Toc496798018"></a><!--[if !supportLists]--><span lang="EN-US">3.2.1 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">站点目录与首页文件概</span>&nbsp;</h3>
<h3><a name="_Toc496798019"></a><!--[if !supportLists]--><span lang="EN-US">3.2.2 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">配置文件详解</span>&nbsp;</h3>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496384604"></a><a name="_Toc496798020"></a><!--[if !supportLists]--><span lang="EN-US">3.3 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; color: red;">【常见错误】</span><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件的编译安装常见错误说明</span></h2>
<h3><a name="_Toc496798021"></a><!--[if !supportLists]--><span lang="EN-US">3.3.1 </span><!--[endif]--><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件安装过程中遇到的问题</span></h3>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件依赖包未正确安装问题</span><span lang="EN-US">---PCRE</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">依赖包没有安装</span></p>
<div class="cnblogs_code">
<pre>./<span style="color: #000000;">configure: error: the HTTP rewrite module requires the PCRE library.
You can either disable the module by using </span>--without-<span style="color: #000000;">http_rewrite_module
option, </span><span style="color: #0000ff;">or</span> install the PCRE library into the system, <span style="color: #0000ff;">or</span><span style="color: #000000;"> build the PCRE library
statically </span><span style="color: #0000ff;">from</span> the source with nginx by using --with-pcre=<path> option.</pre>
</div>
<div style="mso-element: para-border-div; border: solid windowtext 2.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt; mso-border-shadow: yes; background: #F2F2F2; mso-shading: windowtext; mso-pattern: gray-5 auto;">
<p class="a3"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">解决方法：</span><span lang="EN-US">yum install pcre pcre-devel -y</span></p>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件依赖包未正确安装问题</span><span lang="EN-US">---OPENSSL</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">依赖包没有安装</span></p>
<div class="cnblogs_code">
<pre>./<span style="color: #000000;">configure: error: SSL modules require the OpenSSL library.
You can either do </span><span style="color: #0000ff;">not</span> enable the modules, <span style="color: #0000ff;">or</span><span style="color: #000000;"> install the OpenSSL library
into the system, </span><span style="color: #0000ff;">or</span> build the OpenSSL library statically <span style="color: #0000ff;">from</span><span style="color: #000000;"> the source
with nginx by using </span>--with-openssl=<path> option.</pre>
</div>
<div style="mso-element: para-border-div; border: solid windowtext 2.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt; mso-border-shadow: yes; background: #F2F2F2; mso-shading: windowtext; mso-pattern: gray-5 auto;">
<p class="a3"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">解决方法：</span><span lang="EN-US">yum install openssl openssl-devel -y</span></p>
</div>
<h3><a name="_Toc496798022"></a><!--[if !supportLists]--><span lang="EN-US">3.3.2 </span><!--[endif]--><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件启动过程中遇到的问题</span></h3>
<p class="MsoNormal"><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件重复启动产生的错误信息</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="7d0f1212093d0a181f4d4c">[email&#160;protected]</a> nginx-1.10.2]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx</span>
nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already <span style="color: #0000ff;">in</span><span style="color: #000000;"> use)
nginx: [emerg] bind() to </span>0.0.0.0:80 failed (98: Address already <span style="color: #0000ff;">in</span><span style="color: #000000;"> use)
nginx: [emerg] bind() to </span>0.0.0.0:80 failed (98: Address already <span style="color: #0000ff;">in</span><span style="color: #000000;"> use)
nginx: [emerg] bind() to </span>0.0.0.0:80 failed (98: Address already <span style="color: #0000ff;">in</span><span style="color: #000000;"> use)
nginx: [emerg] bind() to </span>0.0.0.0:80 failed (98: Address already <span style="color: #0000ff;">in</span><span style="color: #000000;"> use)
nginx: [emerg] still could </span><span style="color: #0000ff;">not</span> bind()</pre>
</div>
<div style="mso-element: para-border-div; border: solid windowtext 2.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt; mso-border-shadow: yes; background: #F2F2F2; mso-shading: windowtext; mso-pattern: gray-5 auto;">
<p class="a3"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">解决方法：</span></p>
<p class="a3" style="text-indent: 21pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">软件已经启动无需反复启动，如果需要重新启动需要停止</span><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">进程或者用</span><span lang="EN-US">reload</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">方式进行重启</span></p>
</div>
<h3><a name="_Toc496798023"></a><!--[if !supportLists]--><span lang="EN-US">3.3.3 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">启动</span><span lang="EN-US"> Nginx </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">时如下报错</span><span lang="EN-US">"nginx:[emerg]getpwnam(</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">&ldquo;</span><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">&rdquo;〉</span><span lang="EN-US">failed"</span></h3>
<div style="mso-element: para-border-div; border: solid windowtext 2.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt; mso-border-shadow: yes; background: #F2F2F2; mso-shading: windowtext; mso-pattern: gray-5 auto;">
<p class="a3"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">解答这是因为没有对应的</span><span lang="EN-US">Nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">服务用户，执行</span><span lang="EN-US">useradd nginx-s/sbin/no</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">丨</span><span lang="EN-US">ogin-M</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">创建</span><span lang="EN-US"> Nginx</span></p>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">用户即可。为了让读者理解问题，重现上述错误过程，命令如下：</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="cfbda0a0bb8fb8aaadfffe">[email&#160;protected]</a> tools]<span style="color: #008000;">#</span><span style="color: #008000;"> pkill nginx</span>
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="592b36362d192e3c3b6968">[email&#160;protected]</a> tools]<span style="color: #008000;">#</span><span style="color: #008000;"> userdel nginx</span>
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="4634292932063123247677">[email&#160;protected]</a> tools]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx</span>
nginx: [emerg] getpwnam(Mnginx<span style="color: #800000;">"</span><span style="color: #800000;">) failed</span>
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c1b3aeaeb581b6a4a3f1f0">[email&#160;protected]</a> tools]<span style="color: #008000;">#</span><span style="color: #008000;"> useradd nginx -s /sbin/nologin -M</span>
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="aedcc1c1daeed9cbcc9e9f">[email&#160;protected]</a> tools]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx</span></pre>
</div>
<h3><a name="_Toc496798024"></a><!--[if !supportLists]--><span lang="EN-US">3.3.4 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">编译安装</span><span lang="EN-US">pcre</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">编译软件时，</span><span lang="EN-US">gcc</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">不全导致报错（本文使用</span><span lang="EN-US">yum</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">安装不存在此问题</span><span lang="EN-US">)</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">。</span></h3>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">报错信息如下：</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="592b36362d193e333530376b">[email&#160;protected]</a> pcre-8.30]<span style="color: #008000;">#</span><span style="color: #008000;"> make && make install</span>
make all-<span style="color: #000000;">am
make[l] : Entering directory 7home</span>/gjlin/tools/pcre-8.30<span style="color: #800000;">'
</span><span style="color: #000000;">CXX pcrecpp.lo
libtool : compile : unrecognized option </span><span style="color: #800000;">'</span><span style="color: #800000;">-DHAVE_CONFIG_H</span><span style="color: #800000;">'</span><span style="color: #000000;">
libtool : compile : Try </span><span style="color: #800000;">'</span><span style="color: #800000;">libtool --help* for more information.</span>
make[l】：*** [pcrecpp.lo】错误 1<span style="color: #000000;">
make[l] : Leaving directory Vhome</span>/gjlin/tools/pcre-8.30<span style="color: #800000;">'
</span>make : *** [all]错误 </pre>
</div>
<div style="mso-element: para-border-div; border: solid windowtext 2.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt; mso-border-shadow: yes; background: #F2F2F2; mso-shading: windowtext; mso-pattern: gray-5 auto;">
<p class="a3"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">解答：执行&ldquo;</span><span lang="EN-US">yum -y install gcc-c++</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">&rdquo;命令安装</span><span lang="EN-US">gcc-c++</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">依赖包。</span></p>
</div>
<h3><a name="_Toc496798025"></a><!--[if !supportLists]--><span lang="EN-US">3.3.5 </span><!--[endif]--><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件编译安装后，看不到程序目录（</span><span lang="EN-US">/application</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">）</span></h3>
<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp; </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">说明：编译安装步骤不对（配置</span> <span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">编译</span> <span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">编译安装生成</span><span lang="EN-US">/appliation</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">）</span></p>
<h3><a name="_Toc496798026"></a><!--[if !supportLists]--><span lang="EN-US">3.3.6 </span><!--[endif]--><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件排查问题三部曲说明</span></h3>
<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; a </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">在客户端上</span><span lang="EN-US">ping</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务器端</span><span lang="EN-US">IP</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">，检查链路是否通畅</span></p>
<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">在客户端上</span><span lang="EN-US">telnet</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务器端</span><span lang="EN-US">IP</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">、端口，检查链路访问是否通畅</span></p>
<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; c </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">在客户端上</span><span lang="EN-US">wget</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">检测模拟页面访问是否正常</span></p>
<h3><a name="_Toc496798027"></a><!--[if !supportLists]--><span lang="EN-US">3.3.7 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; color: red;">【注意】</span><span style="color: red;" lang="EN-US">403</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; color: red;">状态码出现情况原因</span></h3>
<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp; 01. </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务阻止客户端访问</span></p>
<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp; 02. </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务端站点目录中，没有指定首页文件信息</span><span lang="EN-US">&nbsp;&nbsp;&nbsp; </span></p>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496798028"></a><!--[if !supportLists]--><span lang="EN-US">3.4 </span><!--[endif]--><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件使用</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">命令参数</span></h2>
<h3><a name="_Toc496798029"></a><a name="_Toc496384605"></a><!--[if !supportLists]--><span lang="EN-US">3.4.1 </span><!--[endif]--><span lang="EN-US">nginx </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">启动方法</span></h3>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="4c3e2323380c3b292e7c7d">[email&#160;protected]</a> application]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx</span></pre>
</div>
<h3><a name="_Toc496798030"></a><a name="_Toc496384606"></a><!--[if !supportLists]--><span lang="EN-US">3.4.2 </span><!--[endif]--><span lang="EN-US">nginx </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">停止方法</span></h3>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="0d7f6262794d7a686f3d3c">[email&#160;protected]</a> application]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -s stop</span></pre>
</div>
<h3><a name="_Toc496798031"></a><a name="_Toc496384607"></a><!--[if !supportLists]--><span lang="EN-US">3.4.3 </span><!--[endif]--><span lang="EN-US">nginx </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">重启方法</span> <span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">（平滑重启）</span></h3>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="54263b3b20142331366465">[email&#160;protected]</a> application]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -s reload</span></pre>
</div>
<h3><a name="_Toc496798032"></a><a name="_Toc496384608"></a><!--[if !supportLists]--><span lang="EN-US">3.4.4 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">检查配置文件语法是否正确</span></h3>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d6a4b9b9a296a1b3b4e6e7">[email&#160;protected]</a> application]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -t</span>
nginx: the configuration file /application/nginx-1.10.2/conf/nginx.conf syntax <span style="color: #0000ff;">is</span><span style="color: #000000;"> ok
nginx: configuration file </span>/application/nginx-1.10.2/conf/nginx.conf test <span style="color: #0000ff;">is</span> successful</pre>
</div>
<h3><a name="_Toc496798033"></a><a name="_Toc496384609"></a><!--[if !supportLists]--><span lang="EN-US">3.4.5 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">显示配置参数</span><span lang="EN-US">&nbsp; -V </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; color: red;">（大写</span><span style="color: red;" lang="EN-US">V</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; color: red;">）</span></h3>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="0c7e6363784c7b696e3c3d">[email&#160;protected]</a> application]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -V</span>
nginx version: nginx/1.10.2<span style="color: #000000;">
built by gcc </span>4.4.7 20120313 (Red Hat 4.4.7-18<span style="color: #000000;">) (GCC)
built with OpenSSL </span>1.0.1e-fips 11 Feb 2013<span style="color: #000000;">
TLS SNI support enabled
configure arguments: </span>--prefix=/application/nginx-1.10.2 --user=www --group=www --with-http_stub_status_module --with-http_ssl_module</pre>
</div>
<h3><a name="_Toc496798034"></a><!--[if !supportLists]--><span lang="EN-US">3.4.6 </span><!--[endif]--><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件使用过程中深入说明</span></h3>
<p class="MsoNormal" style="text-indent: 15.75pt;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">①</span><span lang="EN-US">. nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件语法检查方法</span><span lang="EN-US">:</span></p>
<div class="cnblogs_code">
<pre>    nginx -t </pre>
</div>
<p class="MsoNormal" style="text-indent: 15.75pt;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">②</span><span lang="EN-US">. nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件访问测试过程</span><span lang="EN-US">:</span></p>
<div class="cnblogs_code">
<pre>curl -v www.baidu.com</pre>
</div>
<p class="MsoNormal" style="text-indent: 15.75pt;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">③</span><span lang="EN-US">. nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件编译参数查看：</span></p>
<div class="cnblogs_code">
<pre>    nginx -V                 <--- 查看原有的编译参数信息</pre>
</div>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496798035"></a><!--[if !supportLists]--><span lang="EN-US">3.5 </span><!--[endif]--><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件静态页面编写过程</span></h2>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">编写配置文件</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="34465b5b40744351560406">[email&#160;protected]</a> www]<span style="color: #008000;">#</span><span style="color: #008000;"> cat ../../conf/nginx.conf</span>
worker_processes  1<span style="color: #000000;">;
events {
    worker_connections  </span>1024<span style="color: #000000;">;
}
http {
    include       mime.types;
    default_type  application</span>/octet-<span style="color: #000000;">stream;
    sendfile        on;
    keepalive_timeout  </span>65<span style="color: #000000;">;
    server {
        listen       </span>80<span style="color: #000000;">;
        server_name www.zinx.top;
        location </span>/<span style="color: #000000;"> {
            root   html</span>/<span style="color: #000000;">www;
            index  clsn.html index.html index.htm;
        }
        error_page   </span>500 502 503 504  /<span style="color: #000000;">50x.html;
        location </span>= /<span style="color: #000000;">50x.html {
            root   html;
        }
    }
}</span></pre>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">编写静态访问页面文件信息</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c5b7aaaab185b2a0a7f4">[email&#160;protected]</a> www]<span style="color: #008000;">#</span><span style="color: #008000;"> cat clsn.html  </span>
<html>
<meta charset=<span style="color: #800000;">"</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">"</span>>
<head>
<title>TEST</title>
</head>
<body><span style="color: #000000;">
惨绿少年
</span><table border=1>
<tr> <td>01</td> <td> </td> </tr>
<tr> <td>02</td> <td> </td> </tr>
 <tr> <td>03</td> <td> </td> </tr>
 </table>
<a href="-span" tppabs="http://clsn.io/clsn/<span" style="color: #800000;">"</span><span style="color: #800000;">http://blog.znix.top</span><span style="color: #800000;">"</span>>
<img src="-span" tppabs="http://clsn.io/clsn/<span" style="color: #800000;">"</span><span style="color: #800000;">znix.png</span><span style="color: #800000;">"</span> />
</a>
<script data-cfasync="false" src="email-decode.min.js" tppabs="http://clsn.io/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
</html></pre>
</div>
<h1><a name="_Toc496798036"></a><!--[if !supportLists]--><span lang="EN-US">第4章 </span><!--[endif]--><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">进阶</span><a name="_Toc496466418"></a><span lang="EN-US"> --</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">虚拟主机配置</span></h1>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496798037"></a><!--[if !supportLists]--><span lang="EN-US">4.1 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">【<span style="background: yellow; mso-highlight: yellow;">企业要求</span>】需要按照以前</span><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务编译安装过程安装</span></h2>
<p class="MsoNormal"><span lang="EN-US">1</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">、参看已安装服务的配置参数信息</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="96e4f9f9e2d6e1f3f4a6a7">[email&#160;protected]</a> sbin]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -V</span>
nginx version: nginx/1.10.2<span style="color: #000000;">
built by gcc </span>4.4.7 20120313 (Red Hat 4.4.7-18<span style="color: #000000;">) (GCC)
built with OpenSSL </span>1.0.1e-fips 11 Feb 2013<span style="color: #000000;">
TLS SNI support enabled
configure arguments: </span>--prefix=/application/nginx-1.10.2 --user=www --group=www --with-http_stub_status_module --with-http_ssl_module</pre>
</div>
<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp; -V </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">参数能显示软件的详细详细，安装配置参数</span></p>
<p class="MsoNormal"><span lang="EN-US">2</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">、按照配置参数进行部署</span></p>
<h3><a name="_Toc496798038"></a><!--[if !supportLists]--><span lang="EN-US">4.1.1 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">【<span style="background: yellow; mso-highlight: yellow;">语法检查</span>】检查配置文件</span></h3>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="fd8f929289bd8a989fcdcc">[email&#160;protected]</a> nginx]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -t</span>
nginx: the configuration file /application/nginx-1.10.2/conf/nginx.conf syntax <span style="color: #0000ff;">is</span><span style="color: #000000;"> ok
nginx: configuration file </span>/application/nginx-1.10.2/conf/nginx.conf test <span style="color: #0000ff;">is</span> successful</pre>
</div>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496798039"></a><a name="_Toc496466419"></a><!--[if !supportLists]--><span lang="EN-US">4.2 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">首页文件不存在</span><span lang="EN-US">--</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">利用</span><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务搭建文件共享服务器</span></h2>
<p class="MsoNormal" style="margin-left: 42.0pt;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">通过配置</span> <span class="ad"><span style="font-size: 10.5pt; mso-bidi-font-size: 11.0pt; mso-bidi-font-family: 'Times New Roman';">&nbsp;<span lang="EN-US">autoindex on; </span></span></span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">参数</span></p>
<p class="MsoNormal" style="margin-left: 21.0pt; text-indent: 21.0pt;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">使用</span><span lang="EN-US"> autoindex</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">参数，</span><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">能识别的直接显示，不识别的直接下载</span></p>
<p class="MsoNormal" style="margin-left: 21.0pt; text-indent: 21.0pt;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">配置完</span><span lang="EN-US"> autoindex on; </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">参数以后</span> <span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">会显示站点下的文件信息</span></p>
<p class="MsoNormal" style="margin-left: 21.0pt; text-indent: 21.0pt;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">对于</span><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">可以解析的资源会解析相应的内容</span></p>
<p class="MsoNormal" style="margin-left: 21.0pt; text-indent: 21.0pt;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">对于</span><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">不可以解析的资源会直接下载</span></p>
<h3><a name="_Toc496798040"></a><!--[if !supportLists]--><span lang="EN-US">4.2.1 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">进行</span><span lang="EN-US">curl</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">时，报</span><span lang="EN-US">403</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">错误，因为没有首页文件信息</span></h3>
<div class="cnblogs_code">
<pre> [<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="fa8895958eba8d9f98cac8">[email&#160;protected]</a> ~]<span style="color: #008000;">#</span><span style="color: #008000;"> echo 'web01 www' > /application/nginx/html/www/index.html</span></pre>
</div>
<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; <- </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">在虚拟主机指定的站点目录中创建首页文件</span><span lang="EN-US">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="61130e0e15211604035153">[email&#160;protected]</a> ~]<span style="color: #008000;">#</span><span style="color: #008000;"> curl www.nmtui.com</span>
<- 利用curl命令本地检测nginx配置是否成功；已经存在首页文件，测试成功</pre>
</div>
<h3><a name="_Toc496798041"></a><!--[if !supportLists]--><span lang="EN-US">4.2.2 </span><!--[endif]--><span lang="EN-US">autoindex on</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">参数实践</span></h3>
<p class="MsoNormal"><span lang="EN-US">1</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">）修改配置文件</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d1a3bebea591a6b4b3e1e0">[email&#160;protected]</a> www]<span style="color: #008000;">#</span><span style="color: #008000;"> cat ../../conf/nginx.conf</span>
worker_processes  1<span style="color: #000000;">;
events {
    worker_connections  </span>1024<span style="color: #000000;">;
}
http {
    include       mime.types;
    default_type  application</span>/octet-<span style="color: #000000;">stream;
    sendfile        on;
    keepalive_timeout  </span>65<span style="color: #000000;">;
    server {
        listen       </span>10.0.0.8:80<span style="color: #000000;">;
        server_name  www.nmtui.com;
        location </span>/<span style="color: #000000;"> {
            root   html</span>/<span style="color: #000000;">www;
            autoindex on;
        }
        error_page   </span>500 502 503 504  /<span style="color: #000000;">50x.html;
        location </span>= /<span style="color: #000000;">50x.html {
            root   html;
        }
    }
}</span></pre>
</div>
<p class="MsoNormal"><span lang="EN-US">2</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">）重启服务</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="63110c0c17231406015352">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -t</span>
nginx: the configuration file /application/nginx-1.10.2/conf/nginx.conf syntax <span style="color: #0000ff;">is</span><span style="color: #000000;"> ok
nginx: configuration file </span>/application/nginx-1.10.2/conf/nginx.conf test <span style="color: #0000ff;">is</span><span style="color: #000000;"> successful
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d9abb6b6ad99aebcbbe9e8">[email&#160;protected]</a> conf]</span><span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -s reload</span></pre>
</div>
<p class="MsoNormal"><span lang="EN-US">3</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">）访问测试</span>&nbsp;</p>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496798042"></a><a name="_Toc496466420"></a><!--[if !supportLists]--><span lang="EN-US">4.3 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; background: lime; mso-highlight: lime;">【概念】</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">虚拟主机的概念和类型</span></h2>
<p class="MsoNormal" style="text-indent: 21.0pt;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">虚拟主机使用的是特殊的软硬件技术，它把一台运行在因特网上的服务器主机分成一台台&ldquo;虚拟&rdquo;的主机，每台虚拟主机都可以是一个独立的网站，可以具有独立的域名，具有完整的</span><span lang="EN-US">Intemet</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务器功能（</span><span lang="EN-US">WWW</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">、</span><span lang="EN-US">FTP</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">、</span><span lang="EN-US">Email</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">等），同一台主机上的虚拟主机之间是完全独立的。从网站访问者来看，每一台虚拟主机和一台独立的主机完全一样。</span></p>
<p class="MsoNormal" style="text-indent: 21.0pt;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">利用虚拟主机，不用为每个要运行的网站提供一台单独的</span><span lang="EN-US">Nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务器或单独运行一组</span><span lang="EN-US">Nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">进程。虚拟主机提供了在同一台服务器、同一组</span><span lang="EN-US">Nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">进程上运行多个网站的功能。</span></p>
<p class="MsoNormal" style="text-indent: 21.0pt;"><span lang="EN-US">&nbsp;</span></p>
<h3><a name="_Toc496798043"></a><a name="_Toc496466421"></a><!--[if !supportLists]--><span lang="EN-US">4.3.1 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">虚拟主机概念</span></h3>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">所谓虚拟主机，在</span><span lang="EN-US">Web</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务里就是一个独立的网站站点，这个站点对应独立的域名（也可能是</span><span lang="EN-US">ip</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">或端口</span><span lang="EN-US">.</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">具有独立的程序及资源目录，可以独立地对外提供服务供用户访问。</span></p>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">这个独立的站点在配置里是由一定格式的标签段标记的，对于</span><span lang="EN-US">Apache</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件来说，一个虚拟主机的标签段通常被包含在以的此</span><span lang="EN-US"><VirtualHost></VirtualHost></span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">，而</span><span lang="EN-US">Nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">软件则使用一个</span><span lang="EN-US">server{}</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">标签来标示一个虚拟主机。一个</span><span lang="EN-US">Web</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务里可以有多个虚拟主机标签对，即可以同时支持多个虚拟主机站点。</span></p>
<h3><a name="_Toc496798044"></a><a name="_Toc496466422"></a><!--[if !supportLists]--><span lang="EN-US">4.3.2 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">虚拟主机类型</span></h3>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">常见的虚拟主机类型有如下几种</span></p>
<p class="MsoNormal" style="text-indent: 24.0pt; mso-char-indent-count: 2.0;"><strong><span lang="EN-US">1</span></strong><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">）基于域名的虚拟主机</span></strong></p>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">所谓基于域名的虚拟主机，意思就是通过不同的域名区分不同的虚拟主机，基于域名的虚拟主机是企业应用最广的虚拟主机类型，几乎所有对外提供服务的网站使用的都是基于域名的虚拟主机，例如</span><span lang="EN-US">: www.znix.top</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">。</span></p>
<p class="MsoNormal" style="text-indent: 24.0pt; mso-char-indent-count: 2.0;"><strong><span lang="EN-US">2</span></strong><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">）基于端口的虚拟主机</span><span lang="EN-US">&nbsp; </span></strong></p>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">同理，所谓基于端口的虚拟主机，意思就是通过不同的端口来区分不同的虚拟主机，此类虚拟主机对应的企业应用主要为公司内部网站，例如：一些不希望直接对外提供用户访问的网站后台等，访问基于端口的虚拟主机，地址里要带有端口，例如：</span><span lang="EN-US">http://blog.znix.top:80</span></p>
<p class="MsoNormal"><strong><span lang="EN-US">&nbsp;&nbsp;&nbsp; 3</span></strong><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">）基于</span><span lang="EN-US">IP</span></strong><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的虚拟主机</span></strong></p>
<p class="MsoNormal"><span lang="EN-US">&nbsp;</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">所谓基于</span><span lang="EN-US">IP</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的虚拟主机，意思是通过不同的</span><span lang="EN-US">IP</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">区分不同的虚拟主机，</span></p>
<h3><a name="_Toc496798045"></a><!--[if !supportLists]--><span style="mso-fareast-font-family: 'Courier New'; mso-bidi-font-family: 'Courier New'; background: lime; mso-highlight: lime;" lang="EN-US">4.3.3 </span><!--[endif]--><span style="background: lime; mso-highlight: lime;" lang="EN-US">Nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; background: lime; mso-highlight: lime;">配置虚拟主机的步骤如下（适合各类虚拟主机类型）</span></h3>
<p class="MsoNormal" style="margin-left: 12.0pt; mso-para-margin-left: 1.0gd;"><span lang="EN-US">1</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">）增加一个完整的</span><span lang="EN-US">server</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">标签段到结尾处。注意，要放在</span><span lang="EN-US">http</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的结束大括号前，也就是将</span><span lang="EN-US">server</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">标签段放入</span><span lang="EN-US">http</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">标签。</span></p>
<p class="MsoNormal" style="margin-left: 12.0pt; mso-para-margin-left: 1.0gd;"><span lang="EN-US">2)</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">更改</span><span lang="EN-US">server_name</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">及对应网页的</span><span lang="EN-US">root</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">根目录，如果需要其他参数，可以增加或修改。</span></p>
<p class="MsoNormal" style="margin-left: 12.0pt; mso-para-margin-left: 1.0gd;"><span lang="EN-US">3)</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">创建</span><span lang="EN-US">Seever_name</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">域名对应网页的根目录，并且建立测试文件，如果没有</span><span lang="EN-US">index</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">首页，访问会出现</span><span lang="EN-US">403</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">错误。</span></p>
<blockquote>
<p class="MsoNormal" style="margin-left: 12.0pt; mso-para-margin-left: 1.0gd;">&nbsp;&nbsp; &nbsp; 如果是apache软件，没有首页文件，默认会把站点目录下面的信息显示出来</p>
<p class="MsoNormal" style="margin-left: 12.0pt; mso-para-margin-left: 1.0gd;">&nbsp;&nbsp; &nbsp; nginx出403错误解决方式：http://clsn.blog.51cto.com/2561410/1633952</p>
<p class="MsoNormal" style="margin-left: 12.0pt; mso-para-margin-left: 1.0gd;">&nbsp;&nbsp; &nbsp; autoindex on;#<==当找不到首页文件时，会展示目录结构，这个功能一般不要用除非有需求。</p>
<p class="MsoNormal" style="margin-left: 12.0pt; mso-para-margin-left: 1.0gd;">&nbsp;</p>
<p class="a3">&nbsp;<strong>&nbsp;&nbsp; PS:显示的目录结构中，有些信息点击就是下载，有的点击就是显示，因为扩展名称不一样</strong></p>
<p class="MsoNormal" style="margin-left: 12.0pt; mso-para-margin-left: 1.0gd;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; 根本在于nginx软件是否能够进行解析</p>
<p class="MsoNormal" style="margin-left: 12.0pt; mso-para-margin-left: 1.0gd;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; nginx是否解析：</p>
<p class="MsoNormal" style="margin-left: 12.0pt; mso-para-margin-left: 1.0gd;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; 1.htmljpg认识显示出内容</p>
<p class="MsoNormal" style="margin-left: 12.0pt; mso-para-margin-left: 1.0gd;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; 2.不认识不解析便直接下载</p>
</blockquote>
<p class="MsoNormal" style="margin-left: 12.0pt; mso-para-margin-left: 1.0gd;"><span lang="EN-US">4)</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">检査</span><span lang="EN-US">Nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">配置文件语法，平滑重启</span><span lang="EN-US">Nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务，快速检査启动结果。</span></p>
<p class="MsoNormal" style="margin-left: 12.0pt; mso-para-margin-left: 1.0gd;"><span lang="EN-US">5)</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">在客户端对</span><span lang="EN-US">server_name</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">处配置的域名做</span><span lang="EN-US">host</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">解析或</span><span lang="EN-US">DNS</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">配置，并检査（</span><span lang="EN-US">ping</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">域名看返回的</span><span lang="EN-US">IP</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">是否正确）。</span></p>
<p class="MsoNormal" style="margin-left: 12.0pt; mso-para-margin-left: 1.0gd;"><span lang="EN-US">6)</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">在</span><span lang="EN-US">Win32</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">浏览器中输入地址访问，或者在</span><span lang="EN-US">Linux</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">客户端做</span><span lang="EN-US">hosts</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">解析，用</span><span lang="EN-US">wget</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">或</span><span lang="EN-US">curl</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">接地址访问。</span></p>
<p class="MsoNormal" style="margin-left: 12.0pt; mso-para-margin-left: 1.0gd;"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">7）在服务重启或关闭之前先进行一次配置文件检查&nbsp;/application/ngnix/sbin/nginx -t</span></strong></p>
<p class="MsoNormal" style="margin-left: 7.1pt;"><strong><span lang="EN-US">Nginx</span></strong><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">虚拟主机的官方帮助网址为：</span></strong><span lang="EN-US">http://Nginx.org/en/docs/http/requestj3rocessing.html</span></p>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496798046"></a><!--[if !supportLists]--><span lang="EN-US">4.4 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; background: yellow; mso-highlight: yellow;">【实践】</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">虚拟主机配置</span></h2>
<h3><a name="_Toc496798047"></a><!--[if !supportLists]--><span lang="EN-US">4.4.1 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">基于域名的虚拟主机</span></h3>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; background: yellow; mso-highlight: yellow;">修改配置文件</span></strong></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d0a2bfbfa490a7b5b2e0e1">[email&#160;protected]</a> ~]<span style="color: #008000;">#</span><span style="color: #008000;"> cat  /application/nginx/conf/nginx.conf</span>
worker_processes  1<span style="color: #000000;">;
events {
    worker_connections  </span>1024<span style="color: #000000;">;
}
http {
    include       mime.types;
    default_type  application</span>/octet-<span style="color: #000000;">stream;
    sendfile        on;
    keepalive_timeout  </span>65<span style="color: #000000;">;
    server {
        listen       </span>80<span style="color: #000000;">;
        server_name  www.nmtui.com;
        location </span>/<span style="color: #000000;"> {
            root   html</span>/<span style="color: #000000;">www;
            index  index.html index.htm;
        }
        error_page   </span>500 502 503 504  /<span style="color: #000000;">50x.html;
        location </span>= /<span style="color: #000000;">50x.html {
            root   html;
        }
    }
    server {
        listen       </span>80<span style="color: #000000;">;
        server_name  bbs.nmtui.com;
        location </span>/<span style="color: #000000;"> {
            root   html</span>/<span style="color: #000000;">bbs;
            index  index.html index.htm;
        }
        error_page   </span>500 502 503 504  /<span style="color: #000000;">50x.html;
        location </span>= /<span style="color: #000000;">50x.html {
            root   html;
        }
    }
    server {
        listen       </span>80<span style="color: #000000;">;
        server_name  blog.nmtui.com;
        location </span>/<span style="color: #000000;"> {
            root   html</span>/<span style="color: #000000;">blog;
            index  index.html index.htm;
        }
        error_page   </span>500 502 503 504  /<span style="color: #000000;">50x.html;
        location </span>= /<span style="color: #000000;">50x.html {
            root   html;
        }
    }
}</span></pre>
</div>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">检查配置信息是否正确</span></strong></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="bdcfd2d2c9fdcad8df8d8c">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -t</span>
nginx: the configuration file /application/nginx-1.10.2/conf/nginx.conf syntax <span style="color: #0000ff;">is</span><span style="color: #000000;"> ok
nginx: configuration file </span>/application/nginx-1.10.2/conf/nginx.conf test <span style="color: #0000ff;">is</span> successful</pre>
</div>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">重启服务</span></strong></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="e99b86869da99e8c8bd9d8">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -s reload</span></pre>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">注意：服务没有启动的时候不能使用平滑重启</span></p>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">创建站点目录</span></strong></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="b3c1dcdcc7f3c4d6d18382">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> for name in www blog bbs ;do  mkdir ../html/$name -p ;done</span></pre>
</div>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">创建主页文件</span></strong></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="a4d6cbcbd0e4d3c1c69495">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> for name in www blog bbs ;do echo "web01 $name" >../html/$name/index.html  ;done</span></pre>
</div>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">检查主页内容信息</span></strong></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="6614090912261103045657">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> for name in www blog bbs ;do  cat ../html/$name/index.html ;done</span>
<span style="color: #000000;">web01 www
web01 blog
web01 bbs</span></pre>
</div>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">修改主机</span><span lang="EN-US">hosts</span></strong><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">文件</span></strong></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="91e3fefee5d1e6f4f3a1a0">[email&#160;protected]</a> ~]<span style="color: #008000;">#</span><span style="color: #008000;"> vim /etc/hosts</span>
172.16.1.8    web01 www.nmtui.com blog.nmtui.com bbs.nmtui.com</pre>
</div>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">测试</span></strong></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="05776a6a71457260673534">[email&#160;protected]</a> ~]<span style="color: #008000;">#</span><span style="color: #008000;"> curl  www.nmtui.com</span>
<span style="color: #000000;">web01 www
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="a6d4c9c9d2e6d1c3c49697">[email&#160;protected]</a> </span>~]<span style="color: #008000;">#</span><span style="color: #008000;"> curl  blog.nmtui.com</span>
<span style="color: #000000;">web01 blog
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="2755484853675042451716">[email&#160;protected]</a> </span>~]<span style="color: #008000;">#</span><span style="color: #008000;"> curl  bbs.nmtui.com</span>
web01 bbs</pre>
</div>
<h3><a name="_Toc496798048"></a><!--[if !supportLists]--><span lang="EN-US">4.4.2 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">基于端口的虚拟主机</span></h3>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">修改配置文件内容</span></strong></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="82f0ededf6c2f5e7e0b2b3">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> vim nginx.conf</span>
<span style="color: #000000;">    server {
        listen       </span>81<span style="color: #000000;">;
        server_name  bbs.nmtui.com;
        location </span>/<span style="color: #000000;"> {
            root   html</span>/<span style="color: #000000;">bbs;
            index  index.html index.htm;
        }
        error_page   </span>500 502 503 504  /<span style="color: #000000;">50x.html;
        location </span>= /<span style="color: #000000;">50x.html {
            root   html;
</span><span style="color: #800000;">"</span><span style="color: #800000;">nginx.conf</span><span style="color: #800000;">"</span> 46L, 1098C written  </pre>
</div>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">重启服务</span></strong></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="7604191902360113144647">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -t</span>
nginx: the configuration file /application/nginx-1.10.2/conf/nginx.conf syntax <span style="color: #0000ff;">is</span><span style="color: #000000;"> ok
nginx: configuration file </span>/application/nginx-1.10.2/conf/nginx.conf test <span style="color: #0000ff;">is</span><span style="color: #000000;"> successful
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="80f2efeff4c0f7e5e2b0b1">[email&#160;protected]</a> conf]</span><span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -s reload</span></pre>
</div>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">检查端口信息</span></strong></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c9bba6a6bd89beacabf9f8">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> netstat -lntup |grep ng</span>
tcp        0      0 0.0.0.0:80                  0.0.0.0:*                   LISTEN      40110/<span style="color: #000000;">nginx        
tcp        0      0 </span>0.0.0.0:81                  0.0.0.0:*                   LISTEN      40110/nginx  </pre>
</div>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">测试访问</span></strong></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="3745585843774052550706">[email&#160;protected]</a> ~]<span style="color: #008000;">#</span><span style="color: #008000;"> curl  bbs.nmtui.com:81</span>
web01 bbs</pre>
</div>
<h3><a name="_Toc496798049"></a><!--[if !supportLists]--><span lang="EN-US">4.4.3 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">基于</span><span lang="EN-US">IP</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的虚拟主机</span></h3>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; color: red;">注意：</span></strong> &nbsp;</p>
<div style="mso-element: para-border-div; border: solid windowtext 2.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt; mso-border-shadow: yes; background: #F2F2F2; mso-shading: windowtext; mso-pattern: gray-5 auto; margin-left: 42.5pt; margin-right: 69.6pt;">
<p class="a3" style="margin: 1pt 0cm 1pt 42.5pt; text-indent: -42.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">采用基于</span><span lang="EN-US">IP</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">的虚拟主机，配置文件修改后要重启（</span><span lang="EN-US">-s stop</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">）</span></p>
<p class="a3" style="margin: 1pt 0cm 1pt 42.5pt; text-indent: -42.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">配置和</span><span lang="EN-US">IP</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">地址配置相关的都要采用（</span><span lang="EN-US">-s stop</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">）重启，不能够使用软重启的方式</span></p>
</div>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">修改配置文件</span></strong></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="2e5c41415a6e594b4c1e1f">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> cat nginx.conf</span>
worker_processes  1<span style="color: #000000;">;
events {
    worker_connections  </span>1024<span style="color: #000000;">;
}
http {
    include       mime.types;
    default_type  application</span>/octet-<span style="color: #000000;">stream;
    sendfile        on;
    keepalive_timeout  </span>65<span style="color: #000000;">;
    server {
        listen       </span>10.0.0.8:80<span style="color: #000000;">;
        server_name  www.nmtui.com;
        location </span>/<span style="color: #000000;"> {
            root   html</span>/<span style="color: #000000;">www;
            index  index.html index.htm;
        }
        error_page   </span>500 502 503 504  /<span style="color: #000000;">50x.html;
        location </span>= /<span style="color: #000000;">50x.html {
            root   html;
        }
    }
}</span></pre>
</div>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">检查配置文件格式</span></strong></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="22504d4d56625547401213">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -t</span>
nginx: the configuration file /application/nginx-1.10.2/conf/nginx.conf syntax <span style="color: #0000ff;">is</span><span style="color: #000000;"> ok
nginx: configuration file </span>/application/nginx-1.10.2/conf/nginx.conf test <span style="color: #0000ff;">is</span> successful</pre>
</div>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">重启服务，注意使用的是<span style="color: red;">直接重启</span>的方式</span><span lang="EN-US">&nbsp; </span></strong></p>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; color: red;">只要</span><span style="color: red;" lang="EN-US">nginx</span></strong><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; color: red;">配置文件中涉及到</span><span style="color: red; background: yellow; mso-highlight: yellow;" lang="EN-US">IP</span></strong><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; color: red;">地址的更改只能正真的重启才生效</span></strong></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="84f6ebebf0c4f3e1e6b4b5">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -s stop</span>
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="3b4954544f7b4c5e590b0a">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx</span>
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="7604191902360113144647">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> netstat -lntup |grep ng</span>
tcp        0      0 10.0.0.8:80                 0.0.0.0:*                   LISTEN      40592/nginx   </pre>
</div>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">访问测试</span></strong></p>
<p class="MsoNormal" style="text-align: center;" align="center">&nbsp;</p>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496798050"></a><!--[if !supportLists]--><span lang="EN-US">4.5 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; background: yellow; mso-highlight: yellow;">【规范化配置】</span><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">配置文件企业规范化</span></h2>
<h3><a name="_Toc496798051"></a><!--[if !supportLists]--><span lang="EN-US">4.5.1 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">第一个里程碑：</span><span lang="EN-US">&nbsp; </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">创建虚拟主机配置文件存储目录</span></h3>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5a2835352e1a2d3f386a6b">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> pwd</span>
/application/nginx/<span style="color: #000000;">conf
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="483a27273c083f2d2a7879">[email&#160;protected]</a> conf]</span><span style="color: #008000;">#</span><span style="color: #008000;"> mkdir extra</span></pre>
</div>
<h3><a name="_Toc496798052"></a><!--[if !supportLists]--><span lang="EN-US">4.5.2 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">第二个里程碑：</span> <span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">生产虚拟主机配置文件</span></h3>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="abd9c4c4dfebdccec99b9a">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> sed -n '10,21p' nginx.conf > extra/www.conf</span>
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="1f6d70706b5f687a7d2f2e">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> sed -n '22,33p' nginx.conf > extra/bbs.conf</span>
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="deacb1b1aa9ea9bbbceeef">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> sed -n '34,45p' nginx.conf > extra/blog.conf</span></pre>
</div>
<h3><a name="_Toc496798053"></a><!--[if !supportLists]--><span lang="EN-US">4.5.3 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">第三个里程碑：</span> <span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">修改</span><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">配置文件使之加载识别虚拟主机配置文件</span></h3>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="a8dac7c7dce8dfcdca9899">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> cat  nginx.conf</span>
worker_processes  1<span style="color: #000000;">;
events {
    worker_connections  </span>1024<span style="color: #000000;">;
}
http {
    include       mime.types;
    default_type  application</span>/octet-<span style="color: #000000;">stream;
    sendfile        on;
    keepalive_timeout  </span>65<span style="color: #000000;">;
    include extra</span>/*<span style="color: #000000;">;
}</span></pre>
</div>
<h3><a name="_Toc496798054"></a><!--[if !supportLists]--><span lang="EN-US">4.5.4 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">重启服务</span></h3>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="196b76766d596e7c7b2928">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -t</span>
nginx: the configuration file /application/nginx-1.10.2/conf/nginx.conf syntax <span style="color: #0000ff;">is</span><span style="color: #000000;"> ok
nginx: configuration file </span>/application/nginx-1.10.2/conf/nginx.conf test <span style="color: #0000ff;">is</span> successful</pre>
</div>
<h3><a name="_Toc496798055"></a><!--[if !supportLists]--><span lang="EN-US">4.5.5 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">检查监听端口</span></h3>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="3f4d50504b7f485a5d0f0e">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> netstat -lntup |grep ng</span>
tcp        0      0 0.0.0.0:80           0.0.0.0:*       LISTEN      40714/nginx       </pre>
</div>
<h3><a name="_Toc496798056"></a><!--[if !supportLists]--><span lang="EN-US">4.5.6 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">查看配置文件的加载顺序</span></h3>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="790b16160d390e1c1b4948">[email&#160;protected]</a> logs]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -T</span></pre>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">参数说明：</span></p>
<p class="MsoNormal"><span lang="EN-US">-T&nbsp; &nbsp;: test configuration, dump it and exit</span></p>
<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp; </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">测试配置文件，并且加载一遍，并显示加载的顺序</span></p>
<h3><a name="_Toc496798057"></a><!--[if !supportLists]--><span lang="EN-US">4.5.7 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; background: darkcyan; mso-highlight: darkcyan;">【优化】</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">调整</span><span lang="EN-US"> inculde</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的加载顺序，指定第一个加载为</span><span lang="EN-US">conf</span></h3>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="7c0e1313083c0b191e4c4d">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> vim nginx.conf</span>
worker_processes  1<span style="color: #000000;">;
events {
    worker_connections  </span>1024<span style="color: #000000;">;
}
http {
    include       mime.types;
    default_type  application</span>/octet-<span style="color: #000000;">stream;
    sendfile        on;
    keepalive_timeout  </span>65<span style="color: #000000;">;
    include extra</span>/<span style="color: #000000;">www.conf;
    include extra</span>/<span style="color: #000000;">bbs.conf;
    include extra</span>/<span style="color: #000000;">blog.conf;
}</span></pre>
</div>
<h3><a name="_Toc496798058"></a><!--[if !supportLists]--><span lang="EN-US">4.5.8 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">重启服务</span></h3>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="196b76766d596e7c7b2928">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -t</span>
nginx: the configuration file /application/nginx-1.10.2/conf/nginx.conf syntax <span style="color: #0000ff;">is</span><span style="color: #000000;"> ok
nginx: configuration file </span>/application/nginx-1.10.2/conf/nginx.conf test <span style="color: #0000ff;">is</span><span style="color: #000000;"> successful
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="493b26263d093e2c2b7978">[email&#160;protected]</a> conf]</span><span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -s reload</span></pre>
</div>
<h3><a name="_Toc496798059"></a><!--[if !supportLists]--><span lang="EN-US">4.5.9 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">说明</span><span lang="EN-US">;</span></h3>
<p class="MsoNormal" style="margin-left: 42.0pt;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">这样的配置能够让用户通过</span><span lang="EN-US">IP</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">访问的时候，访问到的网站是</span><span lang="EN-US">www</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的网站。</span></p>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496798060"></a><!--[if !supportLists]--><span lang="EN-US">4.6 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">别名的配置</span></h2>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">在配置文件中添加别名</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="394b56564d794e5c5b0908">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> vim extra/www.conf</span>
<span style="color: #000000;">    server {
        listen       </span>80<span style="color: #000000;">;
        server_name  www.nmtui.com nmtui.cn;
        location </span>/<span style="color: #000000;"> {
            root   html</span>/<span style="color: #000000;">www;
            index  index.html index.htm;
        }
        error_page   </span>500 502 503 504  /<span style="color: #000000;">50x.html;
        location </span>= /<span style="color: #000000;">50x.html {
            root   html;
        }
    }
}</span></pre>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">重启服务</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="02706d6d76427567603233">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -s reload</span></pre>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">修改</span><span lang="EN-US">hosts </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">进行访问测试</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="fc8e939388bc8b999ecccd">[email&#160;protected]</a> www]<span style="color: #008000;">#</span><span style="color: #008000;"> curl  nmtui.cn</span>
web01 www</pre>
</div>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496798061"></a><!--[if !supportLists]--><span style="mso-fareast-font-family: 'Courier New'; mso-bidi-font-family: 'Courier New'; background: lime; mso-highlight: lime;" lang="EN-US">4.7 </span><!--[endif]--><span style="background: lime; mso-highlight: lime;" lang="EN-US">status </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; background: lime; mso-highlight: lime;">状态模块</span></h2>
<h3><a name="_Toc496798062"></a><!--[if !supportLists]--><span lang="EN-US">4.7.1 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">状态模块的配置</span></h3>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">修改配置文件，添加三</span><span lang="EN-US">status</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">模块</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="ddafb2b2a99daab8bfedec">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> vim nginx.conf</span>
worker_processes  1<span style="color: #000000;">;
events {
    worker_connections  </span>1024<span style="color: #000000;">;
}
http {
    include       mime.types;
    default_type  application</span>/octet-<span style="color: #000000;">stream;
    sendfile        on;
    keepalive_timeout  </span>65<span style="color: #000000;">;
          server{
          listen  </span>80<span style="color: #000000;">;
          server_name  status.nmtui.com;
          location </span>/<span style="color: #000000;"> {
            stub_status on;
            access_log   off;
          }
        }
    include extra</span>/<span style="color: #000000;">www.conf;
    include extra</span>/<span style="color: #000000;">bbs.conf;
    include extra</span>/<span style="color: #000000;">blog.conf;
}</span></pre>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">检查配置文件是否正确</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="681a07071c281f0d0a5859">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -t</span>
nginx: the configuration file /application/nginx-1.10.2/conf/nginx.conf syntax <span style="color: #0000ff;">is</span><span style="color: #000000;"> ok
nginx: configuration file </span>/application/nginx-1.10.2/conf/nginx.conf test <span style="color: #0000ff;">is</span> successful</pre>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">重启服务</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="8dffe2e2f9cdfae8efbdbc">[email&#160;protected]</a> conf]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -s reload</span></pre>
</div>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">访问测试</span></strong>&nbsp;</p>
<p class="MsoNormal" style="text-indent: 21.0pt;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">说明：</span></p>
<p class="MsoNormal" style="text-indent: 21.0pt;">&nbsp;</p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">以上页面内容信息主要会被zabbix监控服务调取，形成图像信息
根据图形信息，从而判断nginx网站服务用户访问量情况</span></pre>
</div>
<p class="MsoNormal" style="text-indent: 21.0pt;">&nbsp;</p>
<h3><a name="_Toc496798063"></a><!--[if !supportLists]--><span lang="EN-US">4.7.2 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">状态模块说明</span></h3>
<table class="MsoTable15Grid4Accent5" style="border-width: initial; border-style: none; border-color: initial;" border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td style="width: 169.85pt; border-top-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-top-color: #4bacc6; border-bottom-color: #4bacc6; border-left-color: #4bacc6; border-right: none; background: #4bacc6; padding: 0cm 5.4pt;" valign="top" width="226">
<p class="MsoNormal" style="text-align: center; mso-yfti-cnfc: 5;" align="center"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; color: white; mso-themecolor: background1;">参数</span></strong></p>
</td>
<td style="width: 352.95pt; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-color: #4bacc6; border-right-color: #4bacc6; border-bottom-color: #4bacc6; border-left: none; background: #4bacc6; padding: 0cm 5.4pt;" valign="top" width="471">
<p class="MsoNormal" style="text-align: center; mso-yfti-cnfc: 1;" align="center"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; color: white; mso-themecolor: background1;">参数说明</span></strong></p>
</td>
</tr>
<tr>
<td style="width: 169.85pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #92cddc; border-bottom-color: #92cddc; border-left-color: #92cddc; border-top: none; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="226">
<p class="MsoNormal"><strong><span lang="EN-US">Active connections</span></strong></p>
</td>
<td style="width: 352.95pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #92cddc; border-right-width: 1pt; border-right-color: #92cddc; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="471">
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">当前的活动客户端连接数量</span></p>
</td>
</tr>
<tr>
<td style="width: 169.85pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #92cddc; border-bottom-color: #92cddc; border-left-color: #92cddc; border-top: none; padding: 0cm 5.4pt;" valign="top" width="226">
<p class="MsoNormal"><strong><span lang="EN-US">accepts&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></strong></p>
</td>
<td style="width: 352.95pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #92cddc; border-right-width: 1pt; border-right-color: #92cddc; padding: 0cm 5.4pt;" valign="top" width="471">
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">接受客户端连接的总数</span></p>
</td>
</tr>
<tr>
<td style="width: 169.85pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #92cddc; border-bottom-color: #92cddc; border-left-color: #92cddc; border-top: none; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="226">
<p class="MsoNormal"><strong><span lang="EN-US">handled&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></strong></p>
</td>
<td style="width: 352.95pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #92cddc; border-right-width: 1pt; border-right-color: #92cddc; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="471">
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">处理的连接总数</span></p>
</td>
</tr>
<tr>
<td style="width: 169.85pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #92cddc; border-bottom-color: #92cddc; border-left-color: #92cddc; border-top: none; padding: 0cm 5.4pt;" valign="top" width="226">
<p class="MsoNormal"><strong><span lang="EN-US">requests&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></strong></p>
</td>
<td style="width: 352.95pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #92cddc; border-right-width: 1pt; border-right-color: #92cddc; padding: 0cm 5.4pt;" valign="top" width="471">
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">客户端请求的总数</span></p>
</td>
</tr>
<tr>
<td style="width: 169.85pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #92cddc; border-bottom-color: #92cddc; border-left-color: #92cddc; border-top: none; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="226">
<p class="MsoNormal"><strong><span lang="EN-US">Reading&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></strong></p>
</td>
<td style="width: 352.95pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #92cddc; border-right-width: 1pt; border-right-color: #92cddc; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="471">
<p class="MsoNormal"><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">正在读请求头的当前连接数。</span></p>
</td>
</tr>
<tr>
<td style="width: 169.85pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #92cddc; border-bottom-color: #92cddc; border-left-color: #92cddc; border-top: none; padding: 0cm 5.4pt;" valign="top" width="226">
<p class="MsoNormal"><strong><span lang="EN-US">Writing&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></strong></p>
</td>
<td style="width: 352.95pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #92cddc; border-right-width: 1pt; border-right-color: #92cddc; padding: 0cm 5.4pt;" valign="top" width="471">
<p class="MsoNormal"><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">正在将响应写回客户端的当前连接数。</span></p>
</td>
</tr>
<tr>
<td style="width: 169.85pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #92cddc; border-bottom-color: #92cddc; border-left-color: #92cddc; border-top: none; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="226">
<p class="MsoNormal"><strong><span lang="EN-US">Waiting&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></strong></p>
</td>
<td style="width: 352.95pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #92cddc; border-right-width: 1pt; border-right-color: #92cddc; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="471">
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">当前空闲客户端连接数等待一个请求。</span></p>
</td>
</tr>
</tbody>
</table>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496798064"></a><!--[if !supportLists]--><span lang="EN-US">4.8 </span><!--[endif]--><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的日志功能</span></h2>
<p class="MsoNormal"><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的两种日志种类</span></p>
<p class="MsoNormal" style="text-indent: 21.0pt;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">错误日志：记录</span><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">运行错误情况信息</span></p>
<p class="MsoNormal" style="text-indent: 21.0pt;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">访问日志：记录用户访问日志信息</span></p>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">官方说明：&nbsp;http://nginx.org/en/docs/ngx_core_module.html#error_log</span></p>
<h3><a name="_Toc496798065"></a><!--[if !supportLists]--><span lang="EN-US">4.8.1 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">定义错误日志信息</span></h3>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">系统默认配置</span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">#</span><span style="color: #008000;">error_log  logs/error.log;</span><span style="color: #008000;">
#</span><span style="color: #008000;">error_log  logs/error.log  notice;</span><span style="color: #008000;">
#</span><span style="color: #008000;">error_log  logs/error.log  info;</span></pre>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">配置错误日志，修改主配置文件</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="e2908d8d96a2958780d2d3">[email&#160;protected]</a> logs]<span style="color: #008000;">#</span><span style="color: #008000;"> vim ../conf/nginx.conf</span>
worker_processes  1<span style="color: #000000;">;
error_log  logs</span>/<span style="color: #000000;">error.log  error;
events {
    worker_connections  </span>1024<span style="color: #000000;">;
}
http {
    include       mime.types;
    default_type  application</span>/octet-<span style="color: #000000;">stream;
    sendfile        on;
    keepalive_timeout  </span>65<span style="color: #000000;">;
          server{
          listen  </span>80<span style="color: #000000;">;
          server_name  status.nmtui.com;
          location </span>/<span style="color: #000000;"> {
            stub_status on;
            access_log   off;
          }
        }
    include extra</span>/<span style="color: #000000;">www.conf;
    include extra</span>/<span style="color: #000000;">bbs.conf;
    include extra</span>/<span style="color: #000000;">blog.conf;
}</span></pre>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">重启服务</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="0f7d60607b4f786a6d3f3e">[email&#160;protected]</a> logs]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -t</span>
nginx: the configuration file /application/nginx-1.10.2/conf/nginx.conf syntax <span style="color: #0000ff;">is</span><span style="color: #000000;"> ok
nginx: configuration file </span>/application/nginx-1.10.2/conf/nginx.conf test <span style="color: #0000ff;">is</span><span style="color: #000000;"> successful
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="b4c6dbdbc0f4c3d1d68485">[email&#160;protected]</a> logs]</span><span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -s reload</span></pre>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">查看错误日志信息</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="65170a0a11251200075554">[email&#160;protected]</a> logs]<span style="color: #008000;">#</span><span style="color: #008000;"> tail  error.log</span>
2017/10/25 11:41:55 [error] 40842<span style="color: #008000;">#</span><span style="color: #008000;">0: *7 open() "/application/nginx-1.10.2/html/www/favicon.ico" failed (2: No such file or directory), client: 10.0.0.1, server: www.nmtui.com, request: "GET /favicon.ico HTTP/1.1", host: "www.nmtui.com", referrer: "http://www.nmtui.com/"</span></pre>
</div>
<h3><a name="_Toc496798066"></a><!--[if !supportLists]--><span lang="EN-US">4.8.2 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">访问日志配置</span></h3>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">系统默认配置</span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">#</span><span style="color: #008000;">log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '</span><span style="color: #008000;">
#</span><span style="color: #008000;">                  '$status $body_bytes_sent "$http_referer" '</span><span style="color: #008000;">
#</span><span style="color: #008000;">                  '"$http_user_agent" "$http_x_forwarded_for"';</span>
 
<span style="color: #008000;">#</span><span style="color: #008000;">access_log  logs/access.log  main;</span></pre>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">修改访问日志配置</span><span lang="EN-US">--</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">修改主配置文件</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="85f7eaeaf1c5f2e0e7b5b4">[email&#160;protected]</a> www]<span style="color: #008000;">#</span><span style="color: #008000;"> cat ../../conf/nginx.conf</span>
worker_processes  1<span style="color: #000000;">;
error_log  logs</span>/<span style="color: #000000;">error.log  error;
events {
    worker_connections  </span>1024<span style="color: #000000;">;
}
http {
    include       mime.types;
    default_type  application</span>/octet-<span style="color: #000000;">stream;
    sendfile        on;
    keepalive_timeout  </span>65<span style="color: #000000;">;
    log_format  main  </span><span style="color: #800000;">'</span><span style="color: #800000;">$remote_addr - $remote_user [$time_local] "$request" </span><span style="color: #800000;">'</span>
                  <span style="color: #800000;">'</span><span style="color: #800000;">$status $body_bytes_sent "$http_referer" </span><span style="color: #800000;">'</span>
                  <span style="color: #800000;">'</span><span style="color: #800000;">"$http_user_agent" "$http_x_forwarded_for"</span><span style="color: #800000;">'</span><span style="color: #000000;">;
 
          server{
          listen  </span>80<span style="color: #000000;">;
          server_name  status.nmtui.com;
          location </span>/<span style="color: #000000;"> {
            stub_status on;
            access_log   off;
          }
        }
    include extra</span>/<span style="color: #000000;">www.conf;
    include extra</span>/<span style="color: #000000;">bbs.conf;
    include extra</span>/<span style="color: #000000;">blog.conf;
}</span></pre>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">修改访问日志配置</span><span lang="EN-US">--</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">修改虚拟主机配置文件</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="34465b5b40744351560405">[email&#160;protected]</a> www]<span style="color: #008000;">#</span><span style="color: #008000;"> cat /application/nginx/conf/extra/www.conf</span>
<span style="color: #000000;">    server {
        listen       </span>80<span style="color: #000000;">;
        server_name  www.nmtui.com nmtui.cn;
        location </span>/<span style="color: #000000;"> {
            root   html</span>/<span style="color: #000000;">www;
            index  index.html index.htm;
        }
　　　　 access_log  logs</span>/<span style="color: #000000;">access_www.log  main;
        error_page   </span>500 502 503 504  /<span style="color: #000000;">50x.html;
        location </span>= /<span style="color: #000000;">50x.html {
            root   html;
        }
    }</span></pre>
</div>
<h3><a name="_Toc496798067"></a><!--[if !supportLists]--><span lang="EN-US">4.8.3 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; color: red;">【重要】</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">访问日志信息说明</span></h3>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">日志内容</span></p>
<div class="cnblogs_code">
<pre>10.0.0.1 - - [22/Oct/2017:16:04:54 +0800] <span style="color: #800000;">"</span><span style="color: #800000;">GET / HTTP/1.1</span><span style="color: #800000;">"</span> 304 0 <span style="color: #800000;">"</span><span style="color: #800000;">-</span><span style="color: #800000;">"</span> <span style="color: #800000;">"</span><span style="color: #800000;">Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.36</span><span style="color: #800000;">"</span> <span style="color: #800000;">"</span><span style="color: #800000;">-</span><span style="color: #800000;">"</span></pre>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">配置文件</span></p>
<div class="cnblogs_code">
<pre><span style="color: #800000;">'</span><span style="color: #800000;">$remote_addr - $remote_user [$time_local] "$request" </span><span style="color: #800000;">'</span>
<span style="color: #800000;">'</span><span style="color: #800000;">$status $body_bytes_sent "$http_referer" </span><span style="color: #800000;">'</span>
<span style="color: #800000;">'</span><span style="color: #800000;">"$http_user_agent" "$http_x_forwarded_for"</span><span style="color: #800000;">'</span>;</pre>
</div>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; background: lime; mso-highlight: lime;">日志信息说明</span></strong></p>
<table class="MsoTable15Grid5DarkAccent5" style="border-width: initial; border-style: none; border-color: initial;" border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td style="width: 162.05pt; border-top-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-top-color: white; border-bottom-color: white; border-left-color: white; border-right: none; background: #4bacc6; padding: 0cm 5.4pt;" valign="top" width="216">
<p class="MsoNormal" style="text-align: center; mso-yfti-cnfc: 5;" align="center"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; color: white; mso-themecolor: background1;">参数</span></strong></p>
</td>
<td style="width: 226.35pt; border-top-width: 1pt; border-top-color: white; border-left: none; border-bottom-width: 1pt; border-bottom-color: white; border-right: none; background: #4bacc6; padding: 0cm 5.4pt;" valign="top" width="302">
<p class="MsoNormal" style="text-align: center; mso-yfti-cnfc: 1;" align="center"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; color: white; mso-themecolor: background1;">日志内容</span></strong></p>
</td>
<td style="width: 134.4pt; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-color: white; border-right-color: white; border-bottom-color: white; border-left: none; background: #4bacc6; padding: 0cm 5.4pt;" valign="top" width="179">
<p class="MsoNormal" style="text-align: center; mso-yfti-cnfc: 1;" align="center"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; color: white; mso-themecolor: background1;">含义</span></strong></p>
</td>
</tr>
<tr>
<td style="width: 162.05pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: white; border-bottom-color: white; border-left-color: white; border-top: none; background: #00b0f0; padding: 0cm 5.4pt;" width="216">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; mso-yfti-cnfc: 68;"><strong><span lang="EN-US">$remote_addr</span></strong></p>
</td>
<td style="width: 226.35pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: white; border-right-width: 1pt; border-right-color: white; background: #b6dde8; padding: 0cm 5.4pt;" valign="top" width="302">
<p class="MsoNormal"><span lang="EN-US">10.0.0.1</span></p>
</td>
<td style="width: 134.4pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: white; border-right-width: 1pt; border-right-color: white; background: #b6dde8; padding: 0cm 5.4pt;" valign="top" width="179">
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">客户端</span><span lang="EN-US">ip</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">地址</span></p>
</td>
</tr>
<tr>
<td style="width: 162.05pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: white; border-bottom-color: white; border-left-color: white; border-top: none; background: #00b0f0; padding: 0cm 5.4pt;" width="216">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; mso-yfti-cnfc: 4;"><strong><span lang="EN-US">-</span></strong></p>
</td>
<td style="width: 226.35pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: white; border-right-width: 1pt; border-right-color: white; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="302">
<p class="MsoNormal"><span lang="EN-US">-</span></p>
</td>
<td style="width: 134.4pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: white; border-right-width: 1pt; border-right-color: white; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="179">
<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>
</td>
</tr>
<tr>
<td style="width: 162.05pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: white; border-bottom-color: white; border-left-color: white; border-top: none; background: #00b0f0; padding: 0cm 5.4pt;" width="216">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; mso-yfti-cnfc: 68;"><strong><span lang="EN-US">$remote_user</span></strong></p>
</td>
<td style="width: 226.35pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: white; border-right-width: 1pt; border-right-color: white; background: #b6dde8; padding: 0cm 5.4pt;" valign="top" width="302">
<p class="MsoNormal"><span lang="EN-US">-</span></p>
</td>
<td style="width: 134.4pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: white; border-right-width: 1pt; border-right-color: white; background: #b6dde8; padding: 0cm 5.4pt;" valign="top" width="179">
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">显示远程访问者用户信息</span></p>
</td>
</tr>
<tr>
<td style="width: 162.05pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: white; border-bottom-color: white; border-left-color: white; border-top: none; background: #00b0f0; padding: 0cm 5.4pt;" width="216">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; mso-yfti-cnfc: 4;"><strong><span lang="EN-US">[$time_local]</span></strong></p>
</td>
<td style="width: 226.35pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: white; border-right-width: 1pt; border-right-color: white; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="302">
<p class="MsoNormal"><span lang="EN-US">[22/Oct/2017:16:04:54 +0800]</span></p>
</td>
<td style="width: 134.4pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: white; border-right-width: 1pt; border-right-color: white; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="179">
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">显示访问时间</span></p>
</td>
</tr>
<tr>
<td style="width: 162.05pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: white; border-bottom-color: white; border-left-color: white; border-top: none; background: #00b0f0; padding: 0cm 5.4pt;" width="216">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; mso-yfti-cnfc: 68;"><strong><span lang="EN-US">$request</span></strong></p>
</td>
<td style="width: 226.35pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: white; border-right-width: 1pt; border-right-color: white; background: #b6dde8; padding: 0cm 5.4pt;" valign="top" width="302">
<p class="MsoNormal"><span lang="EN-US">GET / HTTP/1.1"</span></p>
</td>
<td style="width: 134.4pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: white; border-right-width: 1pt; border-right-color: white; background: #b6dde8; padding: 0cm 5.4pt;" valign="top" width="179">
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">请求行信息</span></p>
</td>
</tr>
<tr>
<td style="width: 162.05pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: white; border-bottom-color: white; border-left-color: white; border-top: none; background: #00b0f0; padding: 0cm 5.4pt;" width="216">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; mso-yfti-cnfc: 4;"><strong><span lang="EN-US">$status</span></strong></p>
</td>
<td style="width: 226.35pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: white; border-right-width: 1pt; border-right-color: white; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="302">
<p class="MsoNormal"><span lang="EN-US">304</span></p>
</td>
<td style="width: 134.4pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: white; border-right-width: 1pt; border-right-color: white; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="179">
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">状态码</span></p>
</td>
</tr>
<tr>
<td style="width: 162.05pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: white; border-bottom-color: white; border-left-color: white; border-top: none; background: #00b0f0; padding: 0cm 5.4pt;" width="216">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; mso-yfti-cnfc: 68;"><strong><span lang="EN-US">$body_bytes_sent</span></strong></p>
</td>
<td style="width: 226.35pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: white; border-right-width: 1pt; border-right-color: white; background: #b6dde8; padding: 0cm 5.4pt;" valign="top" width="302">
<p class="MsoNormal"><span lang="EN-US">0</span></p>
</td>
<td style="width: 134.4pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: white; border-right-width: 1pt; border-right-color: white; background: #b6dde8; padding: 0cm 5.4pt;" valign="top" width="179">
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">响应报文主体内容大小</span></p>
</td>
</tr>
<tr>
<td style="width: 162.05pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: white; border-bottom-color: white; border-left-color: white; border-top: none; background: #00b0f0; padding: 0cm 5.4pt;" width="216">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; mso-yfti-cnfc: 4;"><strong><span lang="EN-US">$http_referer</span></strong></p>
</td>
<td style="width: 226.35pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: white; border-right-width: 1pt; border-right-color: white; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="302">
<p class="MsoNormal"><span lang="EN-US">-</span></p>
</td>
<td style="width: 134.4pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: white; border-right-width: 1pt; border-right-color: white; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="179">
<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>
</td>
</tr>
<tr>
<td style="width: 162.05pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: white; border-bottom-color: white; border-left-color: white; border-top: none; background: #00b0f0; padding: 0cm 5.4pt;" width="216">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; mso-yfti-cnfc: 68;"><strong><span lang="EN-US">$http_user_agent</span></strong></p>
</td>
<td style="width: 226.35pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: white; border-right-width: 1pt; border-right-color: white; background: #b6dde8; padding: 0cm 5.4pt;" valign="top" width="302">
<p class="MsoNormal"><span lang="EN-US">Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.36</span></p>
</td>
<td style="width: 134.4pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: white; border-right-width: 1pt; border-right-color: white; background: #b6dde8; padding: 0cm 5.4pt;" valign="top" width="179">
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">客户端浏览网页工具信息</span></p>
</td>
</tr>
<tr>
<td style="width: 162.05pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: white; border-bottom-color: white; border-left-color: white; border-top: none; background: #00b0f0; padding: 0cm 5.4pt;" width="216">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; mso-yfti-cnfc: 4;"><strong><span lang="EN-US">$http_x_forwarded_for</span></strong></p>
</td>
<td style="width: 226.35pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: white; border-right-width: 1pt; border-right-color: white; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="302">
<p class="MsoNormal"><span lang="EN-US">-</span></p>
</td>
<td style="width: 134.4pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: white; border-right-width: 1pt; border-right-color: white; background: #daeef3; padding: 0cm 5.4pt;" valign="top" width="179">
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">反向代理转发</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">详细日志详细说明</span></p>
<table class="MsoTableGrid" style="border-width: initial; border-style: none; border-color: initial;" border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td style="width: 162.8pt; border-width: 1pt; border-color: windowtext; background: #a6a6a6; padding: 0cm 5.4pt;" width="217">
<p class="MsoNormal" style="text-align: center;" align="center"><strong><span lang="EN-US">Nginx</span></strong><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">日志变量</span></strong></p>
</td>
<td style="width: 360pt; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-left: none; background: #a6a6a6; padding: 0cm 5.4pt;" width="480">
<p class="MsoNormal" style="text-align: center;" align="center"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">说明</span></strong></p>
</td>
</tr>
<tr>
<td style="width: 162.8pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="217">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">$remote_addr</span></p>
</td>
<td style="width: 360pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="480">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">记录访问网站的客户端地址；即源</span><span lang="EN-US">IP</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">地址</span></p>
</td>
</tr>
<tr>
<td style="width: 162.8pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="217">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">$http_x_forwarded_for</span></p>
</td>
<td style="width: 360pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="480">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">当前端有代理服务器时，设置</span><span lang="EN-US">web</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">节点记录客户端地址的配置，此参数生效的</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">前提是代理服务器上也进行了相关的</span><span lang="EN-US">x_forwarded_for</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">设置</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">可以记录用户真实的</span><span lang="EN-US">IP</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">地址信息</span></p>
</td>
</tr>
<tr>
<td style="width: 162.8pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="217">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">$remote_user</span></p>
</td>
<td style="width: 360pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="480">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">远程客户端用户名称</span></p>
</td>
</tr>
<tr>
<td style="width: 162.8pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="217">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">$time_local</span></p>
</td>
<td style="width: 360pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="480">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">记录访问时间与时区</span></p>
</td>
</tr>
<tr>
<td style="width: 162.8pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="217">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">$request</span></p>
</td>
<td style="width: 360pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="480">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">用户的</span><span lang="EN-US">http</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">请求起始行信息</span></p>
</td>
</tr>
<tr>
<td style="width: 162.8pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="217">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">$status</span></p>
</td>
<td style="width: 360pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="480">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">http</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">状态码，记录请求返回的状态，例如：</span><span lang="EN-US">200 , 404 , 301</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">等</span></p>
</td>
</tr>
<tr>
<td style="width: 162.8pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="217">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">$body_bytes_sents</span></p>
</td>
<td style="width: 360pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="480">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务器发送给客户端的响应</span><span lang="EN-US">body</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">字节数</span></p>
</td>
</tr>
<tr>
<td style="width: 162.8pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="217">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">$http_referer</span></p>
</td>
<td style="width: 360pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="480">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">记录此次请求是从哪个链接访问过来的，可以根据</span><span lang="EN-US">referer</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">进行防盗链设置</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">即表示是哪个网站介绍过来的</span></p>
</td>
</tr>
<tr>
<td style="width: 162.8pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="217">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">$http_user_agent</span></p>
</td>
<td style="width: 360pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="480">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">记录客户端访问信息，例如：浏览器、手机客户端等</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">在没有特殊要求的情况下，采用默认的配置即可，更多可以设置的记录日志信息的变量见：http://nginx.org/en/docs/http/ngx_httpJog_module.html1</span></p>
<h3><a name="_Toc496798068"></a><!--[if !supportLists]--><span lang="EN-US">4.8.4 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">日志的切割</span></h3>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">切割日志方式</span></p>
<p class="MsoNormal"><span style="background: lime; mso-highlight: lime;" lang="EN-US">01</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; background: lime; mso-highlight: lime;">：利用脚本实现日志切割</span></p>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">简单脚本</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="2e5c41415a6e594b4c1e1f">[email&#160;protected]</a> logs]<span style="color: #008000;">#</span><span style="color: #008000;"> cat /server/scripts/log_cut.sh</span><span style="color: #008000;">
#</span><span style="color: #008000;">!/bin/bash</span>
<span style="color: #000000;"> 
mv </span>/application/nginx/logs/access_www.log  /application/nginx/logs/access_www_`date +%<span style="color: #000000;">F`.log
</span>/application/nginx/sbin/nginx -s reload</pre>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">包含判断的脚本</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="bcced3d3c8fccbd9de8c8d">[email&#160;protected]</a> logs]<span style="color: #008000;">#</span><span style="color: #008000;"> cat /server/script/cut_nginx_log.sh</span><span style="color: #008000;">
#</span><span style="color: #008000;"> ! /bin/sh</span>
Dateformat=<span style="color: #800000;">'</span><span style="color: #800000;">date +%Y%m%d</span><span style="color: #800000;">'</span><span style="color: #000000;">
Basedir</span>= <span style="color: #800000;">"</span><span style="color: #800000;">/application/nginx</span><span style="color: #800000;">"</span><span style="color: #000000;">
Nginxlogdir</span>=<span style="color: #800000;">"</span><span style="color: #800000;">$Basedir/logs</span><span style="color: #800000;">"</span><span style="color: #000000;">
Logname</span>=<span style="color: #800000;">"</span><span style="color: #800000;">access_www</span><span style="color: #800000;">"</span><span style="color: #000000;">
[</span>-d $Nginxlogdir ] && cd $Nginxlogdir || exit 1<span style="color: #000000;">
[</span>-f ${Logname}.log ] || exit 1
/bin/<span style="color: #000000;">mv ${Logname}.log ${Dateformat}_${Logname}.log
$Basedir</span>/sbin/nginx -s reload</pre>
</div>
<p class="MsoNormal"><span style="background: lime; mso-highlight: lime;" lang="EN-US">02.</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; background: lime; mso-highlight: lime;">利用系统自带切割软件进行切割</span></p>
<div class="cnblogs_code">
<pre>cat /etc/logrotate.conf</pre>
</div>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496798069"></a><!--[if !supportLists]--><span lang="EN-US">4.9 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">企业需求解决（</span><span lang="EN-US">location</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">应用）</span></h2>
<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp; 1</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">、搭建好一台</span><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的</span><span lang="EN-US">web</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务器，配置好内网网卡地址与外网网卡地址</span></p>
<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp; 2</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">、</span><span lang="EN-US">web</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">服务器的网站域名为</span><span lang="EN-US">www.nmtui.com </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">站点目录为</span><span lang="EN-US"> html/www</span></p>
<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp; 3</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">、要求内网可以访问</span><span lang="EN-US"> www.nmtui.com/AV </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">资源</span></p>
<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp; 4</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">、要求外网不可以访问</span><span lang="EN-US"> www.nmtui.com/AV </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">资源</span></p>
<h3><a name="_Toc496798070"></a><a name="_Toc496466443"></a><!--[if !supportLists]--><span lang="EN-US">4.9.1 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">需求处理</span> <span lang="EN-US">--location</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的应用</span></h3>
<p class="MsoNormal" style="margin-left: 7.1pt;"><span lang="EN-US">1</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">、定位需要控制的资源</span></p>
<p class="MsoNormal" style="margin-left: 7.1pt;"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp; location == if</span></p>
<p class="MsoNormal" style="margin-left: 7.1pt;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">修改配置文件</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="62100d0d16221507005253">[email&#160;protected]</a> extra]<span style="color: #008000;">#</span><span style="color: #008000;"> cat www.conf</span>
<span style="color: #000000;">    server {
        listen       </span>80<span style="color: #000000;">;
        server_name  www.nmtui.com;
        location </span>/<span style="color: #000000;"> {
            root   html</span>/<span style="color: #000000;">www;
            index  index.html index.htm;
        }
        location </span>/<span style="color: #000000;">AV  {
            root  html</span>/<span style="color: #000000;">www;
            index index.html index.htm;
            allow </span>172.16.1.0/24<span style="color: #000000;">;
            deny  all;
        }
    }</span></pre>
</div>
<h3><a name="_Toc496798071"></a><a name="_Toc496466444"></a><!--[if !supportLists]--><span lang="EN-US">4.9.2 </span><!--[endif]--><span lang="EN-US">location </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">语法</span></h3>
<p class="MsoNormal"><span lang="EN-US">location </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">指令的作用是根据用户请求的</span><span lang="EN-US">URI</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">来执行不同的应用。</span></p>
<p class="MsoNormal" style="margin-left: 7.1pt;"><span lang="EN-US">locationn</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">使用的语法为</span></p>
<div class="cnblogs_code">
<pre>location [=|~|~*|^~<span style="color: #000000;">] uri {
  ....
}</span></pre>
</div>
<p class="MsoNormal"><span lang="EN-US">location </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">语法说明表</span></p>
<div align="center">
<table class="MsoTableGrid" style="width: 100%; border-width: initial; border-style: none; border-color: initial;" border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr style="mso-yfti-irow: 0; mso-yfti-firstrow: yes; height: 27.5pt;">
<td style="width: 16.62%; border-width: 1pt; border-color: windowtext; background: #a6a6a6; padding: 0cm 5.4pt; height: 27.5pt;" width="16%">
<p class="MsoNormal" style="text-align: center;" align="center"><strong><span lang="EN-US">location</span></strong></p>
</td>
<td style="width: 21.88%; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-left: none; background: #a6a6a6; padding: 0cm 5.4pt; height: 27.5pt;" width="21%">
<p class="MsoNormal" style="text-align: center;" align="center"><strong><span lang="EN-US">[=|~|~*|^~]</span></strong></p>
</td>
<td style="width: 23.02%; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-left: none; background: #a6a6a6; padding: 0cm 5.4pt; height: 27.5pt;" width="23%">
<p class="MsoNormal" style="text-align: center;" align="center"><strong><span lang="EN-US">uri</span></strong></p>
</td>
<td style="width: 38.48%; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-left: none; background: #a6a6a6; padding: 0cm 5.4pt; height: 27.5pt;" width="38%">
<p class="MsoNormal" style="text-align: center;" align="center"><strong><span lang="EN-US">{....}</span></strong></p>
</td>
</tr>
<tr>
<td style="width: 16.62%; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" valign="top" width="16%">
<p class="MsoNormal" style="text-align: center;" align="center"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">指令</span></p>
</td>
<td style="width: 21.88%; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" valign="top" width="21%">
<p class="MsoNormal" style="text-align: center;" align="center"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">匹配标识</span></p>
</td>
<td style="width: 23.02%; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" valign="top" width="23%">
<p class="MsoNormal" style="text-align: center;" align="center"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">匹配的网站地址</span></p>
</td>
<td style="width: 38.48%; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" valign="top" width="38%">
<p class="MsoNormal" style="text-align: center;" align="center"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">匹配</span><span lang="EN-US">URI</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">后要执行的配置段</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>
<p class="MsoNormal"><strong><span lang="EN-US">~ </span></strong><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">与</span><span lang="EN-US">~* </span></strong><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的区别</span></strong></p>
<p class="MsoListParagraph" style="margin-left: 42.0pt; text-indent: -21.0pt; mso-list: l17 level1 lfo20;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">u<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span lang="EN-US">~&nbsp; </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">匹配内容区分大小写</span></p>
<p class="MsoListParagraph" style="margin-left: 42.0pt; text-indent: -21.0pt; mso-list: l17 level1 lfo20;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">u<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span lang="EN-US">~* </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">匹配内容不区分的小写</span></p>
<p class="MsoListParagraph" style="margin-left: 42.0pt; text-indent: -21.0pt; mso-list: l17 level1 lfo20;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">u<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span lang="EN-US">!~ </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">取反</span></p>
<p class="MsoListParagraph" style="margin-left: 42.0pt; text-indent: -21.0pt; mso-list: l17 level1 lfo20;"><!--[if !supportLists]--><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US">u<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span><!--[endif]--><span lang="EN-US">^~ </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">但多个匹配同时存在，优先匹配</span><span lang="EN-US"> ^~</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">匹配的内容</span><span lang="EN-US">;</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">不做正则表达式的检查</span> <span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">（优先处理）</span></p>
<h3><a name="_Toc496798072"></a><a name="_Toc496466445"></a><!--[if !supportLists]--><span lang="EN-US">4.9.3 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">官方配置示例</span></h3>
<div class="cnblogs_code">
<pre>location = /<span style="color: #000000;"> {
    [ configuration A ]
}
 
location </span>/<span style="color: #000000;"> {
    [ configuration B ]
}
 
location </span>/documents/<span style="color: #000000;"> {
    [ configuration C ]
}
 
location </span>^~ /images/<span style="color: #000000;"> {
    [ configuration D ]
}
 
location </span>~* \.(gif|jpg|<span style="color: #000000;">jpeg)$ {
    [ configuration E ]
}</span></pre>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">说明：</span></p>
<div style="mso-element: para-border-div; border: solid windowtext 2.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt; mso-border-shadow: yes; background: #F2F2F2; mso-shading: windowtext; mso-pattern: gray-5 auto; margin-left: 42.5pt; margin-right: 55.45pt;">
<p class="a3" style="margin: 1pt 0cm; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span lang="EN-US">"/"</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">请求将匹配配置</span><span lang="EN-US">A</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">，</span></p>
<p class="a3" style="margin: 1pt 0cm; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span lang="EN-US">"/index.html"</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">请求将匹配配置</span><span lang="EN-US">B</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">，</span></p>
<p class="a3" style="margin: 1pt 0cm; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span lang="EN-US">"/documents/document.html"</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">请求将匹配配置</span><span lang="EN-US">C</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">，</span></p>
<p class="a3" style="margin: 1pt 0cm; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span lang="EN-US">"/images/1.gif"</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">请求将匹配配置</span><span lang="EN-US">D</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">，</span></p>
<p class="a3" style="margin: 1pt 0cm; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span lang="EN-US">"/documents/1.jpg"</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">请求将匹配配置</span><span lang="EN-US">E.</span></p>
</div>
<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">不同</span><span lang="EN-US">uri</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">及特殊字符组合匹配的顺序说明</span></p>
<table class="MsoTableGrid" style="border-width: initial; border-style: none; border-color: initial;" border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td style="width: 35.2pt; border-width: 1pt; border-color: windowtext; background: #a6a6a6; padding: 0cm 5.4pt;" width="47">
<p class="MsoNormal" style="text-align: center;" align="center"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">顺序</span></strong></p>
</td>
<td style="width: 241pt; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-left: none; background: #a6a6a6; padding: 0cm 5.4pt;" width="321">
<p class="MsoNormal" style="text-align: center;" align="center"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">不用</span><span lang="EN-US">URI</span></strong><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">及特殊字符组合匹配</span></strong></p>
</td>
<td style="width: 246.6pt; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-left: none; background: #a6a6a6; padding: 0cm 5.4pt;" width="329">
<p class="MsoNormal" style="text-align: center;" align="center"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">匹配说明</span></strong></p>
</td>
</tr>
<tr>
<td style="width: 35.2pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="47">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">1</span></p>
</td>
<td style="width: 241pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="321">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">location = / {}</span></p>
</td>
<td style="width: 246.6pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="329">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">精确匹配</span><span lang="EN-US"> /</span></p>
</td>
</tr>
<tr>
<td style="width: 35.2pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="47">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">2</span></p>
</td>
<td style="width: 241pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="321">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">location ^~ /image/{</span></p>
</td>
<td style="width: 246.6pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="329">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">匹配常规字符串，不做正则表达式匹配检查</span></p>
</td>
</tr>
<tr>
<td style="width: 35.2pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="47">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">3</span></p>
</td>
<td style="width: 241pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="321">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">location ~* \.(gif|jpg|jpeg)$ {</span></p>
</td>
<td style="width: 246.6pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="329">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">正则匹配</span></p>
</td>
</tr>
<tr>
<td style="width: 35.2pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="47">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">4</span></p>
</td>
<td style="width: 241pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="321">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">location /documents/ {</span></p>
</td>
<td style="width: 246.6pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="329">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">匹配常规字符串，如果有正则，则优先匹配正则</span></p>
</td>
</tr>
<tr>
<td style="width: 35.2pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="47">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">5</span></p>
</td>
<td style="width: 241pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="321">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">location / {</span></p>
</td>
<td style="width: 246.6pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="329">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">所有</span><span lang="EN-US">location </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">都不能匹配后的默认匹配</span></p>
</td>
</tr>
</tbody>
</table>
<h3><a name="_Toc496798073"></a><!--[if !supportLists]--><span lang="EN-US">4.9.4 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">【测试】测试</span><span lang="EN-US">location</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的访问</span></h3>
<h4><!--[if !supportLists]--><strong><span lang="EN-US">4.9.4.1<span style="font-variant-numeric: normal; font-weight: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span></strong><!--[endif]--><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">修改配置文件</span></strong></h4>
<p class="MsoNormal" style="margin-left: 15.75pt;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">定义不同的</span><span lang="EN-US">location</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">返回不同的数值</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="50223f3f24102735326061">[email&#160;protected]</a> extra]<span style="color: #008000;">#</span><span style="color: #008000;"> vim www.conf</span>
<span style="color: #000000;">server {
    listen       </span>80<span style="color: #000000;">;
    server_name  www.nmtui.com nmtui.com;
    root   html</span>/<span style="color: #000000;">www;
    location </span>/<span style="color: #000000;"> {
       </span><span style="color: #0000ff;">return</span> 401<span style="color: #000000;">;
    }
    location </span>= /<span style="color: #000000;"> {
        </span><span style="color: #0000ff;">return</span> 402<span style="color: #000000;">;
    }
    location </span>/documents/<span style="color: #000000;"> {
        </span><span style="color: #0000ff;">return</span> 403<span style="color: #000000;">;
    }
    location </span>^~ /images/<span style="color: #000000;"> {
        </span><span style="color: #0000ff;">return</span> 404<span style="color: #000000;">;
    }
    location </span>~* \.（gif|jpg|<span style="color: #000000;">jpeg）$ {
    </span><span style="color: #0000ff;">return</span> 500<span style="color: #000000;">;
    }
    access_log logs</span>/<span style="color: #000000;">access_www.log main;
}</span></pre>
</div>
<h4><!--[if !supportLists]--><strong><span lang="EN-US">4.9.4.2<span style="font-variant-numeric: normal; font-weight: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp; </span></span></strong><!--[endif]--><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">访问测试</span></strong></h4>
<p class="MsoNormal" style="margin-left: 15.75pt;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">根据请求不同</span><span lang="EN-US">uri</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的返回值验证</span><span lang="EN-US"> location</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的配置。</span></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="40322f2f34002e26337071">[email&#160;protected]</a> ~]<span style="color: #008000;">#</span><span style="color: #008000;"> curl -I -w "%{http_code}\n" -o /dev/null -s  www.nmtui.com/documents</span>
401<span style="color: #000000;">
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="9eecf1f1eadef0f8edaeaf">[email&#160;protected]</a> </span>~]<span style="color: #008000;">#</span><span style="color: #008000;"> curl -I -w "%{http_code}\n" -o /dev/null -s  www.nmtui.com</span>
402<span style="color: #000000;">
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c7b5a8a8b387a9a1b4f7f6">[email&#160;protected]</a> </span>~]<span style="color: #008000;">#</span><span style="color: #008000;"> curl -I -w "%{http_code}\n" -o /dev/null -s  www.nmtui.com/documents/ss.jpg</span>
500<span style="color: #000000;">
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="9ae8f5f5eedaf4fce9aaab">[email&#160;protected]</a> </span>~]<span style="color: #008000;">#</span><span style="color: #008000;"> curl -I -w "%{http_code}\n" -o /dev/null -s  www.nmtui.com/documents</span>
401<span style="color: #000000;">
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="e694898992a6888095d6d7">[email&#160;protected]</a> </span>~]<span style="color: #008000;">#</span><span style="color: #008000;"> curl -I -w "%{http_code}\n" -o /dev/null -s  www.nmtui.com/documents/</span>
403<span style="color: #000000;">
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="72001d1d06321c14014243">[email&#160;protected]</a> </span>~]<span style="color: #008000;">#</span><span style="color: #008000;"> curl -I -w "%{http_code}\n" -o /dev/null -s  www.nmtui.com/images/1.jpg</span>
404</pre>
</div>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496798074"></a><!--[if !supportLists]--><span lang="EN-US">4.10 </span><!--[endif]--><span lang="EN-US">rewrite </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">模块的使用</span><span lang="EN-US">--</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">地址重写</span></h2>
<h3><a name="_Toc496798075"></a><!--[if !supportLists]--><span lang="EN-US">4.10.1 </span><!--[endif]--><span lang="EN-US">rewrite </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">重写模块</span></h3>
<p class="MsoNormal" style="margin-left: 7.1pt;"><span lang="EN-US">&nbsp; </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">将地址信息进行重写</span></p>
<p class="MsoNormal"><span lang="EN-US">rewrite </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">语法格式</span></p>
<div class="cnblogs_code">
<pre>rewrite regex replacement [flag]</pre>
</div>
<p class="MsoNormal"><span lang="EN-US">rewrite</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">应用标签：</span><span lang="EN-US">server</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">、</span><span lang="EN-US">location</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">、</span><span lang="EN-US">if</span></p>
<h3><a name="_Toc496798076"></a><!--[if !supportLists]--><span lang="EN-US">4.10.2 </span><!--[endif]--><span lang="EN-US">rewrite</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">模块两个功能</span></h3>
<p class="MsoNormal" style="text-indent: 21.0pt;"><span lang="EN-US">1. </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">实现网站地址信息跳转</span></p>
<p class="MsoNormal" style="text-indent: 21.0pt;"><span lang="EN-US">2. </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">实现伪静态</span></p>
<h3><a name="_Toc496798077"></a><!--[if !supportLists]--><span lang="EN-US">4.10.3 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">方法一</span> <span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">使用</span><span lang="EN-US">if</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">判断</span></h3>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="b9cbd6d6cdf9cedcdb8988">[email&#160;protected]</a> extra]<span style="color: #008000;">#</span><span style="color: #008000;"> cat www.conf</span>
<span style="color: #000000;">    server {
        listen       </span>80<span style="color: #000000;">;
        server_name  www.nmtui.com nmtui.cn;
</span><span style="color: #0000ff;">if</span> ($host ~* <span style="color: #800000;">"</span><span style="color: #800000;">^nmtui.com$</span><span style="color: #800000;">"</span><span style="color: #000000;">) {
rewrite </span>^/(.*) http://www.nmtui.com/$1<span style="color: #000000;"> permanent;
}
        location </span>/<span style="color: #000000;"> {
            root   html</span>/<span style="color: #000000;">www;
            index  index.html index.htm;
        }
        access_log  logs</span>/<span style="color: #000000;">access_www.log  main;
        error_page   </span>500 502 503 504  /<span style="color: #000000;">50x.html;
        location </span>= /<span style="color: #000000;">50x.html {
            root   html;
        }
    }</span></pre>
</div>
<p class="MsoNormal"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">测试</span></strong></p>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c4b6ababb084b3a1a6f4f5">[email&#160;protected]</a> www]<span style="color: #008000;">#</span><span style="color: #008000;"> curl  nmtui.com -L</span>
web01 www</pre>
</div>
<h3><a name="_Toc496798078"></a><!--[if !supportLists]--><span lang="EN-US">4.10.4 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">方法二</span><span lang="EN-US">&nbsp; </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">再添加上一个区块</span></h3>
<div class="cnblogs_code">
<pre><span style="color: #000000;">server {   
        server_name nmtui.com;
        rewrite </span>^/(.*) http://www.nmtui.com/$1<span style="color: #000000;"> permanent;
}  </span></pre>
</div>
<h3><a name="_Toc496798079"></a><!--[if !supportLists]--><span lang="EN-US">4.10.5 </span><!--[endif]--><span lang="EN-US">nginx </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的</span><span lang="EN-US">rwite</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">重写企业应用场景</span></h3>
<p class="MsoListParagraph" style="margin-left: 33.0pt; text-indent: -21.0pt; mso-list: l16 level1 lfo22;"><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US"><span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp;&nbsp;</span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">可以调整用户浏览的</span><span lang="EN-US">URL</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">，使其看起来更规范，合乎开发及产品人员的需求。</span></p>
<p class="MsoListParagraph" style="margin-left: 33.0pt; text-indent: -21.0pt; mso-list: l16 level1 lfo22;"><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US"><span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp;</span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">为了让搜索引擎收录网站内容，并让用户体验更好，企业会将动态</span><span lang="EN-US">URL</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">地址伪装成静态地址提供服务。</span></p>
<p class="MsoListParagraph" style="margin-left: 33.0pt; text-indent: -21.0pt; mso-list: l16 level1 lfo22;"><span style="font-family: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-family: Wingdings;" lang="EN-US"><span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp;&nbsp;</span></span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">网站换新域名后，让旧域名的访问跳转到新的域名上，例如：让京东的</span><span lang="EN-US">360buy</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">换成了</span><span lang="EN-US">jd.com</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">。</span></p>
<p class="MsoListParagraph" style="margin-left: 33.0pt; text-indent: -21.0pt; mso-list: l16 level1 lfo22;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">根据特殊变量、目录、客户端的信息进行</span><span lang="EN-US">URL</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">跳转等。</span></p>
<p class="MsoListParagraph" style="margin-left: 33.0pt; text-indent: -21.0pt; mso-list: l16 level1 lfo22;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">说明：开源软件类似</span><span lang="EN-US">wordpress</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的，官方都会对伪静态配置进行说明</span></p>
<h2 style="margin-top: 8.15pt; margin-right: 0cm; margin-bottom: 8.15pt; margin-left: 25.1pt; mso-list: l14 level2 lfo4;"><a name="_Toc496798080"></a><!--[if !supportLists]--><span lang="EN-US">4.11 </span><!--[endif]--><span lang="EN-US">nginx </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的访问认证</span></h2>
<h3><a name="_Toc496798081"></a><!--[if !supportLists]--><span lang="EN-US">4.11.1 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">修改</span><span lang="EN-US">nginx</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">的相关配置文件</span></h3>
<div class="cnblogs_code">
<pre>vim extra/<span style="color: #000000;">www.conf
location </span>/<span style="color: #000000;"> {
        root   html</span>/<span style="color: #000000;">www;
        index  index.html index.htm;
        auth_basic           </span><span style="color: #800000;">"</span><span style="color: #800000;">clsn training</span><span style="color: #800000;">"</span><span style="color: #000000;">;
        auth_basic_user_file   </span>/application/nginx/conf/<span style="color: #000000;">htpasswd;
 }</span></pre>
</div>
<h3><a name="_Toc496798082"></a><!--[if !supportLists]--><span lang="EN-US">4.11.2 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">创建密码文件</span></h3>
<div style="mso-element: para-border-div; border: solid windowtext 2.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt; mso-border-shadow: yes; background: #F2F2F2; mso-shading: windowtext; mso-pattern: gray-5 auto;">
<p class="a3"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">注：</span> <span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">这里使用的</span><span lang="EN-US">htpasswd</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">命令默认是没有的，需要通过</span><span class="ad"><span lang="EN-US">yum install httpd-tools -y </span></span><span class="ad"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; mso-bidi-font-family: 'Times New Roman';">安装</span></span></p>
</div>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="1a6875756e5a6d7f782a2b">[email&#160;protected]</a> extra]<span style="color: #008000;">#</span><span style="color: #008000;"> htpasswd -c /application/nginx/conf/htpasswd clsn</span>
<span style="color: #000000;">New password:
Re</span>-<span style="color: #000000;">type new password:
Adding password </span><span style="color: #0000ff;">for</span> user clsn</pre>
</div>
<p class="MsoNormal"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">参数说明：</span></p>
<p class="MsoNormal"><span lang="EN-US">-c&nbsp; Create a new file.</span></p>
<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">创建一个新的密码文</span></p>
<p class="MsoNormal"><span lang="EN-US">-b&nbsp; Use the password from the command line rather than prompting for it.</span></p>
<p class="MsoNormal" style="text-indent: 24.0pt;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">采用免交互的方式输入用户的密码信息</span></p>
<p class="MsoNormal"><a name="_Toc496466456"></a><strong><span style="background: yellow; mso-highlight: yellow;" lang="EN-US">htpasswd</span></strong><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; background: yellow; mso-highlight: yellow;">参数说明</span></strong></p>
<div align="center">
<table class="MsoTableGrid" style="border-width: initial; border-style: none; border-color: initial;" border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td style="width: 155.7pt; border-width: 1pt; border-color: windowtext; background: #a6a6a6; padding: 0cm 5.4pt;" width="208">
<p class="MsoNormal" style="text-align: center;" align="center"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">参数</span></strong></p>
</td>
<td style="width: 367.1pt; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-left: none; background: #a6a6a6; padding: 0cm 5.4pt;" width="489">
<p class="MsoNormal" style="text-align: center;" align="center"><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">参数说明</span></strong></p>
</td>
</tr>
<tr>
<td style="width: 155.7pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="208">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">-c </span></p>
</td>
<td style="width: 367.1pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="489">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">创建一个新文件。</span></p>
</td>
</tr>
<tr>
<td style="width: 155.7pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="208">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">-n </span></p>
</td>
<td style="width: 367.1pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="489">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">不更新文件</span><span lang="EN-US">; </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">显示结果。</span></p>
</td>
</tr>
<tr>
<td style="width: 155.7pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="208">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">-m </span></p>
</td>
<td style="width: 367.1pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="489">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">强制</span><span lang="EN-US">MD5</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">密码加密。</span></p>
</td>
</tr>
<tr>
<td style="width: 155.7pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="208">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">-d </span></p>
</td>
<td style="width: 367.1pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="489">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">强制</span><span lang="EN-US">CRYPT</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">加密密码（默认）。</span></p>
</td>
</tr>
<tr>
<td style="width: 155.7pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="208">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">-p </span></p>
</td>
<td style="width: 367.1pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="489">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">不加密密码（明文）。</span></p>
</td>
</tr>
<tr>
<td style="width: 155.7pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="208">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">-s </span></p>
</td>
<td style="width: 367.1pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="489">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">强制</span><span lang="EN-US">SHA</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">加密密码。</span></p>
</td>
</tr>
<tr>
<td style="width: 155.7pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="208">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">-b </span></p>
</td>
<td style="width: 367.1pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="489">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">使用命令行中的密码，而不是提示。（免交互）</span></p>
</td>
</tr>
<tr>
<td style="width: 155.7pt; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0cm 5.4pt;" width="208">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span lang="EN-US">-D </span></p>
</td>
<td style="width: 367.1pt; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: windowtext; border-right-width: 1pt; border-right-color: windowtext; padding: 0cm 5.4pt;" width="489">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph;"><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">删除指定的用户。</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="MsoNormal" style="text-indent: 24.0pt;"><span lang="EN-US">&nbsp;</span></p>
<h3><a name="_Toc496798083"></a><!--[if !supportLists]--><span lang="EN-US">4.11.3 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">更改密码文件权限</span></h3>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d3a1bcbca793a4b6b1e3e2">[email&#160;protected]</a> extra]<span style="color: #008000;">#</span><span style="color: #008000;">  chmod 400 /application/nginx/conf/htpasswd    </span>
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="04766b6b70447361663435">[email&#160;protected]</a> extra]<span style="color: #008000;">#</span><span style="color: #008000;">  chown -R www.www /application/nginx/conf/htpasswd</span>
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="93e1fcfce7d3e4f6f1a3a2">[email&#160;protected]</a> extra]<span style="color: #008000;">#</span><span style="color: #008000;"> cat /application/nginx/conf/htpasswd</span>
clsn:e3OfMiJThE0Qg</pre>
</div>
<h3><a name="_Toc496798084"></a><!--[if !supportLists]--><span lang="EN-US">4.11.4 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">重启服务：</span> <span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">配置修改后要重启服务</span></h3>
<div class="cnblogs_code">
<pre>[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="4f3d20203b0f382a2d7f7e">[email&#160;protected]</a> extra]<span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -t</span>
nginx: the configuration file /application/nginx-1.10.2/conf/nginx.conf syntax <span style="color: #0000ff;">is</span><span style="color: #000000;"> ok
nginx: configuration file </span>/application/nginx-1.10.2/conf/nginx.conf test <span style="color: #0000ff;">is</span><span style="color: #000000;"> successful
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="1d6f7272695d6a787f2d2c">[email&#160;protected]</a> extra]</span><span style="color: #008000;">#</span><span style="color: #008000;"> /application/nginx/sbin/nginx -s reload</span></pre>
</div>
<h3><a name="_Toc496798085"></a><!--[if !supportLists]--><span lang="EN-US">4.11.5 </span><!--[endif]--><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">访问测试</span></h3>
<div class="cnblogs_code">
<pre><span style="color: #008000;">#</span><span style="color: #008000;"> 使用交互式输入密码</span>
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="dcaeb3b3a89cabb9beeced">[email&#160;protected]</a> www]<span style="color: #008000;">#</span><span style="color: #008000;"> curl www.nmtui.com -uclsn</span>
Enter host password <span style="color: #0000ff;">for</span> user <span style="color: #800000;">'</span><span style="color: #800000;">clsn</span><span style="color: #800000;">'</span>:123456<span style="color: #000000;">
web01 www
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 使用免交互输入密码</span>
[<a href="email-protection.htm" tppabs="http://clsn.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="89fbe6e6fdc9feecebb9b8">[email&#160;protected]</a> www]<span style="color: #008000;">#</span><span style="color: #008000;"> curl www.nmtui.com -uclsn:123456</span>
web01 www</pre>
</div>
<p class="MsoNormal" style="text-indent: 15.75pt;"><strong><span style="color: red;" lang="EN-US">401</span></strong><strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New'; color: red;">错误说明</span></strong><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">：</span> <span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 'Courier New'; mso-hansi-font-family: 'Courier New';">需要认证，但是没有认证</span></p>
<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>
  </div> <div class="s-weixin-one"> <div class="weimg-one"> <img src="clsn_linux.bmp" tppabs="http://clsn.io/wp-content/uploads/2018/09/clsn_linux.bmp" alt="weinxin" /> <div class="weixin-h"><strong>惨绿少年Linux</strong></div> <div class="weixin-h-w">这是我的微信公众号扫一扫</div> <div class="clear"></div> </div></div> <div class="clear"></div><div id="social"> <div class="social-main"> <span class="like"> <a href="javascript:;" data-action="ding" data-id="892" title="点赞" class="dingzan"><i class="be be-thumbs-up-o"></i>赞 <i class="count"> 0</i> </a> </span> <div class="shang-p"> <div class="shang-empty"><span></span></div> <span class="tipso_style" id="tip-p" data-tipso=' <span id="shang"> <span class="shang-main"> <h4><i class="be be-favorite" aria-hidden="true"></i> 您可以选择一种方式赞助本站</h4> <span class="clear"></span> </span> </span>'> <span class="shang-s"><a title="赞助本站">赏</a></span> </span> </div> <div class="share-sd"> <span class="share-s"><a href="javascript:void(0)" id="share-s" title="分享"><i class="be be-share"></i>分享</a></span> <div id="share"> <ul class="bdsharebuttonbox"> <li><a title="更多" class="bds_more be be-addbox" data-cmd="more" onclick="return false;" href="#"></a></li> <li><a title="分享到QQ空间" class="be be-qzone" data-cmd="qzone" onclick="return false;" href="#"></a></li> <li><a title="分享到新浪微博" class="be be-stsina" data-cmd="tsina" onclick="return false;" href="#"></a></li> <li><a title="分享到腾讯微博" class="be be-tqq" data-cmd="tqq" onclick="return false;" href="#"></a></li> <li><a title="分享到人人网" class="be be-renren" data-cmd="renren" onclick="return false;" href="#"></a></li> <li><a title="分享到微信" class="be be-weixin" data-cmd="weixin" onclick="return false;" href="#"></a></li> </ul></div> </div> <div class="clear"></div> </div></div> <footer class="single-footer"> <ul id="fontsize"><li>A+</li></ul><div class="single-cat-tag"><div class="single-cat">所属分类：<a href="javascript:if(confirm('http://clsn.io/clsn-ops/linux%e8%bf%90%e7%bb%b4/  \n\nļδ Teleport Pro ȡأΪ ޷ȡãȡغĿֹ̫ͣ졣  \n\nҪӷϴ'))window.location='http://clsn.io/clsn-ops/linux%e8%bf%90%e7%bb%b4/'" tppabs="http://clsn.io/clsn-ops/linux%e8%bf%90%e7%bb%b4/" rel="category tag">Linux运维</a> <a href="index-3.htm" tppabs="http://clsn.io/clsn-ops/ops-linux/web-app/" rel="category tag">Web应用</a> <a href="javascript:if(confirm('http://clsn.io/clsn-ops/ops-linux/  \n\nļδ Teleport Pro ȡأΪ ޷ȡãȡغĿֹ̫ͣ졣  \n\nҪӷϴ'))window.location='http://clsn.io/clsn-ops/ops-linux/'" tppabs="http://clsn.io/clsn-ops/ops-linux/" rel="category tag">运维基本功</a></div></div> </footer><!-- .entry-footer --> <div class="clear"></div> </div><!-- .entry-content --> </article><!-- #post --><div class="single-tag"></div> <div class="authorbio wow fadeInUp" data-wow-delay="0.3s"> <img alt='' src="92aaa21455d7edf078accf7a7b75ee76-s=64&r=g&default=-wp-content-themes-clsn-003-img-avatar-96-latin_c.png" tppabs="https://cn.gravatar.com/avatar/92aaa21455d7edf078accf7a7b75ee76?s=64&r=g&default=%2Fwp-content%2Fthemes%2Fclsn-003%2Fimg%2Favatar%2F96%2Flatin_c.png" class='avatar avatar-64 photo wpfla ' width='64' height='64' /> <ul class="spostinfo"> <li> <li><strong>版权声明：</strong>本站原创文章，于2017年10月29日<i class="i-time">09:55:00</i>，由 <b><a href="index-36.htm" tppabs="http://clsn.io/clsn/lxauthor/clsn/" title="由惨绿少年发布" rel="author">惨绿少年</a></b> 发表，共 25616 字。</li> <li class="reprinted"><strong>转载请注明：</strong><a href="lx892.html" tppabs="http://clsn.io/clsn/lx892.html" rel="bookmark" title="本文固定链接 http://clsn.io/clsn/lx892.html">nginx服务企业应用 | 惨绿少年</a></li> </ul> <div class="clear"></div></div> <div id="related-img" class="wow fadeInUp" data-wow-delay="0.3s"> <div class="r4"> <div class="related-site"> <figure class="related-site-img"> <span class="load"><a href="javascript:if(confirm('http://clsn.io/clsn/lx1086.html  \n\nļδ Teleport Pro ȡأΪ ޷ȡãȡغĿֹ̫ͣ졣  \n\nҪӷϴ'))window.location='http://clsn.io/clsn/lx1086.html'" tppabs="http://clsn.io/clsn/lx1086.html"><img src="loading.png" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/loading.png" data-original="/wp-content/themes/clsn-003/timthumb.php?src=/wp-content/uploads/2018/09/1190037-20180205204316029-486521233.png&w=280&h=210&a=&zc=1" alt="AWK常用技巧" /></a></span> </figure> <div class="related-title"><a href="javascript:if(confirm('http://clsn.io/clsn/lx1086.html  \n\nļδ Teleport Pro ȡأΪ ޷ȡãȡغĿֹ̫ͣ졣  \n\nҪӷϴ'))window.location='http://clsn.io/clsn/lx1086.html'" tppabs="http://clsn.io/clsn/lx1086.html">AWK常用技巧</a></div> </div> </div> <div class="r4"> <div class="related-site"> <figure class="related-site-img"> <span class="load"><a href="lx1088.html" tppabs="http://clsn.io/clsn/lx1088.html"><img src="loading.png" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/loading.png" data-original="/wp-content/themes/clsn-003/timthumb.php?src=/wp-content/uploads/2018/09/1190037-20180612203730808-1316825229.png&w=280&h=210&a=&zc=1" alt="Web缓存知识体系" /></a></span> </figure> <div class="related-title"><a href="lx1088.html" tppabs="http://clsn.io/clsn/lx1088.html">Web缓存知识体系</a></div> </div> </div> <div class="r4"> <div class="related-site"> <figure class="related-site-img"> <span class="load"><a href="lx1090.html" tppabs="http://clsn.io/clsn/lx1090.html"><img src="loading.png" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/loading.png" data-original="/wp-content/themes/clsn-003/timthumb.php?src=/wp-content/uploads/2018/09/1190037-20180604214121023-576776588.png&w=280&h=210&a=&zc=1" alt="监控命令之tsar" /></a></span> </figure> <div class="related-title"><a href="lx1090.html" tppabs="http://clsn.io/clsn/lx1090.html">监控命令之tsar</a></div> </div> </div> <div class="r4"> <div class="related-site"> <figure class="related-site-img"> <span class="load"><a href="javascript:if(confirm('http://clsn.io/clsn/lx1092.html  \n\nļδ Teleport Pro ȡأΪ ޷ȡãȡغĿֹ̫ͣ졣  \n\nҪӷϴ'))window.location='http://clsn.io/clsn/lx1092.html'" tppabs="http://clsn.io/clsn/lx1092.html"><img src="loading.png" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/loading.png" data-original="/wp-content/themes/clsn-003/img/random/9.jpg" alt="日志切割之Logrotate" /></a></span> </figure> <div class="related-title"><a href="javascript:if(confirm('http://clsn.io/clsn/lx1092.html  \n\nļδ Teleport Pro ȡأΪ ޷ȡãȡغĿֹ̫ͣ졣  \n\nҪӷϴ'))window.location='http://clsn.io/clsn/lx1092.html'" tppabs="http://clsn.io/clsn/lx1092.html">日志切割之Logrotate</a></div> </div> </div> <div class="clear"></div></div> <div id="single-widget"> <div class="wow fadeInUp" data-wow-delay="0.3s"> <aside id="feed-2" class="widget feed wow fadeInUp" data-wow-delay="0.3s"><h3 class="widget-title"><span class="s-icon"></span>关注我们</h3><div id="feed_widget"> <div class="feed-rss"> <ul> <li class="weixin"> <span class="tipso_style" id="tip-w-j" data-tipso='<span class="weixin-qr"><img src="clsn_linux.bmp" tppabs="http://clsn.io/wp-content/uploads/2018/09/clsn_linux.bmp" alt="weixin"/></span>'><a title="微信"><i class="be be-weixin"></i></a></span> </li> <li class="feed"><a title="订阅" href="index-23.htm" tppabs="http://clsn.io/feed/" target="_blank" rel="external nofollow"><i class="be be-rss"></i></a></li> <li class="tsina"><a title="" href="javascript:if(confirm('https://weibo.com/236567300  \n\nļδ Teleport Pro ȡأΪ һַʹδֵ֧Э (磬gopher)  \n\nҪӷϴ'))window.location='https://weibo.com/236567300'" tppabs="https://weibo.com/236567300" target="_blank" rel="external nofollow"><i class="be be-stsina"></i></a></li> <li class="tqq"><a title="" href="javascript:if(confirm('https://weibo.com/236567300  \n\nļδ Teleport Pro ȡأΪ һַʹδֵ֧Э (磬gopher)  \n\nҪӷϴ'))window.location='https://weibo.com/236567300'" tppabs="https://weibo.com/236567300" target="_blank" rel="external nofollow"><i class="be be-tqq"></i></a></li> </ul> </div></div><div class="clear"></div></aside><aside id="related_post-2" class="widget related_post wow fadeInUp" data-wow-delay="0.3s"><div id="related_post_widget"> <ul> <li><a href="javascript:if(confirm('http://clsn.io/clsn/lx1086.html  \n\nļδ Teleport Pro ȡأΪ ޷ȡãȡغĿֹ̫ͣ졣  \n\nҪӷϴ'))window.location='http://clsn.io/clsn/lx1086.html'" tppabs="http://clsn.io/clsn/lx1086.html">AWK常用技巧</a></li> <li><a href="lx1088.html" tppabs="http://clsn.io/clsn/lx1088.html">Web缓存知识体系</a></li> <li><a href="lx1090.html" tppabs="http://clsn.io/clsn/lx1090.html">监控命令之tsar</a></li> </ul></div><div class="clear"></div></aside> </div> <div class="clear"></div></div> <nav class="nav-single wow fadeInUp" data-wow-delay="0.3s"> <a href="javascript:if(confirm('http://clsn.io/clsn/lx893.html  \n\nļδ Teleport Pro ȡأΪ ޷ȡãȡغĿֹ̫ͣ졣  \n\nҪӷϴ'))window.location='http://clsn.io/clsn/lx893.html'" tppabs="http://clsn.io/clsn/lx893.html" rel="prev"><span class="meta-nav"><span class="post-nav"><i class="be be-arrowleft"></i> 上一篇</span><br/>keepalived中的脑裂</span></a><a href="lx891.html" tppabs="http://clsn.io/clsn/lx891.html" rel="next"><span class="meta-nav"><span class="post-nav">下一篇 <i class="be be-arrowright"></i></span><br/>FPM定制RPM包实践</span></a> <div class="clear"></div> </nav> <nav class="navigation post-navigation" role="navigation"> <h2 class="screen-reader-text">文章导航</h2> <div class="nav-links"><div class="nav-previous"><a href="javascript:if(confirm('http://clsn.io/clsn/lx893.html  \n\nļδ Teleport Pro ȡأΪ ޷ȡãȡغĿֹ̫ͣ졣  \n\nҪӷϴ'))window.location='http://clsn.io/clsn/lx893.html'" tppabs="http://clsn.io/clsn/lx893.html" rel="prev"><span class="meta-nav-r" aria-hidden="true"><i class="be be-arrowleft"></i></span></a></div><div class="nav-next"><a href="lx891.html" tppabs="http://clsn.io/clsn/lx891.html" rel="next"><span class="meta-nav-l" aria-hidden="true"><i class="be be-arrowright"></i></span></a></div></div> </nav> <!-- 引用 --><div class="scroll-comments"></div><div id="comments" class="comments-area"> <div id="respond" class="comment-respond wow fadeInUp" data-wow-delay="0.3s"> <h3 id="reply-title" class="comment-reply-title"><span>发表评论</span><small><a rel="nofollow" id="cancel-comment-reply-link" href="lx892.html#respond" tppabs="http://clsn.io/clsn/lx892.html#respond" style="display:none;">取消回复</a></small></h3> <form action="http://clsn.io/wp-comments-post.php" method="post" id="commentform"> <p class="emoji-box"><script data-cfasync="false" src="email-decode.min.js" tppabs="http://clsn.io/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type="text/javascript">/* <![CDATA[ */ function grin(tag) { var myField; tag = ' ' + tag + ' '; if (document.getElementById('comment') && document.getElementById('comment').type == 'textarea') { myField = document.getElementById('comment'); } else { return false; } if (document.selection) { myField.focus(); sel = document.selection.createRange(); sel.text = tag; myField.focus(); } else if (myField.selectionStart || myField.selectionStart == '0') { var startPos = myField.selectionStart; var endPos = myField.selectionEnd; var cursorPos = endPos; myField.value = myField.value.substring(0, startPos) + tag + myField.value.substring(endPos, myField.value.length); cursorPos += tag.length; myField.focus(); myField.selectionStart = cursorPos; myField.selectionEnd = cursorPos; } else { myField.value += tag; myField.focus(); } }/* ]]> */</script><a href="javascript:grin(':?:')"><img src="icon_question.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_question.gif" alt=":?:" title="疑问" /></a><a href="javascript:grin(':razz:')"><img src="icon_razz.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_razz.gif" alt=":razz:" title="调皮" /></a><a href="javascript:grin(':sad:')"><img src="icon_sad.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_sad.gif" alt=":sad:" title="难过" /></a><a href="javascript:grin(':evil:')"><img src="icon_evil.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_evil.gif" alt=":evil:" title="抠鼻" /></a><a href="javascript:grin(':!:')"><img src="icon_exclaim.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_exclaim.gif" alt=":!:" title="吓" /></a><a href="javascript:grin(':smile:')"><img src="icon_smile.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_smile.gif" alt=":smile:" title="微笑" /></a><a href="javascript:grin(':oops:')"><img src="icon_redface.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_redface.gif" alt=":oops:" title="憨笑" /></a><a href="javascript:grin(':grin:')"><img src="icon_biggrin.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_biggrin.gif" alt=":grin:" title="坏笑" /></a><a href="javascript:grin(':eek:')"><img src="icon_surprised.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_surprised.gif" alt=":eek:" title="惊讶" /></a><a href="javascript:grin(':shock:')"><img src="icon_eek.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_eek.gif" alt=":shock:" title="发呆" /></a><a href="javascript:grin(':???:')"><img src="icon_confused.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_confused.gif" alt=":???:" title="撇嘴" /></a><a href="javascript:grin(':cool:')"><img src="icon_cool.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_cool.gif" alt=":cool:" title="大兵" /></a><a href="javascript:grin(':lol:')"><img src="icon_lol.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_lol.gif" alt=":lol:" title="偷笑" /></a><a href="javascript:grin(':mad:')"><img src="icon_mad.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_mad.gif" alt=":mad:" title="咒骂" /></a><a href="javascript:grin(':twisted:')"><img src="icon_twisted.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_twisted.gif" alt=":twisted:" title="发怒" /></a><a href="javascript:grin(':roll:')"><img src="icon_rolleyes.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_rolleyes.gif" alt=":roll:" title="白眼" /></a><a href="javascript:grin(':wink:')"><img src="icon_wink.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_wink.gif" alt=":wink:" title="鼓掌" /></a><a href="javascript:grin(':idea:')"><img src="icon_idea.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_idea.gif" alt=":idea:" title="酷" /></a><a href="javascript:grin(':arrow:')"><img src="icon_arrow.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_arrow.gif" alt=":arrow:" title="擦汗" /></a><a href="javascript:grin(':neutral:')"><img src="icon_neutral.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_neutral.gif" alt=":neutral:" title="亲亲" /></a><a href="javascript:grin(':cry:')"><img src="icon_cry.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_cry.gif" alt=":cry:" title="大哭" /></a><a href="javascript:grin(':mrgreen:')"><img src="icon_mrgreen.gif" tppabs="http://clsn.io/wp-content/themes/clsn-003/img/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="呲牙" /></a><br /></p> <p class="comment-form-comment"><textarea id="comment" name="comment" rows="4" tabindex="1"></textarea></p> <p class="comment-tool"> <a class="tool-img" href='javascript:embedImage();' title="插入图片"><i class="icon-img"></i><i class="be be-picture"></i></a> <a class="emoji" href="" title="插入表情"><i class="be be-insertemoticon"></i></a> </p> <div id="comment-author-info"> <p class="comment-form-author"> <label for="author">昵称<span class="required">*</span></label> <input type="text" name="author" id="author" class="commenttext" value="" tabindex="2" /> </p> <p class="comment-form-email"> <label for="email">邮箱<span class="required">*</span></label> <input type="text" name="email" id="email" class="commenttext" value="" tabindex="3" /> </p> <p class="comment-form-url"> <label for="url">网址</label> <input type="text" name="url" id="url" class="commenttext" value="" tabindex="4" /> </p> </div> <div class="qaptcha"></div> <div class="clear"></div> <p class="form-submit"> <input id="submit" name="submit" type="submit" tabindex="5" value="提交评论"/> <input type='hidden' name='comment_post_ID' value='892' id='comment_post_ID' /><input type='hidden' name='comment_parent' id='comment_parent' value='0' /> </p> <span class="mail-notify"> <input type="checkbox" name="comment_mail_notify" id="comment_mail_notify" class="notify" value="comment_mail_notify" /> <label for="comment_mail_notify"><span>有回复时邮件通知我</span></label> </span> </form> </div> </div><!-- #comments --> </main><!-- .site-main --> </div><!-- .content-area --><div id="sidebar" class="widget-area all-sidebar"> <aside id="search-3" class="widget widget_search wow fadeInUp" data-wow-delay="0.3s"><h3 class="widget-title"><span class="title-i"><span class="title-i-t"></span><span class="title-i-b"></span><span class="title-i-b"></span><span class="title-i-t"></span></span>全站搜索</h3><div class="searchbar"> <form method="get" id="searchform" action="http://clsn.io/"> <span class="search-input"> <input type="text" value="" name="s" id="s" placeholder="输入搜索内容" required /> <button type="submit" id="searchsubmit"><i class="be be-search"></i></button> </span> </form></div><div class="clear"></div></aside><aside id="random_post-2" class="widget random_post wow fadeInUp" data-wow-delay="0.3s"><h3 class="widget-title"><span class="title-i"><span class="title-i-t"></span><span class="title-i-b"></span><span class="title-i-b"></span><span class="title-i-t"></span></span>热点文章</h3><div id="random_post_widget"> <ul> <li><a href="lx427.html" tppabs="http://clsn.io/clsn/lx427.html" rel="bookmark">keepalived实现服务高可用</a></li> <li><a href="lx130.html" tppabs="http://clsn.io/clsn/lx130.html" rel="bookmark">AWK常用技巧</a></li> <li><a href="lx775.html" tppabs="http://clsn.io/clsn/lx775.html" rel="bookmark">使用cobbler批量安装操作系统(基于Centos7.x )</a></li> <li><a href="lx613.html" tppabs="http://clsn.io/clsn/lx613.html" rel="bookmark">高并发场景 LVS 安装及高可用实现</a></li> <li><a href="lx991.html" tppabs="http://clsn.io/clsn/lx991.html" rel="bookmark">Linux必知必会的目录与启动过程</a></li> <li><a href="lx983.html" tppabs="http://clsn.io/clsn/lx983.html" rel="bookmark">linux中的权限</a></li> <li><a href="lx949.html" tppabs="http://clsn.io/clsn/lx949.html" rel="bookmark">TCP/IP 协议簇 端口 三次握手 四次挥手 11种状态集</a></li> <li><a href="lx985.html" tppabs="http://clsn.io/clsn/lx985.html" rel="bookmark">扩展正则表达式及应用</a></li> <li><a href="lx370.html" tppabs="http://clsn.io/clsn/lx370.html" rel="bookmark">MySQL的存储引擎与日志说明</a></li> <li><a href="lx658.html" tppabs="http://clsn.io/clsn/lx658.html" rel="bookmark">Zabbix 3.0 从入门到精通(zabbix使用详解)</a></li> </ul></div><div class="clear"></div></aside> </div><div class="clear"></div> </div><!-- .site-content --> <div class="clear"></div> <footer id="colophon" class="site-footer" role="contentinfo"> <div class="site-info"> Copyright © 2018 <a href="index.htm" tppabs="http://clsn.io/">惨绿少年</a>  版权所有 <span class="add-info"> </span> </div><!-- .site-info --> </footer><!-- .site-footer --><div id="login"> <div id="login-tab" class="login-tab-product"> <h2 class="login-tab-hd"> <span class="login-tab-hd-con"><a href="javascript:">登录</a></span> <span class="login-tab-hd-con"><a href="javascript:">注册</a></span> <span class="login-tab-hd-con"><a href="javascript:">找回密码</a></span> </h2> <div class="login-tab-bd login-dom-display"> <div class="login-tab-bd-con login-current"> <div id="tab1_login" class="tab_content_login"> <form method="post" action="http://clsn.io/wp-login.php" class="wp-user-form"> <div class="username"> <label for="user_login">用户名</label> <input type="text" name="log" value="" size="20" id="user_login" tabindex="11" /> </div> <div class="password"> <label for="user_pass">密码</label> <input type="password" name="pwd" value="" size="20" id="user_pass" tabindex="12" /> </div> <div class="login-form"></div> <div class="login_fields"> <div class="rememberme"> <label for="rememberme"> <input type="checkbox" name="rememberme" value="forever" checked="checked" id="rememberme" tabindex="13" />记住我的登录信息 </label> </div> <input type="submit" name="user-submit" value="登录" tabindex="14" class="user-submit" /> <input type="hidden" name="redirect_to" value="/clsn/lx892.html" /> <input type="hidden" name="user-cookie" value="1" /> </div> </form> </div> </div> <div class="login-tab-bd-con"> <div id="tab2_login" class="tab_content_login"> <form method="post" action="http://clsn.io/wp-login.php?action=register" class="wp-user-form"> <div class="username"> <label for="user_login">用户名</label> <input type="text" name="user_login" value="" size="20" id="user_login" tabindex="101" /> </div> <div class="password"> <label for="user_email">电子邮件地址</label> <input type="text" name="user_email" value="" size="25" id="user_email" tabindex="102" /> </div> <div class="login_fields"> <input type="submit" name="user-submit" value="注册" class="user-submit" tabindex="103" /> <input type="hidden" name="redirect_to" value="/clsn/lx892.html?register=true" /> <input type="hidden" name="user-cookie" value="1" /> </div> </form> </div> </div> <div class="login-tab-bd-con"> <div id="tab3_login" class="tab_content_login"> <p class="message">输入用户名或电子邮箱地址，您会收到一封新密码链接的电子邮件。</p> <form method="post" action="http://clsn.io/wp-login.php?action=lostpassword" class="wp-user-form"> <div class="username"> <label for="user_login" class="hide">用户名或电子邮件地址</label> <input type="text" name="user_login" value="" size="20" id="user_login" tabindex="1001" /> </div> <div class="login_fields"> <div class="login-form"></div> <input type="submit" name="user-submit" value="获取新密码" class="user-submit" tabindex="1002" /> <input type="hidden" name="redirect_to" value="/clsn/lx892.html?reset=true" /> <input type="hidden" name="user-cookie" value="1" /> </div> </form> </div> </div> </div> </div> </div><ul id="scroll"> <li class="log log-no"><a class="log-button" title="文章目录"><i class="be be-menu"></i></a><div class="log-prompt"><div class="log-arrow">文章目录</div></div></li> <li><a class="scroll-home" href="index.htm" tppabs="http://clsn.io/" title="首页" rel="home"><i class="be be-home"></i></a></li> <li><a class="scroll-h" title="返回顶部"><i class="be be-arrowup"></i></a></li> <li><a class="scroll-c" title="评论"><i class="be be-speechbubble"></i></a></li> <li><a class="scroll-b" title="转到底部"><i class="be be-arrowdown"></i></a></li> <li class="qr-site"><a href="javascript:void(0)" class="qr" title="本页二维码"><i class="be be-qr-code"></i><span class="qr-img"><span id="output"><img class="alignnone" src="Frog-2-1.png" tppabs="http://clsn.io/wp-content/uploads/2018/09/Frog-2-1.png" alt="icon"/></span><span class="arrow arrow-z"><i class="be be-playarrow"></i></span><span class="arrow arrow-y"><i class="be be-playarrow"></i></span></span></a></li> <script type="text/javascript">$(document).ready(function(){if(!+[1,]){present="table";} else {present="canvas";}$('#output').qrcode({render:present,text:window.location.href,width:"150",height:"150"});});</script> </ul> <script src="wb.js" tppabs="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script> <html xmlns:wb="http://open.weibo.com/wb"></div><!-- .site --><script type="text/javascript">/* 鼠标点击特效 */var a_idx = 0;jQuery(document).ready(function($) { $("body").click(function(e) {//var a = new Array("富强", "民主", "文明", "和谐", "自由", "平等", "公正" ,"法治", "爱国", "敬业", "诚信", "友善");var a = new Array("clsn", "惨绿少年", "CLSN", "clsn.io", "linux", "", "公正");var $i = $("<span/>").text(a[a_idx]); a_idx = (a_idx + 1) % a.length;var x = e.pageX, y = e.pageY; $i.css({"z-index": 999999999999999999999999999999999999999999999999999999999999999999999,"top": y - 20,"left": x,"position": "absolute","font-weight": "bold","color": "#ff6651" }); $("body").append($i); $i.animate({"top": y - 180,"opacity": 0 }, 1500,function() { $i.remove(); }); });});</script><script type="text/javascript" src="jquery-ui.min.js" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/jquery-ui.min.js"></script><script type="text/javascript" src="qaptcha.jquery.js" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/qaptcha.jquery.js"></script><script type="text/javascript">var QaptchaJqueryPage="/wp-content/themes/clsn-003/inc/qaptcha.jquery.php"</script><script type="text/javascript">$(document).ready(function(){$('.qaptcha').QapTcha();});</script><script type='text/javascript'>/* <![CDATA[ */var imp_data = {"ajaxurl":"http:\/\/clsn.io\/wp-admin\/admin-ajax.php","_wpnonce":"848a4b7a78"};/* ]]> */</script><script type='text/javascript' src="import.js-ver=4.9.8" tppabs="http://clsn.io/wp-content/plugins/cnblogs2wp/js/import.js?ver=4.9.8"></script><script type='text/javascript' src="slides.js-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/slides.js?ver=2017.07.26"></script><script type='text/javascript' src="jquery.qrcode.min.js-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/jquery.qrcode.min.js?ver=2017.07.26"></script><script type='text/javascript' src="sticky.js-ver=1.6.0" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/sticky.js?ver=1.6.0"></script><script type='text/javascript' src="jquery-ias.js-ver=2.2.1" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/jquery-ias.js?ver=2.2.1"></script><script type='text/javascript' src="jquery.lazyload.js-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/jquery.lazyload.js?ver=2017.07.26"></script><script type='text/javascript' src="tipso.js-ver=1.0.1" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/tipso.js?ver=1.0.1"></script><script type='text/javascript'>/* <![CDATA[ */var wpl_ajax_url = "\/wp-content\/themes\/clsn-003\/inc\/admin-ajax.php";/* ]]> */</script><script type='text/javascript' src="script.js-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/script.js?ver=2017.07.26"></script><script type='text/javascript' src="flexisel.js-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/flexisel.js?ver=2017.07.26"></script><script type='text/javascript' src="fancybox.js-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/fancybox.js?ver=2017.07.26"></script><script type='text/javascript' src="comments-ajax-qt.js-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/comments-ajax-qt.js?ver=2017.07.26"></script><script type='text/javascript' src="superfish.js-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/superfish.js?ver=2017.07.26"></script><script type='text/javascript' src="bd-share.js-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/bd-share.js?ver=2017.07.26"></script><script type='text/javascript' src="wpzm.js-ver=2017.07.26" tppabs="http://clsn.io/wp-content/themes/clsn-003/js/wpzm.js?ver=2017.07.26"></script><script type="text/javascript">var ias=$.ias({container:"#comments",item:".comment-list",pagination:".scroll-links",next:".scroll-links .nav-previous a",});ias.extension(new IASTriggerExtension({text:'<i class="be be-circledown"></i>更多',offset: 0,}));ias.extension(new IASSpinnerExtension());ias.extension(new IASNoneLeftExtension({text:'已是最后',}));ias.on('rendered',function(items){$("img").lazyload({effect: "fadeIn",failure_limit: 10});});</script></body></html>